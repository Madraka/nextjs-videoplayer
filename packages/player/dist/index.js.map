{"version":3,"sources":["../src/index.ts","../src/components/player/configurable-video-player.tsx","../src/lib/utils.ts","../src/components/controls/video-controls.tsx","../src/components/ui/slider.tsx","../src/components/ui/dialog.tsx","../src/components/controls/keyboard-shortcuts.tsx","../src/components/player/loading-spinner.tsx","../src/components/player/error-display.tsx","../src/hooks/use-video-player.ts","../src/core/adapters/adapter-registry.ts","../src/core/adapters/dashjs-adapter.ts","../src/core/compatibility.ts","../src/core/adapters/direct-video-adapter.ts","../src/core/adapters/hlsjs-adapter.ts","../src/core/adapters/native-hls-adapter.ts","../src/core/adapters/default-adapters.ts","../src/lib/logger.ts","../src/core/drm/eme-controller.ts","../src/core/plugins/plugin-manager.ts","../src/core/video-engine.ts","../src/hooks/use-video-gestures.ts","../src/contexts/player-config-context.tsx","../src/types/player-config.ts","../src/components/player/video-player.tsx","../src/components/controls/mobile-video-controls.tsx","../src/components/player/video-thumbnail.tsx","../src/components/demo/video-player-demo.tsx","../src/components/demo/video-source-selector.tsx","../src/components/ui/card.tsx","../src/components/ui/badge.tsx","../src/components/ui/button.tsx","../src/components/demo/player-stats.tsx","../src/components/demo/feature-list.tsx","../src/components/config/player-config-panel.tsx","../src/components/ui/switch.tsx","../src/components/ui/select.tsx","../src/components/ui/tabs.tsx","../src/components/ui/input.tsx","../src/components/ui/label.tsx","../src/components/ui/separator.tsx","../src/core/drm/license-request.ts","../src/plugins/analytics.ts"],"sourcesContent":["// Main Components\nexport { ConfigurableVideoPlayer } from './components/player/configurable-video-player';\nexport { VideoPlayer } from './components/player/video-player';\nexport { MobileVideoControls } from './components/controls/mobile-video-controls';\nexport { VideoControls } from './components/controls/video-controls';\nexport { VideoThumbnail } from './components/player/video-thumbnail';\nexport { LoadingSpinner } from './components/player/loading-spinner';\nexport { ErrorDisplay } from './components/player/error-display';\n\n// Demo Components (Optional)\nexport { VideoPlayerDemo } from './components/demo/video-player-demo';\nexport { VideoSourceSelector } from './components/demo/video-source-selector';\nexport type { VideoSource } from './components/demo/video-source-selector';\n\n// Context & Configuration\nexport { PlayerConfigProvider, usePlayerConfig } from './contexts/player-config-context';\nexport { PlayerConfigPanel } from './components/config/player-config-panel';\n\n// Hooks\nexport { useVideoPlayer } from './hooks/use-video-player';\nexport { useVideoGestures } from './hooks/use-video-gestures';\n\n// Core Engine\nexport { VideoEngine } from './core/video-engine';\nexport { getBrowserCapabilities, getStreamingStrategy } from './core/compatibility';\nexport { AdapterRegistry } from './core/adapters/adapter-registry';\nexport { defaultStreamingAdapters } from './core/adapters/default-adapters';\nexport { VideoEnginePluginManager } from './core/plugins/plugin-manager';\nexport { createEmeController, isEmeSupported } from './core/drm/eme-controller';\nexport { createTokenLicenseRequestHandler } from './core/drm/license-request';\n\n// Types\nexport type { \n  PlayerConfiguration,\n  PlayerTheme,\n  ControlsVisibility,\n  KeyboardShortcutsConfig,\n  GesturesConfig,\n  AutoBehavior,\n  AnalyticsConfig,\n  AdvancedFeatures,\n} from './types/player-config';\n\nexport type {\n  VideoPlayerState,\n  VideoPlayerControls,\n} from './hooks/use-video-player';\n\nexport type {\n  VideoEngineConfig,\n  VideoEngineEvents,\n  VideoEngineOptions,\n} from './core/video-engine';\n\nexport type {\n  QualityLevel,\n  StreamingAdapter,\n  StreamingAdapterFactory,\n  AdapterSelectionContext,\n  AdapterLoadContext,\n} from './core/adapters/types';\n\nexport type {\n  DrmConfiguration,\n  DrmLicenseRequestContext,\n  DrmLicenseRequestHandler,\n  DrmSystemConfiguration,\n} from './core/drm/types';\n\nexport type {\n  EmeController,\n  EmeEnvironment,\n} from './core/drm/eme-controller';\n\nexport type {\n  TokenLicenseRequestHandlerOptions,\n} from './core/drm/license-request';\n\nexport type {\n  VideoEnginePlugin,\n  VideoEnginePluginContext,\n  VideoEnginePluginErrorPayload,\n  VideoEnginePluginFailoverPayload,\n  VideoEnginePluginLoadPayload,\n  VideoEnginePluginRetryPayload,\n  VideoEnginePluginSourceLoadFailedPayload,\n  VideoEnginePluginTimeUpdatePayload,\n  VideoEnginePluginVolumePayload,\n} from './core/plugins/types';\n\nexport type {\n  GestureConfig,\n  GestureCallbacks,\n} from './hooks/use-video-gestures';\n\n// Presets\nexport { PlayerPresets, mergePlayerConfig } from './types/player-config';\n\n// Utilities\nexport { cn } from './lib/utils';\nexport { createConsoleLogger, getPlayerLogger, setPlayerLogger } from './lib/logger';\nexport type { ConsoleLoggerOptions, PlayerLogger } from './lib/logger';\nexport { AnalyticsPlugin, createAnalyticsPlugin } from './plugins/analytics';\nexport type {\n  AnalyticsConfig as EngineAnalyticsConfig,\n  AnalyticsEvent,\n} from './plugins/analytics';\n\n// Version\ndeclare const __PLAYER_VERSION__: string;\nexport const VERSION = __PLAYER_VERSION__;\n","'use client';\n\nimport React, { forwardRef, useRef, useEffect } from 'react';\nimport { cn } from '@/lib/utils';\nimport { VideoControls } from '@/components/controls/video-controls';\nimport { LoadingSpinner } from '@/components/player/loading-spinner';\nimport { ErrorDisplay } from '@/components/player/error-display';\nimport { useVideoPlayer } from '@/hooks/use-video-player';\nimport { useVideoGestures } from '@/hooks/use-video-gestures';\nimport { usePlayerConfig } from '@/contexts/player-config-context';\nimport type { VideoEngineConfig } from '@/core/video-engine';\nimport type { DrmConfiguration } from '@/core/drm/types';\nimport type { VideoEnginePlugin } from '@/core/plugins/types';\nimport type { PlayerConfiguration } from '@/types/player-config';\nimport type { VideoPlayerState } from '@/hooks/use-video-player';\n\ninterface ConfigurableVideoPlayerProps {\n  src?: string;\n  fallbackSources?: string[];\n  drmConfig?: DrmConfiguration;\n  poster?: string;\n  thumbnailUrl?: string;\n  autoPlay?: boolean;\n  muted?: boolean;\n  loop?: boolean;\n  playsInline?: boolean;\n  className?: string;\n  configOverride?: Partial<PlayerConfiguration>;\n  enginePlugins?: VideoEnginePlugin[];\n  aspectRatio?: 'auto' | '16/9' | '4/3' | '1/1' | '9/16' | '3/4' | 'custom';\n  customAspectRatio?: string;\n  onReady?: () => void;\n  onPlay?: () => void;\n  onPause?: () => void;\n  onError?: (error: string) => void;\n  onTimeUpdate?: (currentTime: number, duration: number) => void;\n  onStateChange?: (state: VideoPlayerState) => void;\n}\n\nexport const ConfigurableVideoPlayer = forwardRef<HTMLVideoElement, ConfigurableVideoPlayerProps>(({\n  src,\n  fallbackSources,\n  drmConfig,\n  poster,\n  thumbnailUrl,\n  autoPlay,\n  muted = false,\n  loop = false,\n  playsInline = true,\n  className,\n  configOverride,\n  enginePlugins,\n  aspectRatio = 'auto',\n  customAspectRatio,\n  onReady,\n  onPlay,\n  onPause,\n  onError,\n  onTimeUpdate,\n  onStateChange,\n}, ref) => {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const lastStateSignatureRef = useRef<string | null>(null);\n  const onReadyRef = useRef<typeof onReady>(onReady);\n  const readySignalRef = useRef<string | null>(null);\n\n  // Get configuration from context and merge with override\n  const { config: contextConfig } = usePlayerConfig();\n  const config = configOverride \n    ? { ...contextConfig, ...configOverride } \n    : contextConfig;\n\n  // Video player hook\n  const { state, controls: playerControls, qualityLevels, engine } = useVideoPlayer(videoRef, {\n    autoPlay: autoPlay ?? config.auto?.autoPlay ?? false,\n    muted,\n    volume: 1,\n    enginePlugins,\n  });\n\n  // Apply gesture configuration - Mobile optimized\n  const gestureCallbacks = {\n    onTap: () => {\n      state.isPlaying ? playerControls.pause() : playerControls.play();\n    },\n    onDoubleTap: (direction: 'left' | 'right') => {\n      const seekAmount = 10;\n      if (direction === 'left') {\n        playerControls.seek(Math.max(0, state.currentTime - seekAmount));\n      } else {\n        playerControls.seek(Math.min(state.duration, state.currentTime + seekAmount));\n      }\n    },\n    onSwipeVolume: (delta: number) => {\n      const newVolume = Math.max(0, Math.min(1, state.volume + delta));\n      playerControls.setVolume(newVolume);\n    }\n  };\n  \n  // Use gesture hook with enhanced mobile support\n  useVideoGestures(videoRef, gestureCallbacks, {\n    enableTapToPlay: true,\n    enableDoubleTapSeek: true,\n    enableSwipeVolume: false,\n    seekAmount: 10,\n    volumeSensitivity: 0.02,\n  });\n\n  // Calculate aspect ratio\n  const getAspectRatio = () => {\n    if (aspectRatio === 'custom' && customAspectRatio) {\n      return customAspectRatio;\n    }\n    if (aspectRatio === 'auto' || state.isFullscreen || state.isTheaterMode) {\n      return 'auto';\n    }\n    return aspectRatio;\n  };\n\n  // Determine if this is a vertical video format\n  const isVerticalFormat = aspectRatio === '9/16' || aspectRatio === '3/4';\n  const isSquareFormat = aspectRatio === '1/1';\n\n  // Load video source when engine is ready\n  useEffect(() => {\n    onReadyRef.current = onReady;\n  }, [onReady]);\n\n  useEffect(() => {\n    if (!src || !engine) return;\n\n    const videoConfig: VideoEngineConfig = {\n      src,\n      fallbackSources,\n      drm: drmConfig,\n      poster,\n      autoplay: autoPlay ?? config.auto?.autoPlay ?? false,\n      muted,\n      loop,\n      playsInline,\n    };\n\n    const timer = setTimeout(() => {\n      playerControls.load(videoConfig);\n    }, 50);\n\n    return () => clearTimeout(timer);\n  }, [src, fallbackSources, drmConfig, poster, autoPlay, muted, loop, playsInline, engine, config.auto?.autoPlay]);\n\n  // Event callbacks\n  useEffect(() => {\n    if (state.isPlaying) {\n      onPlay?.();\n    } else if (state.isPaused) {\n      onPause?.();\n    }\n  }, [state.isPlaying, state.isPaused, onPlay, onPause]);\n\n  useEffect(() => {\n    if (state.error) {\n      onError?.(state.error);\n    }\n  }, [state.error, onError]);\n\n  useEffect(() => {\n    onTimeUpdate?.(state.currentTime, state.duration);\n  }, [state.currentTime, state.duration, onTimeUpdate]);\n\n  useEffect(() => {\n    if (!onStateChange) {\n      return;\n    }\n\n    const signature = JSON.stringify({\n      isPlaying: state.isPlaying,\n      isPaused: state.isPaused,\n      isLoading: state.isLoading,\n      isMuted: state.isMuted,\n      currentTime: Number(state.currentTime.toFixed(2)),\n      duration: Number(state.duration.toFixed(2)),\n      volume: Number(state.volume.toFixed(2)),\n      buffered: Number(state.buffered.toFixed(2)),\n      quality: state.quality,\n      playbackRate: state.playbackRate,\n      isFullscreen: state.isFullscreen,\n      isPictureInPicture: state.isPictureInPicture,\n      isTheaterMode: state.isTheaterMode,\n      error: state.error,\n      playCount: state.playCount,\n      totalWatchTime: Number(state.totalWatchTime.toFixed(2)),\n      bufferingTime: Number(state.bufferingTime.toFixed(2)),\n      qualityChanges: state.qualityChanges,\n    });\n\n    if (lastStateSignatureRef.current === signature) {\n      return;\n    }\n\n    lastStateSignatureRef.current = signature;\n    onStateChange(state);\n  }, [state, onStateChange]);\n\n  useEffect(() => {\n    if (state.isLoading || state.duration <= 0) {\n      return;\n    }\n\n    // Fire onReady once per loaded source/duration pair to avoid render loops\n    // when parent provides a new callback identity on each render.\n    const readySignal = `${src ?? 'no-src'}|${state.duration}`;\n    if (readySignalRef.current === readySignal) {\n      return;\n    }\n\n    readySignalRef.current = readySignal;\n    onReadyRef.current?.();\n  }, [state.isLoading, state.duration, src]);\n\n  // Forward ref\n  React.useImperativeHandle(ref, () => videoRef.current!);\n\n  // Apply theme styles\n  const themeStyles = config.theme ? {\n    '--player-primary': config.theme.primary || '#dc2626',\n    '--player-secondary': config.theme.secondary || '#64748b',\n    '--player-accent': config.theme.accent || '#dc2626',\n    '--player-progress': config.theme.progressColor || '#dc2626',\n    '--player-buffer': config.theme.bufferColor || 'rgba(255,255,255,0.4)',\n  } as React.CSSProperties : {};\n\n  // Single official UI: keep the full control set visible.\n  const shouldShowControls = true;\n\n  return (\n    <div\n      ref={containerRef}\n      className={cn(\n        'relative bg-black overflow-hidden group transition-all duration-300',\n        'focus-within:outline-none focus-within:ring-2 focus-within:ring-white/30',\n        state.isFullscreen && 'fixed inset-0 z-50',\n        state.isTheaterMode && 'mx-auto max-w-none',\n        // Format specific styles\n        isVerticalFormat ? 'max-w-sm mx-auto w-full' : \n        isSquareFormat ? 'max-w-lg mx-auto w-full' : 'w-full',\n        className\n      )}\n      style={{\n        aspectRatio: getAspectRatio(),\n        height: state.isTheaterMode ? '70vh' : \n                (isVerticalFormat ? 'min(70vh, 80vw * 16/9)' : \n                 isSquareFormat ? 'min(60vh, 90vw)' : 'auto'),\n        maxHeight: isVerticalFormat ? '70vh' : isSquareFormat ? '60vh' : undefined,\n        width: isVerticalFormat ? 'min(400px, 90vw)' : \n               isSquareFormat ? 'min(500px, 90vw)' : '100%',\n        ...themeStyles,\n      }}\n    >\n      {/* Video Element */}\n      <video\n        ref={videoRef}\n        className=\"w-full h-full object-contain\"\n        controls={false}\n        playsInline={playsInline}\n        {...(playsInline && { 'webkit-playsinline': '' })}\n        poster={poster}\n        preload=\"metadata\"\n      />\n\n      {/* Loading Spinner */}\n      {state.isLoading && (\n        <div className=\"absolute inset-0 flex items-center justify-center bg-black/30 backdrop-blur-[1px]\">\n          <LoadingSpinner />\n        </div>\n      )}\n\n      {/* Error Display */}\n      {state.error && (\n        <ErrorDisplay \n          error={state.error} \n          onRetry={() => {\n            if (src) {\n              playerControls.load({\n                src,\n                fallbackSources,\n                drm: drmConfig,\n                poster,\n                autoplay: autoPlay ?? config.auto?.autoPlay ?? false,\n                muted,\n                loop,\n                playsInline,\n              });\n            }\n          }}\n        />\n      )}\n\n      {/* Video Controls */}\n      {shouldShowControls && (\n        <VideoControls\n          state={state}\n          controls={playerControls}\n          qualityLevels={qualityLevels}\n          controlsConfig={{\n            fullscreen: true,\n            volume: true,\n            quality: true,\n            progress: true,\n            playPause: true,\n            playbackRate: true,\n            pictureInPicture: true,\n            theaterMode: true,\n            settings: true,\n            time: true,\n          }}\n          className={cn(\n            'transition-opacity duration-300',\n            'opacity-100 z-30 pointer-events-auto'\n          )}\n        />\n      )}\n\n      {/* Analytics tracking */}\n      {config.analytics?.enabled && (\n        <div className=\"hidden\" data-analytics=\"true\" />\n      )}\n    </div>\n  );\n});\n\nConfigurableVideoPlayer.displayName = 'ConfigurableVideoPlayer';\n","import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","/**\n * YouTube 2025/2026 style video player controls — fully responsive\n * Progress bar on top, bubble buttons below, unified settings panel\n * Works on desktop & mobile with adaptive sizing\n */\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport {\n  Play,\n  Pause,\n  Volume1,\n  Volume2,\n  VolumeX,\n  Maximize,\n  Minimize,\n  Settings,\n  Loader2,\n  PictureInPicture,\n  PictureInPicture2,\n  Gauge,\n  Monitor,\n  Smartphone,\n  Check,\n  ChevronRight,\n} from 'lucide-react';\nimport { Slider } from '@/components/ui/slider';\nimport { cn } from '@/lib/utils';\nimport { KeyboardShortcuts } from './keyboard-shortcuts';\nimport type { VideoPlayerState, VideoPlayerControls } from '@/hooks/use-video-player';\n\ninterface VideoControlsProps {\n  state: VideoPlayerState;\n  controls: VideoPlayerControls;\n  qualityLevels: Array<{ id: string; label: string; height?: number }>;\n  controlsConfig: {\n    fullscreen?: boolean;\n    quality?: boolean;\n    volume?: boolean;\n    progress?: boolean;\n    playPause?: boolean;\n    playbackRate?: boolean;\n    pictureInPicture?: boolean;\n    theaterMode?: boolean;\n    settings?: boolean;\n    time?: boolean;\n  };\n  onShow?: () => void;\n  onHide?: () => void;\n  className?: string;\n}\n\n// Format time in MM:SS or HH:MM:SS\nconst formatTime = (seconds: number): string => {\n  if (!isFinite(seconds)) return '0:00';\n  const hrs = Math.floor(seconds / 3600);\n  const mins = Math.floor((seconds % 3600) / 60);\n  const secs = Math.floor(seconds % 60);\n  if (hrs > 0) {\n    return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  }\n  return `${mins}:${secs.toString().padStart(2, '0')}`;\n};\n\n// Playback speed options\nconst playbackRateOptions = [\n  { value: 0.25, label: '0.25x' },\n  { value: 0.5, label: '0.5x' },\n  { value: 0.75, label: '0.75x' },\n  { value: 1, label: 'Normal' },\n  { value: 1.25, label: '1.25x' },\n  { value: 1.5, label: '1.5x' },\n  { value: 1.75, label: '1.75x' },\n  { value: 2, label: '2x' },\n];\n\n// YouTube-size icon button: 40px mobile → 44px desktop\nconst iconBtnClass =\n  'flex items-center justify-center w-10 h-10 sm:w-11 sm:h-11 rounded-full text-white hover:bg-white/10 active:bg-white/20 transition-colors duration-200 focus-visible:ring-2 focus-visible:ring-white/50 focus-visible:outline-none touch-manipulation';\n\n// Icon size: 20px mobile → 22px desktop\nconst iconClass = 'w-5 h-5 sm:w-[22px] sm:h-[22px]';\n\ntype SettingsPage = 'main' | 'quality' | 'speed';\n\nexport const VideoControls: React.FC<VideoControlsProps> = ({\n  state,\n  controls,\n  qualityLevels,\n  controlsConfig,\n  onShow,\n  onHide,\n  className,\n}) => {\n  const [showVolumeSlider, setShowVolumeSlider] = useState(false);\n  const [hoverTime, setHoverTime] = useState<number | null>(null);\n  const [hoverX, setHoverX] = useState<number>(0);\n  const [isMounted, setIsMounted] = useState(false);\n  const [isDragging, setIsDragging] = useState(false);\n  const [seekingTime, setSeekingTime] = useState<number | null>(null); // optimistic seek position\n  const [showSettings, setShowSettings] = useState(false);\n  const [settingsPage, setSettingsPage] = useState<SettingsPage>('main');\n  const [settingsDirection, setSettingsDirection] = useState<'forward' | 'back'>('forward');\n  const progressRef = useRef<HTMLDivElement>(null);\n  const settingsRef = useRef<HTMLDivElement>(null);\n  const rafRef = useRef<number>(0);\n\n  useEffect(() => { setIsMounted(true); }, []);\n\n  // Close settings on outside click / touch\n  useEffect(() => {\n    if (!showSettings) return;\n    const handleClick = (e: MouseEvent | TouchEvent) => {\n      if (settingsRef.current && !settingsRef.current.contains(e.target as Node)) {\n        setShowSettings(false);\n      }\n    };\n    const timer = setTimeout(() => {\n      document.addEventListener('mousedown', handleClick);\n      document.addEventListener('touchstart', handleClick);\n    }, 0);\n    return () => {\n      clearTimeout(timer);\n      document.removeEventListener('mousedown', handleClick);\n      document.removeEventListener('touchstart', handleClick);\n    };\n  }, [showSettings]);\n\n  const handlePlayPause = () => {\n    if (state.isLoading) return;\n    if (state.isPlaying && !state.isPaused) {\n      controls.pause();\n    } else if (state.isPaused && !state.isPlaying) {\n      controls.play();\n    }\n  };\n\n  // ── Progress bar: optimistic seek ──\n  // During drag we only update local seekingTime for instant visual feedback.\n  // The actual video.currentTime seek happens only on release (mouseup/touchend)\n  // or on a single click. This prevents the \"jumping\" caused by stale timeupdate\n  // events arriving between seek calls.\n\n  const positionFromClient = useCallback((clientX: number): number => {\n    if (!progressRef.current) return 0;\n    const rect = progressRef.current.getBoundingClientRect();\n    const x = Math.max(0, Math.min(clientX - rect.left, rect.width));\n    return (x / rect.width) * state.duration;\n  }, [state.duration]);\n\n  const updateHover = useCallback((clientX: number) => {\n    if (!progressRef.current) return;\n    const rect = progressRef.current.getBoundingClientRect();\n    const x = clientX - rect.left;\n    const pct = Math.max(0, Math.min(x / rect.width, 1));\n    setHoverTime(pct * state.duration);\n    setHoverX(pct * 100);\n  }, [state.duration]);\n\n  // Single click = instant seek\n  const handleProgressClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (isDragging) return; // handled by drag end\n    const time = positionFromClient(e.clientX);\n    setSeekingTime(time);\n    controls.seek(time);\n    // Clear optimistic value once state catches up\n    requestAnimationFrame(() => { setTimeout(() => setSeekingTime(null), 150); });\n  };\n\n  const handleProgressHover = (e: React.MouseEvent<HTMLDivElement>) => updateHover(e.clientX);\n\n  // Drag start — set optimistic position, do NOT seek yet\n  const handleProgressMouseDown = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    const time = positionFromClient(e.clientX);\n    setIsDragging(true);\n    setSeekingTime(time);\n  }, [positionFromClient]);\n\n  const handleProgressTouchStart = useCallback((e: React.TouchEvent<HTMLDivElement>) => {\n    const time = positionFromClient(e.touches[0].clientX);\n    setIsDragging(true);\n    setSeekingTime(time);\n  }, [positionFromClient]);\n\n  // Global drag handlers: update optimistic position only, seek on release\n  useEffect(() => {\n    if (!isDragging) return;\n\n    const onMove = (clientX: number) => {\n      cancelAnimationFrame(rafRef.current);\n      rafRef.current = requestAnimationFrame(() => {\n        const time = positionFromClient(clientX);\n        setSeekingTime(time);\n        updateHover(clientX);\n      });\n    };\n    const onMouseMove = (e: MouseEvent) => onMove(e.clientX);\n    const onTouchMove = (e: TouchEvent) => onMove(e.touches[0].clientX);\n\n    const onEnd = () => {\n      cancelAnimationFrame(rafRef.current);\n      setIsDragging(false);\n      // Commit the seek on release\n      if (seekingTime !== null) {\n        controls.seek(seekingTime);\n      }\n      // Keep seekingTime visible briefly while video catches up\n      setTimeout(() => setSeekingTime(null), 150);\n    };\n\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseup', onEnd);\n    window.addEventListener('touchmove', onTouchMove, { passive: true });\n    window.addEventListener('touchend', onEnd);\n    return () => {\n      cancelAnimationFrame(rafRef.current);\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onEnd);\n      window.removeEventListener('touchmove', onTouchMove);\n      window.removeEventListener('touchend', onEnd);\n    };\n  }, [isDragging, positionFromClient, updateHover, seekingTime, controls]);\n\n  // ── Volume ──\n  const handleVolumeChange = (value: number[]) => {\n    const rawValue = value[0];\n    if (!Number.isFinite(rawValue)) return;\n    controls.setVolume(rawValue / 100);\n  };\n\n  // ── Settings navigation ──\n  const navigateSettings = (page: SettingsPage) => {\n    setSettingsDirection('forward');\n    setSettingsPage(page);\n  };\n  const goBackSettings = () => {\n    setSettingsDirection('back');\n    setSettingsPage('main');\n  };\n  const toggleSettings = () => {\n    if (showSettings) { setShowSettings(false); }\n    else { setSettingsPage('main'); setSettingsDirection('forward'); setShowSettings(true); }\n  };\n\n  // Use optimistic seekingTime when dragging or just released, otherwise real state\n  const displayTime = seekingTime !== null ? seekingTime : state.currentTime;\n  const progressPercentage = state.duration > 0 ? (displayTime / state.duration) * 100 : 0;\n  const bufferedPercentage = state.buffered;\n\n  const VolumeIcon = state.isMuted || state.volume === 0\n    ? VolumeX : state.volume < 0.5 ? Volume1 : Volume2;\n\n  return (\n    <div className={cn(\n      'absolute bottom-0 left-0 right-0 z-30 pointer-events-auto',\n      className\n    )}>\n      {/* ─── Progress Bar (on top) ─── */}\n      {controlsConfig.progress && (\n        <div\n          ref={progressRef}\n          className=\"group/progress relative w-full cursor-pointer touch-manipulation\"\n          onClick={handleProgressClick}\n          onMouseMove={handleProgressHover}\n          onMouseDown={handleProgressMouseDown}\n          onMouseLeave={() => { if (!isDragging) setHoverTime(null); }}\n          onTouchStart={handleProgressTouchStart}\n          role=\"slider\"\n          aria-valuemin={0}\n          aria-valuemax={state.duration || 0}\n          aria-valuenow={displayTime}\n          aria-valuetext={`${formatTime(displayTime)} of ${formatTime(state.duration)}`}\n          tabIndex={0}\n        >\n          {/* Hover time tooltip */}\n          {hoverTime !== null && (\n            <div\n              className=\"absolute bottom-full mb-3 -translate-x-1/2 bg-black/90 backdrop-blur-sm text-white px-2.5 py-1 rounded-md text-xs font-medium pointer-events-none z-10 whitespace-nowrap shadow-lg\"\n              style={{ left: `${hoverX}%` }}\n            >\n              {formatTime(hoverTime)}\n            </div>\n          )}\n\n          {/* Hit area — tall enough for touch */}\n          <div className=\"h-5 sm:h-5 flex items-end\">\n            <div className={cn(\n              'relative w-full transition-all duration-150',\n              isDragging ? 'h-[5px]' : 'h-[3px] group-hover/progress:h-[5px]'\n            )}>\n              <div className=\"absolute inset-0 bg-white/20\" />\n              <div className=\"absolute left-0 top-0 h-full bg-white/40\" style={{ width: `${bufferedPercentage}%` }} />\n              <div className=\"absolute left-0 top-0 h-full bg-red-600\" style={{ width: `${progressPercentage}%` }} />\n              {hoverTime !== null && (\n                <div className=\"absolute top-0 h-full w-[2px] bg-white/60 pointer-events-none\" style={{ left: `${hoverX}%` }} />\n              )}\n              <div\n                className={cn(\n                  'absolute top-1/2 w-[14px] h-[14px] bg-red-600 rounded-full -translate-y-1/2 transition-all duration-150 shadow-md',\n                  'opacity-0 scale-75 group-hover/progress:opacity-100 group-hover/progress:scale-100',\n                  isDragging && 'opacity-100 scale-110'\n                )}\n                style={{ left: `calc(${progressPercentage}% - 7px)` }}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* ─── Controls Row (bubble containers) ─── */}\n      <div className=\"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 pb-2 sm:pb-2.5 pt-0.5\">\n        {/* ── Left Bubble: Play + Volume + Time ── */}\n        <div className=\"flex items-center rounded-full bg-black/60 backdrop-blur-md\">\n          {controlsConfig.playPause && (\n            <button type=\"button\" onClick={handlePlayPause} disabled={state.isLoading}\n              title={state.isPlaying ? 'Pause' : 'Play'} className={iconBtnClass}>\n              {state.isLoading ? <Loader2 className={cn(iconClass, 'animate-spin')} />\n                : state.isPlaying ? <Pause className={iconClass} />\n                : <Play className={iconClass} />}\n            </button>\n          )}\n\n          {controlsConfig.volume && (\n            <div className=\"relative flex items-center\"\n              onMouseEnter={() => setShowVolumeSlider(true)} onMouseLeave={() => setShowVolumeSlider(false)}>\n              <button type=\"button\" onClick={controls.toggleMute}\n                title={state.isMuted ? 'Unmute' : 'Mute'} className={iconBtnClass}>\n                <VolumeIcon className={iconClass} />\n              </button>\n              {/* Horizontal slider — hidden on narrow, visible on hover (desktop) */}\n              <div className={cn(\n                'hidden sm:flex overflow-hidden transition-all duration-200 items-center',\n                showVolumeSlider ? 'w-[80px] opacity-100' : 'w-0 opacity-0'\n              )}>\n                <Slider min={0} max={100} step={1}\n                  value={[Math.round((state.isMuted ? 0 : state.volume) * 100)]}\n                  onValueChange={handleVolumeChange}\n                  className=\"w-[80px] [&_[data-slot=slider-track]]:bg-white/30 [&_[data-slot=slider-track]]:h-[3px] [&_[data-slot=slider-range]]:bg-white [&_[data-slot=slider-thumb]]:bg-white [&_[data-slot=slider-thumb]]:border-white [&_[data-slot=slider-thumb]]:size-3 [&_[data-slot=slider-thumb]]:shadow-md\"\n                />\n              </div>\n            </div>\n          )}\n\n          {controlsConfig.time !== false && (\n            <span className=\"text-white/90 text-[11px] sm:text-xs tabular-nums whitespace-nowrap pr-2.5 sm:pr-3 pl-0.5 sm:pl-1 select-none\">\n              {formatTime(displayTime)} <span className=\"text-white/50\">/</span> {formatTime(state.duration)}\n            </span>\n          )}\n        </div>\n\n        <div className=\"flex-1 min-w-0\" />\n\n        {/* ── Right Bubble ── */}\n        <div className=\"flex items-center rounded-full bg-black/60 backdrop-blur-md\">\n          {/* Theater — desktop only */}\n          {controlsConfig.theaterMode && (\n            <button type=\"button\" onClick={controls.toggleTheaterMode}\n              title={state.isTheaterMode ? 'Exit Theater Mode' : 'Theater Mode'}\n              className={cn(iconBtnClass, 'hidden sm:flex')}>\n              {state.isTheaterMode ? <Smartphone className={iconClass} /> : <Monitor className={iconClass} />}\n            </button>\n          )}\n\n          {/* PiP — desktop only */}\n          {controlsConfig.pictureInPicture && isMounted && typeof document !== 'undefined' && 'pictureInPictureEnabled' in document && (\n            <button type=\"button\" onClick={controls.togglePictureInPicture}\n              title={state.isPictureInPicture ? 'Exit PiP' : 'Picture-in-Picture'}\n              className={cn(iconBtnClass, 'hidden sm:flex')}>\n              {state.isPictureInPicture ? <PictureInPicture2 className={iconClass} /> : <PictureInPicture className={iconClass} />}\n            </button>\n          )}\n\n          {/* Keyboard Shortcuts — desktop only */}\n          <div className=\"hidden sm:block\">\n            <KeyboardShortcuts />\n          </div>\n\n          {/* Settings (always visible) */}\n          {controlsConfig.settings !== false && (\n            <div className=\"relative\" ref={settingsRef}>\n              <button type=\"button\" onClick={toggleSettings} title=\"Settings\"\n                className={cn(iconBtnClass, showSettings && 'bg-white/10')}>\n                <Settings className={cn(iconClass, 'transition-transform duration-300', showSettings && 'rotate-45')} />\n              </button>\n\n              {/* Settings Panel */}\n              {showSettings && (\n                <div className=\"absolute bottom-full right-0 mb-2 z-50\">\n                  <div className=\"bg-neutral-900/95 backdrop-blur-lg rounded-xl border border-white/10 shadow-2xl overflow-hidden w-[260px] sm:w-[280px]\">\n                    <div className=\"relative overflow-hidden\">\n                      {/* Main */}\n                      {settingsPage === 'main' && (\n                        <div className={cn(\n                          'py-1',\n                          settingsDirection === 'back' ? 'animate-in slide-in-from-left-4 duration-200' : 'animate-in fade-in duration-150'\n                        )}>\n                          {controlsConfig.playbackRate && (\n                            <button type=\"button\"\n                              className=\"flex items-center w-full px-4 py-2.5 hover:bg-white/5 active:bg-white/10 transition-colors touch-manipulation\"\n                              onClick={() => navigateSettings('speed')}>\n                              <Gauge className=\"w-5 h-5 text-white/70 mr-3 flex-shrink-0\" />\n                              <span className=\"text-sm text-white flex-1 text-left\">Playback speed</span>\n                              <span className=\"text-sm text-white/50 mr-1\">\n                                {state.playbackRate === 1 ? 'Normal' : `${state.playbackRate}x`}\n                              </span>\n                              <ChevronRight className=\"w-4 h-4 text-white/40\" />\n                            </button>\n                          )}\n                          {controlsConfig.quality && qualityLevels.length > 0 && (\n                            <button type=\"button\"\n                              className=\"flex items-center w-full px-4 py-2.5 hover:bg-white/5 active:bg-white/10 transition-colors touch-manipulation\"\n                              onClick={() => navigateSettings('quality')}>\n                              <Settings className=\"w-5 h-5 text-white/70 mr-3 flex-shrink-0\" />\n                              <span className=\"text-sm text-white flex-1 text-left\">Quality</span>\n                              <span className=\"text-sm text-white/50 mr-1\">\n                                {state.quality === 'auto' ? 'Auto' : state.quality}\n                              </span>\n                              <ChevronRight className=\"w-4 h-4 text-white/40\" />\n                            </button>\n                          )}\n                          {/* Volume slider — mobile only (inside settings) */}\n                          <div className=\"sm:hidden px-4 py-2.5\">\n                            <div className=\"flex items-center gap-3\">\n                              <button type=\"button\" onClick={controls.toggleMute} className=\"flex-shrink-0\">\n                                <VolumeIcon className=\"w-5 h-5 text-white/70\" />\n                              </button>\n                              <Slider min={0} max={100} step={1}\n                                value={[Math.round((state.isMuted ? 0 : state.volume) * 100)]}\n                                onValueChange={handleVolumeChange}\n                                className=\"flex-1 [&_[data-slot=slider-track]]:bg-white/20 [&_[data-slot=slider-track]]:h-1 [&_[data-slot=slider-range]]:bg-white [&_[data-slot=slider-thumb]]:bg-white [&_[data-slot=slider-thumb]]:border-white [&_[data-slot=slider-thumb]]:size-4\"\n                              />\n                              <span className=\"text-xs text-white/50 tabular-nums w-8 text-right\">\n                                {Math.round((state.isMuted ? 0 : state.volume) * 100)}%\n                              </span>\n                            </div>\n                          </div>\n                          {/* PiP — mobile only (inside settings) */}\n                          {controlsConfig.pictureInPicture && isMounted && typeof document !== 'undefined' && 'pictureInPictureEnabled' in document && (\n                            <button type=\"button\"\n                              className=\"flex items-center w-full px-4 py-2.5 hover:bg-white/5 active:bg-white/10 transition-colors touch-manipulation sm:hidden\"\n                              onClick={() => { controls.togglePictureInPicture(); setShowSettings(false); }}>\n                              <PictureInPicture className=\"w-5 h-5 text-white/70 mr-3 flex-shrink-0\" />\n                              <span className=\"text-sm text-white flex-1 text-left\">Picture-in-Picture</span>\n                            </button>\n                          )}\n                        </div>\n                      )}\n\n                      {/* Speed */}\n                      {settingsPage === 'speed' && (\n                        <div className=\"animate-in slide-in-from-right-4 duration-200\">\n                          <button type=\"button\"\n                            className=\"flex items-center w-full px-4 py-2.5 border-b border-white/10 hover:bg-white/5 active:bg-white/10 transition-colors touch-manipulation\"\n                            onClick={goBackSettings}>\n                            <ChevronRight className=\"w-4 h-4 text-white/60 mr-2 rotate-180\" />\n                            <span className=\"text-sm font-medium text-white\">Playback speed</span>\n                          </button>\n                          <div className=\"py-1 max-h-[300px] overflow-y-auto\">\n                            {playbackRateOptions.map((opt) => (\n                              <button key={opt.value} type=\"button\"\n                                className=\"flex items-center w-full px-4 py-2.5 hover:bg-white/5 active:bg-white/10 transition-colors touch-manipulation\"\n                                onClick={() => { controls.setPlaybackRate(opt.value); goBackSettings(); }}>\n                                <span className=\"w-6 flex-shrink-0\">\n                                  {state.playbackRate === opt.value && <Check className=\"w-4 h-4 text-white\" />}\n                                </span>\n                                <span className={cn('text-sm', state.playbackRate === opt.value ? 'text-white font-medium' : 'text-white/80')}>\n                                  {opt.label}\n                                </span>\n                              </button>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Quality */}\n                      {settingsPage === 'quality' && (\n                        <div className=\"animate-in slide-in-from-right-4 duration-200\">\n                          <button type=\"button\"\n                            className=\"flex items-center w-full px-4 py-2.5 border-b border-white/10 hover:bg-white/5 active:bg-white/10 transition-colors touch-manipulation\"\n                            onClick={goBackSettings}>\n                            <ChevronRight className=\"w-4 h-4 text-white/60 mr-2 rotate-180\" />\n                            <span className=\"text-sm font-medium text-white\">Quality</span>\n                          </button>\n                          <div className=\"py-1 max-h-[300px] overflow-y-auto\">\n                            {qualityLevels.map((level) => (\n                              <button key={level.id} type=\"button\"\n                                className=\"flex items-center w-full px-4 py-2.5 hover:bg-white/5 active:bg-white/10 transition-colors touch-manipulation\"\n                                onClick={() => { controls.setQuality(level.id); goBackSettings(); }}>\n                                <span className=\"w-6 flex-shrink-0\">\n                                  {state.quality === level.label && <Check className=\"w-4 h-4 text-white\" />}\n                                </span>\n                                <span className={cn('text-sm', state.quality === level.label ? 'text-white font-medium' : 'text-white/80')}>\n                                  {level.label}\n                                </span>\n                              </button>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Fullscreen (always visible) */}\n          {controlsConfig.fullscreen && (\n            <button type=\"button\" onClick={controls.toggleFullscreen}\n              title={state.isFullscreen ? 'Exit Fullscreen' : 'Fullscreen'} className={iconBtnClass}>\n              {state.isFullscreen ? <Minimize className={iconClass} /> : <Maximize className={iconClass} />}\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Slider({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  ...props\n}: React.ComponentProps<typeof SliderPrimitive.Root>) {\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      className={cn(\n        \"relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col\",\n        className\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className={cn(\n          \"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5\"\n        )}\n      >\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={cn(\n            \"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full\"\n          )}\n        />\n      </SliderPrimitive.Track>\n      <SliderPrimitive.Thumb\n        data-slot=\"slider-thumb\"\n        className=\"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\n      />\n    </SliderPrimitive.Root>\n  )\n}\n\nexport { Slider }\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n","'use client';\n\nimport React from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Keyboard } from 'lucide-react';\n\nconst shortcuts = [\n  { key: 'Space / K', description: 'Play/Pause' },\n  { key: 'F', description: 'Toggle Fullscreen' },\n  { key: 'M', description: 'Toggle Mute' },\n  { key: 'I', description: 'Toggle Picture-in-Picture' },\n  { key: 'T', description: 'Toggle Theater Mode' },\n  { key: '←', description: 'Rewind 10 seconds' },\n  { key: '→', description: 'Forward 10 seconds' },\n  { key: '↑', description: 'Volume up' },\n  { key: '↓', description: 'Volume down' },\n  { key: '0', description: 'Go to beginning' },\n  { key: '1-9', description: 'Go to 10%-90% of video' },\n];\n\nexport const KeyboardShortcuts: React.FC = () => {\n  return (\n    <Dialog>\n      <DialogTrigger asChild>\n        <button\n          type=\"button\"\n          className=\"flex items-center justify-center w-10 h-10 sm:w-11 sm:h-11 rounded-full text-white hover:bg-white/10 active:bg-white/20 transition-colors duration-200 focus-visible:ring-2 focus-visible:ring-white/50 focus-visible:outline-none touch-manipulation\"\n        >\n          <Keyboard className=\"w-5 h-5 sm:w-[22px] sm:h-[22px]\" />\n        </button>\n      </DialogTrigger>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Keyboard Shortcuts</DialogTitle>\n        </DialogHeader>\n        <div className=\"space-y-2\">\n          {shortcuts.map((shortcut, index) => (\n            <div key={index} className=\"flex justify-between items-center py-1\">\n              <span className=\"text-sm text-muted-foreground\">{shortcut.description}</span>\n              <kbd className=\"px-2 py-1 text-xs bg-muted rounded font-mono\">\n                {shortcut.key}\n              </kbd>\n            </div>\n          ))}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","'use client';\n\nimport React from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface LoadingSpinnerProps {\n  className?: string;\n  size?: 'small' | 'medium' | 'large';\n}\n\nexport const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({\n  className,\n  size = 'medium'\n}) => {\n  const sizeClasses = {\n    small: 'w-6 h-6 border-2',\n    medium: 'w-10 h-10 border-[3px]',\n    large: 'w-14 h-14 border-[3px]'\n  };\n\n  return (\n    <div className={cn('flex items-center justify-center', className)}>\n      <div\n        className={cn(\n          'animate-spin rounded-full border-white/20 border-t-white',\n          sizeClasses[size]\n        )}\n      />\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","/**\n * YouTube-style error display for video player\n */\n\nimport React from 'react';\nimport { AlertCircle, RefreshCw } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface ErrorDisplayProps {\n  error: string;\n  onRetry?: () => void;\n  className?: string;\n}\n\nexport const ErrorDisplay: React.FC<ErrorDisplayProps> = ({\n  error,\n  onRetry,\n  className\n}) => {\n  return (\n    <div className={cn(\n      'flex flex-col items-center justify-center gap-4 p-6 text-white text-center max-w-md',\n      className\n    )}>\n      <div className=\"flex items-center justify-center w-16 h-16 rounded-full bg-white/10 backdrop-blur-md\">\n        <AlertCircle className=\"w-8 h-8 text-red-400\" />\n      </div>\n\n      <div className=\"space-y-1.5\">\n        <h3 className=\"text-base font-medium\">Video unavailable</h3>\n        <p className=\"text-sm text-white/60\">{error}</p>\n      </div>\n\n      {onRetry && (\n        <button\n          type=\"button\"\n          onClick={onRetry}\n          className=\"flex items-center gap-2 px-5 py-2.5 rounded-full bg-white/10 backdrop-blur-md text-white text-sm font-medium hover:bg-white/20 active:bg-white/25 transition-colors duration-200\"\n        >\n          <RefreshCw className=\"w-4 h-4\" />\n          Try again\n        </button>\n      )}\n    </div>\n  );\n};\n","/**\n * Video player state management hook\n * Handles playback state, progress, volume, and player controls\n */\n\nimport { useState, useEffect, useCallback, useMemo, useReducer, useRef } from 'react';\nimport { VideoEngine, type VideoEngineConfig, type VideoEngineEvents } from '@/core/video-engine';\nimport type { VideoEnginePlugin } from '@/core/plugins/types';\n\nexport interface VideoPlayerState {\n  isPlaying: boolean;\n  isPaused: boolean;\n  isLoading: boolean;\n  isMuted: boolean;\n  currentTime: number;\n  duration: number;\n  volume: number;\n  buffered: number;\n  quality: string;\n  playbackRate: number;\n  isFullscreen: boolean;\n  isPictureInPicture: boolean;\n  isTheaterMode: boolean;\n  error: string | null;\n  // Analytics data\n  playCount: number;\n  totalWatchTime: number;\n  bufferingTime: number;\n  averageBitrate: number;\n  qualityChanges: number;\n}\n\nexport interface VideoPlayerControls {\n  play: () => Promise<void>;\n  pause: () => void;\n  seek: (time: number) => void;\n  setVolume: (volume: number) => void;\n  toggleMute: () => void;\n  toggleFullscreen: () => void;\n  togglePictureInPicture: () => Promise<void>;\n  toggleTheaterMode: () => void;\n  setPlaybackRate: (rate: number) => void;\n  setQuality: (qualityId: string) => void;\n  load: (config: VideoEngineConfig) => Promise<void>;\n}\n\ninterface UseVideoPlayerOptions {\n  autoPlay?: boolean;\n  muted?: boolean;\n  volume?: number;\n  enginePlugins?: VideoEnginePlugin[];\n}\n\nexport type VideoPlayerAction =\n  | { type: 'ready' }\n  | { type: 'play' }\n  | { type: 'pause'; watchTime: number }\n  | { type: 'time_update'; currentTime: number; duration: number }\n  | { type: 'progress'; buffered: number }\n  | { type: 'volume_change'; volume: number; isMuted: boolean }\n  | { type: 'quality_change'; quality: string }\n  | { type: 'error'; message: string }\n  | { type: 'load_start' }\n  | { type: 'load_end'; bufferingTime: number }\n  | { type: 'fullscreen_change'; isFullscreen: boolean }\n  | { type: 'pip_change'; isPictureInPicture: boolean }\n  | { type: 'playback_rate_change'; playbackRate: number }\n  | { type: 'toggle_theater_mode' };\n\nconst TIME_EPSILON = 0.05;\nconst DURATION_EPSILON = 0.01;\nconst BUFFER_EPSILON = 0.25;\nconst VOLUME_EPSILON = 0.01;\n\nexport const createInitialState = (options: UseVideoPlayerOptions): VideoPlayerState => ({\n  isPlaying: false,\n  isPaused: true,\n  isLoading: false,\n  isMuted: options.muted ?? false,\n  currentTime: 0,\n  duration: 0,\n  volume: options.volume ?? 1,\n  buffered: 0,\n  quality: 'auto',\n  playbackRate: 1,\n  isFullscreen: false,\n  isPictureInPicture: false,\n  isTheaterMode: false,\n  error: null,\n  playCount: 0,\n  totalWatchTime: 0,\n  bufferingTime: 0,\n  averageBitrate: 0,\n  qualityChanges: 0,\n});\n\nexport const videoPlayerReducer = (state: VideoPlayerState, action: VideoPlayerAction): VideoPlayerState => {\n  switch (action.type) {\n    case 'ready': {\n      return state.isLoading ? { ...state, isLoading: false } : state;\n    }\n    case 'play': {\n      if (state.isPlaying && !state.isPaused) {\n        return state;\n      }\n      return {\n        ...state,\n        isPlaying: true,\n        isPaused: false,\n        error: null,\n        playCount: state.playCount + 1,\n      };\n    }\n    case 'pause': {\n      if (!state.isPlaying && state.isPaused) {\n        return state;\n      }\n      return {\n        ...state,\n        isPlaying: false,\n        isPaused: true,\n        totalWatchTime: state.totalWatchTime + action.watchTime,\n      };\n    }\n    case 'time_update': {\n      const currentTimeDelta = Math.abs(state.currentTime - action.currentTime);\n      const durationDelta = Math.abs(state.duration - action.duration);\n      if (currentTimeDelta < TIME_EPSILON && durationDelta < DURATION_EPSILON) {\n        return state;\n      }\n      return {\n        ...state,\n        currentTime: action.currentTime,\n        duration: action.duration,\n        error: action.currentTime > 0 ? null : state.error,\n      };\n    }\n    case 'progress': {\n      if (Math.abs(state.buffered - action.buffered) < BUFFER_EPSILON) {\n        return state;\n      }\n      return { ...state, buffered: action.buffered };\n    }\n    case 'volume_change': {\n      if (Math.abs(state.volume - action.volume) < VOLUME_EPSILON && state.isMuted === action.isMuted) {\n        return state;\n      }\n      return { ...state, volume: action.volume, isMuted: action.isMuted };\n    }\n    case 'quality_change': {\n      if (state.quality === action.quality) {\n        return state;\n      }\n      return {\n        ...state,\n        quality: action.quality,\n        qualityChanges: state.qualityChanges + 1,\n      };\n    }\n    case 'error': {\n      if (state.error === action.message && !state.isLoading) {\n        return state;\n      }\n      return { ...state, error: action.message, isLoading: false };\n    }\n    case 'load_start': {\n      if (state.isLoading && state.error === null) {\n        return state;\n      }\n      return { ...state, isLoading: true, error: null };\n    }\n    case 'load_end': {\n      if (!state.isLoading && action.bufferingTime <= 0) {\n        return state;\n      }\n      return {\n        ...state,\n        isLoading: false,\n        bufferingTime: state.bufferingTime + action.bufferingTime,\n      };\n    }\n    case 'fullscreen_change': {\n      return state.isFullscreen === action.isFullscreen\n        ? state\n        : { ...state, isFullscreen: action.isFullscreen };\n    }\n    case 'pip_change': {\n      return state.isPictureInPicture === action.isPictureInPicture\n        ? state\n        : { ...state, isPictureInPicture: action.isPictureInPicture };\n    }\n    case 'playback_rate_change': {\n      return state.playbackRate === action.playbackRate\n        ? state\n        : { ...state, playbackRate: action.playbackRate };\n    }\n    case 'toggle_theater_mode': {\n      return { ...state, isTheaterMode: !state.isTheaterMode };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n\nexport const calculateElapsedSeconds = (startedAt: number, now: number): number => {\n  if (startedAt <= 0) {\n    return 0;\n  }\n\n  return Math.max(0, (now - startedAt) / 1000);\n};\n\nexport const isExpectedLoadInterruption = (error: Error): boolean => {\n  const message = error.message.toLowerCase();\n  return (\n    error.name === 'AbortError' ||\n    message.includes('loadsource() aborted') ||\n    message.includes('superseded by a newer load request')\n  );\n};\n\nexport const useVideoPlayer = (\n  videoRef: React.RefObject<HTMLVideoElement | null>,\n  options: UseVideoPlayerOptions = {}\n) => {\n  const [state, dispatch] = useReducer(videoPlayerReducer, options, createInitialState);\n  const [engine, setEngine] = useState<VideoEngine | null>(null);\n  const [isEngineReady, setIsEngineReady] = useState(false);\n  const [pendingConfig, setPendingConfig] = useState<VideoEngineConfig | null>(null);\n  const [isPlayPending, setIsPlayPending] = useState(false);\n  const [qualityLevels, setQualityLevels] = useState<Array<{ id: string; label: string; height?: number }>>([]);\n  const [initialEnginePlugins] = useState<VideoEnginePlugin[] | undefined>(() => options.enginePlugins);\n\n  const lastPlayTimeRef = useRef<number>(0);\n  const bufferingStartTimeRef = useRef<number>(0);\n\n  useEffect(() => {\n    if (!videoRef.current) return;\n\n    const videoElement = videoRef.current;\n\n    const events: VideoEngineEvents = {\n      onReady: () => {\n        dispatch({ type: 'ready' });\n        setIsEngineReady(true);\n      },\n      onPlay: () => {\n        dispatch({ type: 'play' });\n        lastPlayTimeRef.current = Date.now();\n      },\n      onPause: () => {\n        const watchTime = calculateElapsedSeconds(lastPlayTimeRef.current, Date.now());\n        dispatch({ type: 'pause', watchTime });\n        lastPlayTimeRef.current = 0;\n      },\n      onTimeUpdate: (currentTime, duration) => {\n        const safeCurrentTime = Number.isFinite(currentTime) ? currentTime : 0;\n        const safeDuration = Number.isFinite(duration) ? duration : 0;\n        dispatch({ type: 'time_update', currentTime: safeCurrentTime, duration: safeDuration });\n      },\n      onProgress: (buffered) => {\n        const safeBuffered = Number.isFinite(buffered) ? buffered : 0;\n        dispatch({ type: 'progress', buffered: safeBuffered });\n      },\n      onVolumeChange: (volume, muted) => {\n        const safeVolume = Number.isFinite(volume) ? Math.max(0, Math.min(1, volume)) : 1;\n        dispatch({ type: 'volume_change', volume: safeVolume, isMuted: muted });\n      },\n      onQualityChange: (quality) => {\n        dispatch({ type: 'quality_change', quality });\n      },\n      onError: (error) => {\n        dispatch({ type: 'error', message: error.message });\n      },\n      onLoadStart: () => {\n        dispatch({ type: 'load_start' });\n        bufferingStartTimeRef.current = Date.now();\n      },\n      onLoadEnd: () => {\n        const bufferingTime = calculateElapsedSeconds(bufferingStartTimeRef.current, Date.now());\n        dispatch({ type: 'load_end', bufferingTime });\n        bufferingStartTimeRef.current = 0;\n      },\n    };\n\n    const videoEngine = new VideoEngine(videoElement, events, {\n      plugins: initialEnginePlugins,\n    });\n\n    setEngine(videoEngine);\n\n    videoEngine.initialize().catch((error) => {\n      dispatch({ type: 'error', message: error.message });\n    });\n\n    return () => {\n      videoEngine.dispose();\n    };\n  }, [videoRef, initialEnginePlugins]);\n\n  useEffect(() => {\n    if (isEngineReady && engine && pendingConfig) {\n      engine.loadSource(pendingConfig)\n        .then(() => {\n          setQualityLevels(engine.getQualityLevels());\n          setPendingConfig(null);\n        })\n        .catch((error) => {\n          if (isExpectedLoadInterruption(error as Error)) {\n            setPendingConfig(null);\n            return;\n          }\n\n          dispatch({ type: 'error', message: `Failed to load video: ${error.message}` });\n          setPendingConfig(null);\n        });\n    }\n  }, [isEngineReady, engine, pendingConfig]);\n\n  useEffect(() => {\n    if (typeof document === 'undefined') return;\n\n    const handleFullscreenChange = () => {\n      dispatch({ type: 'fullscreen_change', isFullscreen: Boolean(document.fullscreenElement) });\n    };\n\n    const handleEnterPiP = () => {\n      dispatch({ type: 'pip_change', isPictureInPicture: true });\n    };\n\n    const handleLeavePiP = () => {\n      dispatch({ type: 'pip_change', isPictureInPicture: false });\n    };\n\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n\n    if (videoRef.current) {\n      videoRef.current.addEventListener('enterpictureinpicture', handleEnterPiP);\n      videoRef.current.addEventListener('leavepictureinpicture', handleLeavePiP);\n    }\n\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n      if (videoRef.current) {\n        videoRef.current.removeEventListener('enterpictureinpicture', handleEnterPiP);\n        videoRef.current.removeEventListener('leavepictureinpicture', handleLeavePiP);\n      }\n    };\n  }, [videoRef]);\n\n  const play = useCallback(async () => {\n    if (!videoRef.current || isPlayPending) return;\n\n    try {\n      setIsPlayPending(true);\n\n      if (!videoRef.current.paused) {\n        return;\n      }\n\n      await videoRef.current.play();\n    } catch (error) {\n      const errorMessage = (error as Error).message;\n      if (\n        !errorMessage.includes('user didn\\'t interact') &&\n        !errorMessage.includes('autoplay') &&\n        !errorMessage.includes('gesture')\n      ) {\n        dispatch({ type: 'error', message: `Playback failed: ${errorMessage}` });\n      }\n    } finally {\n      setIsPlayPending(false);\n    }\n  }, [videoRef, isPlayPending]);\n\n  const pause = useCallback(() => {\n    if (!videoRef.current || isPlayPending) return;\n    if (!videoRef.current.paused) {\n      videoRef.current.pause();\n    }\n  }, [videoRef, isPlayPending]);\n\n  const seek = useCallback((time: number) => {\n    if (!videoRef.current) return;\n    videoRef.current.currentTime = time;\n  }, [videoRef]);\n\n  const setVolume = useCallback((volume: number) => {\n    if (!videoRef.current || !Number.isFinite(volume)) return;\n    videoRef.current.volume = Math.max(0, Math.min(1, volume));\n  }, [videoRef]);\n\n  const toggleMute = useCallback(() => {\n    if (!videoRef.current) return;\n    videoRef.current.muted = !videoRef.current.muted;\n  }, [videoRef]);\n\n  const toggleFullscreen = useCallback(async () => {\n    if (!videoRef.current) return;\n\n    try {\n      if (document.fullscreenElement) {\n        await document.exitFullscreen();\n      } else {\n        await videoRef.current.requestFullscreen();\n      }\n    } catch (error) {\n      dispatch({ type: 'error', message: `Fullscreen failed: ${(error as Error).message}` });\n    }\n  }, [videoRef]);\n\n  const setQuality = useCallback((qualityId: string) => {\n    if (!engine) return;\n    engine.setQuality(qualityId);\n  }, [engine]);\n\n  const setPlaybackRate = useCallback((rate: number) => {\n    if (!videoRef.current) return;\n    videoRef.current.playbackRate = rate;\n    dispatch({ type: 'playback_rate_change', playbackRate: rate });\n  }, [videoRef]);\n\n  const togglePictureInPicture = useCallback(async () => {\n    if (!videoRef.current) return;\n\n    try {\n      if (document.pictureInPictureElement) {\n        await document.exitPictureInPicture();\n      } else {\n        await videoRef.current.requestPictureInPicture();\n      }\n    } catch {\n      // no-op\n    }\n  }, [videoRef]);\n\n  const toggleTheaterMode = useCallback(() => {\n    dispatch({ type: 'toggle_theater_mode' });\n  }, []);\n\n  const load = useCallback(async (config: VideoEngineConfig) => {\n    if (!engine || !isEngineReady) {\n      setPendingConfig(config);\n      return;\n    }\n\n    try {\n      await engine.loadSource(config);\n      setQualityLevels(engine.getQualityLevels());\n    } catch (error) {\n      if (isExpectedLoadInterruption(error as Error)) {\n        return;\n      }\n      dispatch({ type: 'error', message: `Failed to load video: ${(error as Error).message}` });\n    }\n  }, [engine, isEngineReady]);\n\n  const controls: VideoPlayerControls = useMemo(() => ({\n    play,\n    pause,\n    seek,\n    setVolume,\n    toggleMute,\n    toggleFullscreen,\n    togglePictureInPicture,\n    toggleTheaterMode,\n    setPlaybackRate,\n    setQuality,\n    load,\n  }), [\n    play,\n    pause,\n    seek,\n    setVolume,\n    toggleMute,\n    toggleFullscreen,\n    togglePictureInPicture,\n    toggleTheaterMode,\n    setPlaybackRate,\n    setQuality,\n    load,\n  ]);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement) {\n        return;\n      }\n\n      switch (e.key) {\n        case ' ':\n        case 'k':\n          e.preventDefault();\n          if (state.isPlaying && !state.isPaused) {\n            controls.pause();\n          } else {\n            void controls.play();\n          }\n          break;\n        case 'ArrowLeft':\n          e.preventDefault();\n          controls.seek(Math.max(0, state.currentTime - 10));\n          break;\n        case 'ArrowRight':\n          e.preventDefault();\n          controls.seek(Math.min(state.duration, state.currentTime + 10));\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          controls.setVolume(Math.min(1, state.volume + 0.1));\n          break;\n        case 'ArrowDown':\n          e.preventDefault();\n          controls.setVolume(Math.max(0, state.volume - 0.1));\n          break;\n        case 'm':\n          e.preventDefault();\n          controls.toggleMute();\n          break;\n        case 'f':\n          e.preventDefault();\n          void controls.toggleFullscreen();\n          break;\n        case '0':\n        case '1':\n        case '2':\n        case '3':\n        case '4':\n        case '5':\n        case '6':\n        case '7':\n        case '8':\n        case '9': {\n          e.preventDefault();\n          const percentage = Number.parseInt(e.key, 10) / 10;\n          controls.seek(state.duration * percentage);\n          break;\n        }\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, [state.isPlaying, state.isPaused, state.currentTime, state.duration, state.volume, controls]);\n\n  return {\n    state,\n    controls,\n    qualityLevels,\n    engine,\n  };\n};\n","import type { AdapterSelectionContext, StreamingAdapterFactory } from '@/core/adapters/types';\n\nexport class AdapterRegistry {\n  private readonly factories: StreamingAdapterFactory[] = [];\n\n  register(factory: StreamingAdapterFactory): void {\n    const existingIndex = this.factories.findIndex((candidate) => candidate.id === factory.id);\n    if (existingIndex >= 0) {\n      this.factories.splice(existingIndex, 1);\n    }\n\n    this.factories.push(factory);\n    this.factories.sort((a, b) => b.priority - a.priority);\n  }\n\n  resolve(context: AdapterSelectionContext): StreamingAdapterFactory | undefined {\n    return this.factories.find((factory) => factory.canHandle(context));\n  }\n\n  list(): readonly StreamingAdapterFactory[] {\n    return this.factories;\n  }\n}\n","import type { AdapterLoadContext, QualityLevel, StreamingAdapter } from '@/core/adapters/types';\n\ninterface DashBitrateInfo {\n  bitrate?: number;\n  height?: number;\n}\n\ninterface DashPlayer {\n  initialize(videoElement: HTMLVideoElement, src: string, autoplay: boolean): void;\n  on(eventName: string, callback: (payload: unknown) => void): void;\n  reset(): void;\n  getBitrateInfoListFor(type: 'video'): DashBitrateInfo[];\n  setQualityFor(type: 'video', qualityIndex: number): void;\n}\n\ninterface DashModule {\n  MediaPlayer: {\n    (): {\n      create(): DashPlayer;\n    };\n  };\n}\n\nclass DashJsAdapter implements StreamingAdapter {\n  readonly id = 'dashjs';\n  private instance?: DashPlayer;\n\n  async load(context: AdapterLoadContext): Promise<void> {\n    this.assertNotAborted(context.signal);\n    const dashjs = (await import('dashjs')) as unknown as DashModule;\n    this.assertNotAborted(context.signal);\n\n    this.instance = dashjs.MediaPlayer().create();\n\n    await this.runWithAbortSignal(\n      new Promise<void>((resolve, reject) => {\n        const dash = this.instance as DashPlayer;\n\n        dash.on('streamInitialized', () => {\n          resolve();\n        });\n\n        dash.on('error', (errorPayload) => {\n          const errorValue = (errorPayload as { error?: string })?.error;\n          reject(new Error(`Dash.js error: ${errorValue ?? 'unknown'}`));\n        });\n\n        dash.initialize(context.videoElement, context.src, false);\n      }),\n      context.signal,\n      () => {\n        this.instance?.reset();\n      }\n    );\n  }\n\n  destroy(): void {\n    this.instance?.reset();\n    this.instance = undefined;\n  }\n\n  getQualityLevels(): QualityLevel[] {\n    if (!this.instance) {\n      return [];\n    }\n\n    try {\n      const bitrateInfo = this.instance.getBitrateInfoListFor('video');\n      return bitrateInfo.map((info, index) => ({\n        id: String(index),\n        label: info.height ? `${info.height}p` : `${Math.round((info.bitrate ?? 0) / 1000)}k`,\n        height: info.height,\n      }));\n    } catch {\n      return [];\n    }\n  }\n\n  setQuality(qualityId: string): void {\n    if (!this.instance) {\n      return;\n    }\n\n    this.instance.setQualityFor('video', Number.parseInt(qualityId, 10));\n  }\n\n  private assertNotAborted(signal?: AbortSignal): void {\n    if (signal?.aborted) {\n      throw this.createAbortError();\n    }\n  }\n\n  private createAbortError(): Error {\n    const error = new Error('DashJsAdapter.load() aborted');\n    error.name = 'AbortError';\n    return error;\n  }\n\n  private runWithAbortSignal<T>(\n    task: Promise<T>,\n    signal: AbortSignal | undefined,\n    onAbort?: () => void\n  ): Promise<T> {\n    if (!signal) {\n      return task;\n    }\n\n    if (signal.aborted) {\n      onAbort?.();\n      return Promise.reject(this.createAbortError());\n    }\n\n    return new Promise<T>((resolve, reject) => {\n      const cleanup = () => {\n        signal.removeEventListener('abort', handleAbort);\n      };\n\n      const handleAbort = () => {\n        cleanup();\n        onAbort?.();\n        reject(this.createAbortError());\n      };\n\n      signal.addEventListener('abort', handleAbort, { once: true });\n\n      task.then(\n        (value) => {\n          cleanup();\n          resolve(value);\n        },\n        (error) => {\n          cleanup();\n          reject(error);\n        }\n      );\n    });\n  }\n}\n\nexport const createDashJsAdapter = (): StreamingAdapter => {\n  return new DashJsAdapter();\n};\n","/**\n * Browser and device compatibility utilities\n * Detects HLS support, device capabilities, and autoplay policies\n */\n\nexport interface BrowserCapabilities {\n  hasNativeHls: boolean;\n  hasHlsJs: boolean;\n  hasDashJs: boolean;\n  isMobile: boolean;\n  isIOS: boolean;\n  isAndroid: boolean;\n  supportsInlinePlayback: boolean;\n  supportsAutoplay: boolean;\n  supportsPictureInPicture: boolean;\n}\n\n/**\n * Check if browser supports native HLS playback\n */\nexport const hasNativeHlsSupport = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  \n  const video = document.createElement('video');\n  return video.canPlayType('application/vnd.apple.mpegurl') !== '';\n};\n\n/**\n * Check if HLS.js is supported in current browser\n */\nexport const hasHlsJsSupport = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  \n  try {\n    // Check if MediaSource API is supported (required for HLS.js)\n    return !!(window.MediaSource || (window as unknown as { WebKitMediaSource?: unknown }).WebKitMediaSource);\n  } catch {\n    return false;\n  }\n};\n\n/**\n * Check if Dash.js is supported in current browser\n */\nexport const hasDashJsSupport = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  \n  try {\n    // Check if MediaSource API is supported (required for Dash.js)\n    return !!(window.MediaSource || (window as unknown as { WebKitMediaSource?: unknown }).WebKitMediaSource);\n  } catch {\n    return false;\n  }\n};\n\n/**\n * Detect if device is mobile\n */\nexport const isMobileDevice = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  \n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n    navigator.userAgent\n  );\n};\n\n/**\n * Detect iOS devices\n */\nexport const isIOSDevice = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  \n  return /iPad|iPhone|iPod/.test(navigator.userAgent);\n};\n\n/**\n * Detect Android devices\n */\nexport const isAndroidDevice = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  \n  return /Android/.test(navigator.userAgent);\n};\n\n/**\n * Check if browser supports Picture-in-Picture\n */\nexport const supportsPictureInPicture = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  \n  return 'pictureInPictureEnabled' in document;\n};\n\n/**\n * Check if browser likely supports autoplay\n * This is a best-guess, actual autoplay depends on user interaction and browser policies\n */\nexport const supportsAutoplay = async (): Promise<boolean> => {\n  if (typeof window === 'undefined') return false;\n  \n  try {\n    const video = document.createElement('video');\n    video.muted = true;\n    video.src = 'data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAA==';\n    \n    const promise = video.play();\n    if (promise) {\n      await promise;\n      video.pause();\n      return true;\n    }\n    return false;\n  } catch {\n    return false;\n  }\n};\n\n/**\n * Get comprehensive browser capabilities\n */\n/**\n * Check if a video format is supported by the browser\n * This function is safe for SSR environments\n */\nexport const isVideoFormatSupported = (url: string): boolean => {\n  // Return true during SSR to avoid hydration mismatches\n  if (typeof window === 'undefined' || typeof document === 'undefined') {\n    return true;\n  }\n\n  const video = document.createElement('video');\n  \n  // Extract file extension\n  const extension = url.split('.').pop()?.toLowerCase().split('?')[0];\n  \n  switch (extension) {\n    case 'mp4':\n      return video.canPlayType('video/mp4') !== '';\n    case 'webm':\n      return video.canPlayType('video/webm') !== '' || \n             video.canPlayType('video/webm; codecs=\"vp8\"') !== '' ||\n             video.canPlayType('video/webm; codecs=\"vp9\"') !== '';\n    case 'ogg':\n      return video.canPlayType('video/ogg') !== '';\n    case 'avi':\n      return false; // AVI is generally not supported in browsers\n    case 'mov':\n      return video.canPlayType('video/quicktime') !== '';\n    default:\n      return true; // Assume supported for unknown formats\n  }\n};\n\nexport const getBrowserCapabilities = async (): Promise<BrowserCapabilities> => {\n  const capabilities: BrowserCapabilities = {\n    hasNativeHls: hasNativeHlsSupport(),\n    hasHlsJs: hasHlsJsSupport(),\n    hasDashJs: hasDashJsSupport(),\n    isMobile: isMobileDevice(),\n    isIOS: isIOSDevice(),\n    isAndroid: isAndroidDevice(),\n    supportsInlinePlayback: true, // Most modern browsers support this\n    supportsAutoplay: await supportsAutoplay(),\n    supportsPictureInPicture: supportsPictureInPicture(),\n  };\n\n  return capabilities;\n};\n\n/**\n * Get optimal streaming strategy based on browser capabilities\n */\nexport const getStreamingStrategy = (\n  capabilities: BrowserCapabilities,\n  streamUrl: string\n): 'native' | 'hlsjs' | 'dashjs' | 'direct' | 'unsupported' => {\n  const normalizedPath = (() => {\n    try {\n      return new URL(streamUrl, 'https://localhost').pathname.toLowerCase();\n    } catch {\n      return streamUrl.toLowerCase();\n    }\n  })();\n\n  const isHlsUrl = /\\.m3u8$/i.test(normalizedPath);\n  const isDashUrl = /\\.mpd$/i.test(normalizedPath);\n  const isDirectVideo = /\\.(mp4|webm|ogg|avi|mov)$/i.test(normalizedPath);\n\n  if (isHlsUrl) {\n    if (capabilities.hasNativeHls && capabilities.isIOS) {\n      return 'native';\n    }\n    if (capabilities.hasHlsJs) {\n      return 'hlsjs';\n    }\n  }\n\n  if (isDashUrl && capabilities.hasDashJs) {\n    return 'dashjs';\n  }\n\n  // For direct video files (MP4, WebM, etc.)\n  if (isDirectVideo) {\n    // Check if the browser supports this video format\n    const isSupported = isVideoFormatSupported(streamUrl);\n    \n    if (isSupported) {\n      return 'direct';\n    }\n\n    return 'unsupported';\n  }\n\n  return 'unsupported';\n};\n","import { isVideoFormatSupported } from '@/core/compatibility';\nimport type { AdapterLoadContext, StreamingAdapter } from '@/core/adapters/types';\n\nclass DirectVideoAdapter implements StreamingAdapter {\n  readonly id = 'direct';\n\n  async load(context: AdapterLoadContext): Promise<void> {\n    const { videoElement, src, signal } = context;\n\n    if (!isVideoFormatSupported(src)) {\n      throw new Error('Video format not supported by this browser');\n    }\n\n    this.assertNotAborted(signal);\n    videoElement.src = src;\n\n    await new Promise<void>((resolve, reject) => {\n      const abortError = this.createAbortError();\n      const timeout = window.setTimeout(() => {\n        cleanup();\n        reject(new Error('Video loading timeout (30s)'));\n      }, 30000);\n\n      const onLoadedData = () => {\n        cleanup();\n        resolve();\n      };\n\n      const onError = () => {\n        const error = videoElement.error;\n        const message = error?.message || 'Failed to load direct video file';\n        cleanup();\n        reject(new Error(message));\n      };\n\n      const onAbort = () => {\n        cleanup();\n        reject(abortError);\n      };\n\n      const cleanup = () => {\n        window.clearTimeout(timeout);\n        videoElement.removeEventListener('loadeddata', onLoadedData);\n        videoElement.removeEventListener('error', onError);\n        signal?.removeEventListener('abort', onAbort);\n      };\n\n      if (signal?.aborted) {\n        cleanup();\n        reject(abortError);\n        return;\n      }\n\n      videoElement.addEventListener('loadeddata', onLoadedData);\n      videoElement.addEventListener('error', onError);\n      signal?.addEventListener('abort', onAbort, { once: true });\n      videoElement.load();\n    });\n  }\n\n  destroy(): void {\n    // Direct video playback does not have extra runtime resources.\n  }\n\n  getQualityLevels() {\n    return [];\n  }\n\n  setQuality(): void {\n    // Direct source quality selection is not supported.\n  }\n\n  private assertNotAborted(signal?: AbortSignal): void {\n    if (signal?.aborted) {\n      throw this.createAbortError();\n    }\n  }\n\n  private createAbortError(): Error {\n    const error = new Error('DirectVideoAdapter.load() aborted');\n    error.name = 'AbortError';\n    return error;\n  }\n}\n\nexport const createDirectVideoAdapter = (): StreamingAdapter => {\n  return new DirectVideoAdapter();\n};\n","import type { AdapterLoadContext, QualityLevel, StreamingAdapter } from '@/core/adapters/types';\n\ninterface HlsLevel {\n  height?: number;\n}\n\ninterface HlsInstance {\n  levels: HlsLevel[];\n  currentLevel: number;\n  loadSource(src: string): void;\n  attachMedia(video: HTMLVideoElement): void;\n  destroy(): void;\n  on(eventName: string, callback: (event: unknown, data: unknown) => void): void;\n}\n\ninterface HlsStatic {\n  isSupported(): boolean;\n  Events: {\n    MANIFEST_PARSED: string;\n    ERROR: string;\n    LEVEL_SWITCHED: string;\n  };\n  new (options: { enableWorker: boolean; lowLatencyMode: boolean; backBufferLength: number }): HlsInstance;\n}\n\nclass HlsJsAdapter implements StreamingAdapter {\n  readonly id = 'hlsjs';\n  private instance?: HlsInstance;\n\n  async load(context: AdapterLoadContext): Promise<void> {\n    this.assertNotAborted(context.signal);\n    const { default: Hls } = (await import('hls.js')) as { default: HlsStatic };\n    this.assertNotAborted(context.signal);\n\n    if (!Hls.isSupported()) {\n      throw new Error('HLS.js is not supported in this browser');\n    }\n\n    this.instance = new Hls({\n      enableWorker: true,\n      lowLatencyMode: false,\n      backBufferLength: 90,\n    });\n\n    await this.runWithAbortSignal(\n      new Promise<void>((resolve, reject) => {\n        const hls = this.instance as HlsInstance;\n\n        hls.on(Hls.Events.MANIFEST_PARSED, () => {\n          resolve();\n        });\n\n        hls.on(Hls.Events.ERROR, (_event, data) => {\n          const maybeFatal = (data as { fatal?: boolean; type?: string; details?: string }) || {};\n          if (maybeFatal.fatal) {\n            reject(new Error(`HLS.js fatal error: ${maybeFatal.type ?? 'unknown'} - ${maybeFatal.details ?? 'unknown'}`));\n          }\n        });\n\n        hls.on(Hls.Events.LEVEL_SWITCHED, (_event, data) => {\n          const levelIndex = (data as { level?: number })?.level;\n          if (levelIndex === undefined) {\n            return;\n          }\n\n          const level = hls.levels[levelIndex];\n          context.onQualityChange?.(level?.height ? `${level.height}p` : 'auto');\n        });\n\n        hls.loadSource(context.src);\n        hls.attachMedia(context.videoElement);\n      }),\n      context.signal,\n      () => {\n        this.instance?.destroy();\n      }\n    );\n  }\n\n  destroy(): void {\n    this.instance?.destroy();\n    this.instance = undefined;\n  }\n\n  getQualityLevels(): QualityLevel[] {\n    if (!this.instance) {\n      return [];\n    }\n\n    return this.instance.levels.map((level, index) => ({\n      id: String(index),\n      label: level.height ? `${level.height}p` : `Level ${index}`,\n      height: level.height,\n    }));\n  }\n\n  setQuality(qualityId: string): void {\n    if (!this.instance) {\n      return;\n    }\n\n    this.instance.currentLevel = Number.parseInt(qualityId, 10);\n  }\n\n  private assertNotAborted(signal?: AbortSignal): void {\n    if (signal?.aborted) {\n      throw this.createAbortError();\n    }\n  }\n\n  private createAbortError(): Error {\n    const error = new Error('HlsJsAdapter.load() aborted');\n    error.name = 'AbortError';\n    return error;\n  }\n\n  private runWithAbortSignal<T>(\n    task: Promise<T>,\n    signal: AbortSignal | undefined,\n    onAbort?: () => void\n  ): Promise<T> {\n    if (!signal) {\n      return task;\n    }\n\n    if (signal.aborted) {\n      onAbort?.();\n      return Promise.reject(this.createAbortError());\n    }\n\n    return new Promise<T>((resolve, reject) => {\n      const cleanup = () => {\n        signal.removeEventListener('abort', handleAbort);\n      };\n\n      const handleAbort = () => {\n        cleanup();\n        onAbort?.();\n        reject(this.createAbortError());\n      };\n\n      signal.addEventListener('abort', handleAbort, { once: true });\n\n      task.then(\n        (value) => {\n          cleanup();\n          resolve(value);\n        },\n        (error) => {\n          cleanup();\n          reject(error);\n        }\n      );\n    });\n  }\n}\n\nexport const createHlsJsAdapter = (): StreamingAdapter => {\n  return new HlsJsAdapter();\n};\n","import type { AdapterLoadContext, StreamingAdapter } from '@/core/adapters/types';\n\nclass NativeHlsAdapter implements StreamingAdapter {\n  readonly id = 'native';\n\n  async load(context: AdapterLoadContext): Promise<void> {\n    const { videoElement, src, signal } = context;\n    this.assertNotAborted(signal);\n    videoElement.src = src;\n\n    await new Promise<void>((resolve, reject) => {\n      const abortError = this.createAbortError();\n\n      const onLoadedData = () => {\n        cleanup();\n        resolve();\n      };\n\n      const onError = () => {\n        cleanup();\n        reject(new Error('Failed to load native HLS stream'));\n      };\n\n      const onAbort = () => {\n        cleanup();\n        reject(abortError);\n      };\n\n      const cleanup = () => {\n        videoElement.removeEventListener('loadeddata', onLoadedData);\n        videoElement.removeEventListener('error', onError);\n        signal?.removeEventListener('abort', onAbort);\n      };\n\n      if (signal?.aborted) {\n        cleanup();\n        reject(abortError);\n        return;\n      }\n\n      videoElement.addEventListener('loadeddata', onLoadedData);\n      videoElement.addEventListener('error', onError);\n      signal?.addEventListener('abort', onAbort, { once: true });\n    });\n  }\n\n  destroy(): void {\n    // Native playback does not have extra runtime resources.\n  }\n\n  getQualityLevels() {\n    return [];\n  }\n\n  setQuality(): void {\n    // Native HLS quality is browser-managed.\n  }\n\n  private assertNotAborted(signal?: AbortSignal): void {\n    if (signal?.aborted) {\n      throw this.createAbortError();\n    }\n  }\n\n  private createAbortError(): Error {\n    const error = new Error('NativeHlsAdapter.load() aborted');\n    error.name = 'AbortError';\n    return error;\n  }\n}\n\nexport const createNativeHlsAdapter = (): StreamingAdapter => {\n  return new NativeHlsAdapter();\n};\n","import { createDashJsAdapter } from '@/core/adapters/dashjs-adapter';\nimport { createDirectVideoAdapter } from '@/core/adapters/direct-video-adapter';\nimport { createHlsJsAdapter } from '@/core/adapters/hlsjs-adapter';\nimport { createNativeHlsAdapter } from '@/core/adapters/native-hls-adapter';\nimport type { AdapterSelectionContext, StreamingAdapterFactory } from '@/core/adapters/types';\n\nconst getNormalizedPath = (src: string): string => {\n  try {\n    return new URL(src, 'https://localhost').pathname.toLowerCase();\n  } catch {\n    return src.toLowerCase();\n  }\n};\n\nconst isHls = (src: string) => /\\.m3u8$/i.test(getNormalizedPath(src));\nconst isDash = (src: string) => /\\.mpd$/i.test(getNormalizedPath(src));\nconst isDirect = (src: string) => /\\.(mp4|webm|ogg|avi|mov)$/i.test(getNormalizedPath(src));\n\nexport const defaultStreamingAdapters: StreamingAdapterFactory[] = [\n  {\n    id: 'native',\n    priority: 100,\n    canHandle: ({ src, capabilities }: AdapterSelectionContext) => {\n      return isHls(src) && capabilities.hasNativeHls && capabilities.isIOS;\n    },\n    create: createNativeHlsAdapter,\n  },\n  {\n    id: 'hlsjs',\n    priority: 90,\n    canHandle: ({ src, capabilities }: AdapterSelectionContext) => {\n      return isHls(src) && capabilities.hasHlsJs;\n    },\n    create: createHlsJsAdapter,\n  },\n  {\n    id: 'dashjs',\n    priority: 80,\n    canHandle: ({ src, capabilities }: AdapterSelectionContext) => {\n      return isDash(src) && capabilities.hasDashJs;\n    },\n    create: createDashJsAdapter,\n  },\n  {\n    id: 'direct',\n    priority: 70,\n    canHandle: ({ src }: AdapterSelectionContext) => {\n      return isDirect(src);\n    },\n    create: createDirectVideoAdapter,\n  },\n];\n","export interface PlayerLogger {\n  debug: (...args: unknown[]) => void;\n  info: (...args: unknown[]) => void;\n  warn: (...args: unknown[]) => void;\n  error: (...args: unknown[]) => void;\n}\n\nexport interface ConsoleLoggerOptions {\n  debug?: boolean;\n  info?: boolean;\n  warn?: boolean;\n  error?: boolean;\n}\n\nconst noop = () => undefined;\n\nconst defaultLogger: PlayerLogger = {\n  debug: noop,\n  info: noop,\n  warn: (...args: unknown[]) => {\n    if (typeof console !== 'undefined') {\n      console.warn(...args);\n    }\n  },\n  error: (...args: unknown[]) => {\n    if (typeof console !== 'undefined') {\n      console.error(...args);\n    }\n  },\n};\n\nlet activeLogger: PlayerLogger = defaultLogger;\n\nexport const createConsoleLogger = (options: ConsoleLoggerOptions = {}): PlayerLogger => {\n  const {\n    debug = false,\n    info = false,\n    warn = true,\n    error = true,\n  } = options;\n\n  return {\n    debug: (...args: unknown[]) => {\n      if (debug && typeof console !== 'undefined') {\n        console.debug(...args);\n      }\n    },\n    info: (...args: unknown[]) => {\n      if (info && typeof console !== 'undefined') {\n        console.info(...args);\n      }\n    },\n    warn: (...args: unknown[]) => {\n      if (warn && typeof console !== 'undefined') {\n        console.warn(...args);\n      }\n    },\n    error: (...args: unknown[]) => {\n      if (error && typeof console !== 'undefined') {\n        console.error(...args);\n      }\n    },\n  };\n};\n\nexport const setPlayerLogger = (logger: Partial<PlayerLogger> | null): void => {\n  if (!logger) {\n    activeLogger = defaultLogger;\n    return;\n  }\n\n  activeLogger = {\n    debug: logger.debug ?? defaultLogger.debug,\n    info: logger.info ?? defaultLogger.info,\n    warn: logger.warn ?? defaultLogger.warn,\n    error: logger.error ?? defaultLogger.error,\n  };\n};\n\nexport const getPlayerLogger = (): PlayerLogger => activeLogger;\n","import type { DrmConfiguration, DrmSystemConfiguration } from '@/core/drm/types';\nimport { getPlayerLogger } from '@/lib/logger';\n\nexport interface EmeEnvironment {\n  requestMediaKeySystemAccess: (\n    keySystem: string,\n    configurations: MediaKeySystemConfiguration[]\n  ) => Promise<MediaKeySystemAccess>;\n  fetch: (input: RequestInfo | URL, init?: RequestInit) => Promise<Response>;\n}\n\nexport interface EmeController {\n  keySystem: string;\n  destroy: () => void;\n}\n\nconst resolveEnvironment = (environment?: Partial<EmeEnvironment>): EmeEnvironment => {\n  const requestMediaKeySystemAccess =\n    environment?.requestMediaKeySystemAccess ??\n    (typeof navigator !== 'undefined' ? navigator.requestMediaKeySystemAccess?.bind(navigator) : undefined);\n\n  if (!requestMediaKeySystemAccess) {\n    throw new Error('Encrypted Media Extensions are not supported in this environment.');\n  }\n\n  const fetchFn = environment?.fetch ?? fetch;\n\n  return {\n    requestMediaKeySystemAccess,\n    fetch: fetchFn,\n  };\n};\n\nexport const isEmeSupported = (environment?: Partial<EmeEnvironment>): boolean => {\n  if (environment?.requestMediaKeySystemAccess) {\n    return true;\n  }\n\n  return typeof navigator !== 'undefined' && typeof navigator.requestMediaKeySystemAccess === 'function';\n};\n\nconst buildKeySystemConfiguration = (system: DrmSystemConfiguration): MediaKeySystemConfiguration => {\n  return {\n    initDataTypes: system.initDataTypes ?? ['cenc'],\n    audioCapabilities: system.audioCapabilities ?? [{ contentType: 'audio/mp4; codecs=\"mp4a.40.2\"' }],\n    videoCapabilities: system.videoCapabilities ?? [{ contentType: 'video/mp4; codecs=\"avc1.42E01E\"' }],\n    persistentState: system.persistentState ?? 'optional',\n    distinctiveIdentifier: system.distinctiveIdentifier ?? 'optional',\n    sessionTypes: system.sessionTypes ?? ['temporary'],\n  };\n};\n\nconst withTimeout = async <T>(\n  timeoutMs: number,\n  run: (signal: AbortSignal) => Promise<T>\n): Promise<T> => {\n  const controller = new AbortController();\n  const timeoutId = globalThis.setTimeout(() => {\n    controller.abort();\n  }, timeoutMs);\n\n  try {\n    return await run(controller.signal);\n  } finally {\n    globalThis.clearTimeout(timeoutId);\n  }\n};\n\nconst requestKeySystemAccess = async (\n  systems: DrmSystemConfiguration[],\n  environment: EmeEnvironment\n): Promise<{ access: MediaKeySystemAccess; system: DrmSystemConfiguration }> => {\n  const errors: Error[] = [];\n\n  for (const system of systems) {\n    try {\n      const access = await environment.requestMediaKeySystemAccess(system.keySystem, [\n        buildKeySystemConfiguration(system),\n      ]);\n      return { access, system };\n    } catch (error) {\n      errors.push(error as Error);\n    }\n  }\n\n  const lastError = errors[errors.length - 1];\n  throw new Error(`No configured DRM key system is supported. ${lastError ? `Last error: ${lastError.message}` : ''}`.trim());\n};\n\nexport const createEmeController = async (\n  videoElement: HTMLVideoElement,\n  configuration: DrmConfiguration,\n  environment?: Partial<EmeEnvironment>\n): Promise<EmeController> => {\n  if (!configuration.enabled) {\n    throw new Error('DRM configuration is disabled.');\n  }\n\n  if (!configuration.systems || configuration.systems.length === 0) {\n    throw new Error('DRM requires at least one key system configuration.');\n  }\n\n  const emeEnvironment = resolveEnvironment(environment);\n  const requestTimeoutMs = configuration.requestTimeoutMs ?? 15000;\n  const { access, system } = await requestKeySystemAccess(configuration.systems, emeEnvironment);\n  const mediaKeys = await access.createMediaKeys();\n\n  const onEncrypted = async (event: Event): Promise<void> => {\n    const encryptedEvent = event as MediaEncryptedEvent;\n\n    if (!encryptedEvent.initData) {\n      return;\n    }\n\n    const session = mediaKeys.createSession('temporary');\n\n    session.addEventListener('message', (sessionEvent: Event) => {\n      void (async () => {\n        const messageEvent = sessionEvent as MediaKeyMessageEvent;\n\n        if (!system.licenseServerUrl) {\n          throw new Error(`Missing licenseServerUrl for key system ${system.keySystem}`);\n        }\n\n        const license = await withTimeout(requestTimeoutMs, async (signal) => {\n          if (configuration.licenseRequestHandler) {\n            return configuration.licenseRequestHandler({\n              keySystem: system.keySystem,\n              licenseServerUrl: system.licenseServerUrl as string,\n              headers: system.headers ?? {},\n              message: messageEvent.message,\n              session,\n              signal,\n            });\n          }\n\n          const response = await emeEnvironment.fetch(system.licenseServerUrl as string, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/octet-stream',\n              ...(system.headers ?? {}),\n            },\n            body: messageEvent.message,\n            signal,\n          });\n\n          if (!response.ok) {\n            throw new Error(`License request failed with status ${response.status}`);\n          }\n\n          return response.arrayBuffer();\n        });\n\n        await session.update(license);\n      })().catch((error) => {\n        getPlayerLogger().warn('EME license exchange failed:', error);\n      });\n    });\n\n    await session.generateRequest(encryptedEvent.initDataType, encryptedEvent.initData);\n  };\n\n  await videoElement.setMediaKeys(mediaKeys);\n  videoElement.addEventListener('encrypted', onEncrypted as EventListener);\n\n  return {\n    keySystem: access.keySystem,\n    destroy: () => {\n      videoElement.removeEventListener('encrypted', onEncrypted as EventListener);\n      void videoElement.setMediaKeys(null).catch(() => undefined);\n    },\n  };\n};\n","import type {\n  VideoEnginePluginFailoverPayload,\n  VideoEnginePlugin,\n  VideoEnginePluginContext,\n  VideoEnginePluginErrorPayload,\n  VideoEnginePluginLoadPayload,\n  VideoEnginePluginRetryPayload,\n  VideoEnginePluginSourceLoadFailedPayload,\n  VideoEnginePluginTimeUpdatePayload,\n  VideoEnginePluginVolumePayload,\n} from '@/core/plugins/types';\nimport { getPlayerLogger } from '@/lib/logger';\n\nexport class VideoEnginePluginManager {\n  private readonly plugins: VideoEnginePlugin[];\n\n  constructor(plugins: VideoEnginePlugin[] = []) {\n    this.plugins = plugins;\n  }\n\n  setup(context: VideoEnginePluginContext): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'setup', () => plugin.setup?.(context));\n    }\n  }\n\n  onInit(): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onInit', () => plugin.onInit?.());\n    }\n  }\n\n  onSourceLoadStart(payload: VideoEnginePluginLoadPayload): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onSourceLoadStart', () => plugin.onSourceLoadStart?.(payload));\n    }\n  }\n\n  onSourceLoaded(payload: VideoEnginePluginLoadPayload): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onSourceLoaded', () => plugin.onSourceLoaded?.(payload));\n    }\n  }\n\n  onSourceLoadFailed(payload: VideoEnginePluginSourceLoadFailedPayload): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onSourceLoadFailed', () => plugin.onSourceLoadFailed?.(payload));\n    }\n  }\n\n  onRetry(payload: VideoEnginePluginRetryPayload): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onRetry', () => plugin.onRetry?.(payload));\n    }\n  }\n\n  onFailover(payload: VideoEnginePluginFailoverPayload): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onFailover', () => plugin.onFailover?.(payload));\n    }\n  }\n\n  onPlay(): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onPlay', () => plugin.onPlay?.());\n    }\n  }\n\n  onPause(): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onPause', () => plugin.onPause?.());\n    }\n  }\n\n  onTimeUpdate(payload: VideoEnginePluginTimeUpdatePayload): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onTimeUpdate', () => plugin.onTimeUpdate?.(payload));\n    }\n  }\n\n  onVolumeChange(payload: VideoEnginePluginVolumePayload): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onVolumeChange', () => plugin.onVolumeChange?.(payload));\n    }\n  }\n\n  onQualityChange(quality: string): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onQualityChange', () => plugin.onQualityChange?.(quality));\n    }\n  }\n\n  onError(payload: VideoEnginePluginErrorPayload): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onError', () => plugin.onError?.(payload));\n    }\n  }\n\n  dispose(): void {\n    for (const plugin of this.plugins) {\n      this.safeRun(plugin.name, 'onDispose', () => plugin.onDispose?.());\n    }\n  }\n\n  private safeRun(pluginName: string, lifecycle: string, run: () => void): void {\n    try {\n      run();\n    } catch (error) {\n      getPlayerLogger().warn(`Plugin ${pluginName} failed during ${lifecycle}:`, error);\n    }\n  }\n}\n","/**\n * Core video engine that handles different streaming protocols\n * Supports pluggable adapters and plugin lifecycle hooks.\n */\n\nimport { AdapterRegistry } from '@/core/adapters/adapter-registry';\nimport { defaultStreamingAdapters } from '@/core/adapters/default-adapters';\nimport type { QualityLevel, StreamingAdapter, StreamingAdapterFactory } from '@/core/adapters/types';\nimport { getBrowserCapabilities, type BrowserCapabilities } from '@/core/compatibility';\nimport { createEmeController, type EmeController, type EmeEnvironment } from '@/core/drm/eme-controller';\nimport type { DrmConfiguration } from '@/core/drm/types';\nimport { VideoEnginePluginManager } from '@/core/plugins/plugin-manager';\nimport type { VideoEnginePlugin } from '@/core/plugins/types';\n\nexport interface VideoEngineConfig {\n  src: string;\n  fallbackSources?: string[];\n  signal?: AbortSignal;\n  retryPolicy?: {\n    maxRetries?: number;\n    retryDelayMs?: number;\n    maxRetryDelayMs?: number;\n    backoffMultiplier?: number;\n    jitterRatio?: number;\n    retryOn?: Array<'network' | 'timeout' | 'server' | 'unsupported' | 'unknown' | 'all'>;\n  };\n  drm?: DrmConfiguration;\n  autoplay?: boolean;\n  muted?: boolean;\n  loop?: boolean;\n  poster?: string;\n  playsInline?: boolean;\n}\n\nexport interface VideoEngineEvents {\n  onReady: () => void;\n  onPlay: () => void;\n  onPause: () => void;\n  onTimeUpdate: (currentTime: number, duration: number) => void;\n  onProgress: (buffered: number) => void;\n  onVolumeChange: (volume: number, muted: boolean) => void;\n  onQualityChange: (quality: string) => void;\n  onError: (error: Error) => void;\n  onLoadStart: () => void;\n  onLoadEnd: () => void;\n}\n\nexport interface VideoEngineOptions {\n  plugins?: VideoEnginePlugin[];\n  adapters?: StreamingAdapterFactory[];\n  capabilitiesResolver?: () => Promise<BrowserCapabilities>;\n  emeEnvironment?: Partial<EmeEnvironment>;\n}\n\nexport class VideoEngine {\n  private readonly videoElement: HTMLVideoElement;\n  private readonly events: Partial<VideoEngineEvents>;\n  private readonly adapterRegistry: AdapterRegistry;\n  private readonly pluginManager: VideoEnginePluginManager;\n  private readonly resolveCapabilities: () => Promise<BrowserCapabilities>;\n  private readonly emeEnvironment?: Partial<EmeEnvironment>;\n\n  private activeAdapter?: StreamingAdapter;\n  private activeEmeController?: EmeController;\n  private capabilities?: BrowserCapabilities;\n  private currentStrategy?: string;\n  private currentSource?: string;\n  private isDisposed = false;\n  private initializationPromise?: Promise<void>;\n  private loadRequestId = 0;\n  private timeUpdateFrameId: number | null = null;\n  private progressFrameId: number | null = null;\n  private lastEmittedCurrentTime = -1;\n  private lastEmittedDuration = -1;\n  private lastEmittedBuffered = -1;\n\n  private readonly onPlayListener = () => {\n    this.events.onPlay?.();\n    this.pluginManager.onPlay();\n  };\n\n  private readonly onPauseListener = () => {\n    this.events.onPause?.();\n    this.pluginManager.onPause();\n  };\n\n  private readonly onTimeUpdateListener = () => {\n    if (this.timeUpdateFrameId !== null || this.isDisposed) {\n      return;\n    }\n\n    this.timeUpdateFrameId = this.requestFrame(() => {\n      this.timeUpdateFrameId = null;\n      if (this.isDisposed) {\n        return;\n      }\n\n      const currentTime = this.videoElement.currentTime;\n      const duration = this.videoElement.duration || 0;\n      const currentTimeDelta = Math.abs(currentTime - this.lastEmittedCurrentTime);\n      const durationDelta = Math.abs(duration - this.lastEmittedDuration);\n\n      if (currentTimeDelta < 0.05 && durationDelta < 0.01) {\n        return;\n      }\n\n      this.lastEmittedCurrentTime = currentTime;\n      this.lastEmittedDuration = duration;\n      this.events.onTimeUpdate?.(currentTime, duration);\n      this.pluginManager.onTimeUpdate({ currentTime, duration });\n    });\n  };\n\n  private readonly onProgressListener = () => {\n    if (this.progressFrameId !== null || this.isDisposed) {\n      return;\n    }\n\n    this.progressFrameId = this.requestFrame(() => {\n      this.progressFrameId = null;\n      if (this.isDisposed) {\n        return;\n      }\n\n      const buffered = this.getBufferedPercentage();\n      if (Math.abs(buffered - this.lastEmittedBuffered) < 0.25) {\n        return;\n      }\n\n      this.lastEmittedBuffered = buffered;\n      this.events.onProgress?.(buffered);\n    });\n  };\n\n  private readonly onVolumeChangeListener = () => {\n    const volume = this.videoElement.volume;\n    const muted = this.videoElement.muted;\n    this.events.onVolumeChange?.(volume, muted);\n    this.pluginManager.onVolumeChange({ volume, muted });\n  };\n\n  private readonly onErrorListener = () => {\n    const error = new Error('Video element error');\n    this.events.onError?.(error);\n    this.pluginManager.onError({ error, src: this.currentSource, strategy: this.currentStrategy });\n  };\n\n  constructor(\n    videoElement: HTMLVideoElement,\n    events: Partial<VideoEngineEvents> = {},\n    options: VideoEngineOptions = {}\n  ) {\n    this.videoElement = videoElement;\n    this.events = events;\n    this.adapterRegistry = new AdapterRegistry();\n    this.pluginManager = new VideoEnginePluginManager(options.plugins ?? []);\n    this.resolveCapabilities = options.capabilitiesResolver ?? getBrowserCapabilities;\n    this.emeEnvironment = options.emeEnvironment;\n\n    for (const adapter of defaultStreamingAdapters) {\n      this.adapterRegistry.register(adapter);\n    }\n\n    for (const adapter of options.adapters ?? []) {\n      this.adapterRegistry.register(adapter);\n    }\n\n    this.setupVideoElementEvents();\n    this.pluginManager.setup({ videoElement: this.videoElement });\n  }\n\n  async initialize(): Promise<void> {\n    this.assertNotDisposed('initialize');\n\n    if (this.capabilities) {\n      return;\n    }\n\n    if (this.initializationPromise) {\n      await this.initializationPromise;\n      return;\n    }\n\n    this.initializationPromise = (async () => {\n      try {\n        const capabilities = await this.resolveCapabilities();\n\n        if (this.isDisposed) {\n          return;\n        }\n\n        this.capabilities = capabilities;\n        this.pluginManager.onInit();\n        this.events.onReady?.();\n      } catch (error) {\n        if (!this.isDisposed) {\n          this.events.onError?.(error as Error);\n        }\n        throw error;\n      } finally {\n        this.initializationPromise = undefined;\n      }\n    })();\n\n    await this.initializationPromise;\n  }\n\n  async loadSource(config: VideoEngineConfig): Promise<void> {\n    this.assertNotDisposed('loadSource');\n    const requestId = ++this.loadRequestId;\n    const { signal } = config;\n    this.assertNotAborted(signal);\n\n    if (!this.capabilities) {\n      await this.initialize();\n    }\n    this.assertActiveLoadRequest(requestId);\n    this.assertNotAborted(signal);\n\n    if (!this.capabilities) {\n      throw new Error('Failed to initialize video engine capabilities');\n    }\n\n    this.cleanupActiveAdapter();\n    this.cleanupDrmController();\n    this.applyVideoConfig(config);\n\n    if (config.drm?.enabled) {\n      const drmController = await this.runWithAbortSignal(this.setupDrm(config.drm), signal, () => {\n        this.cleanupDrmController();\n      });\n      if (this.isSupersededLoadRequest(requestId)) {\n        drmController.destroy();\n        throw this.createSupersededLoadError();\n      }\n      this.activeEmeController = drmController;\n    }\n\n    this.events.onLoadStart?.();\n    const candidateSources = this.getCandidateSources(config);\n    const retryLimit = this.getRetryLimit(config);\n    const retryDelayMs = this.getRetryDelayMs(config);\n    const maxRetryDelayMs = this.getMaxRetryDelayMs(config, retryDelayMs);\n    const backoffMultiplier = this.getBackoffMultiplier(config);\n    const jitterRatio = this.getJitterRatio(config);\n    const resolvedCandidates = candidateSources.map((src) => ({\n      src,\n      adapterFactory: this.adapterRegistry.resolve({\n        src,\n        capabilities: this.capabilities as BrowserCapabilities,\n      }),\n    }));\n    const totalAttempts = resolvedCandidates.reduce((count, candidate) => {\n      if (!candidate.adapterFactory) {\n        return count + 1;\n      }\n\n      return count + retryLimit + 1;\n    }, 0);\n    const attemptErrors: Error[] = [];\n    let attemptNumber = 0;\n    let lastAttemptStrategy: string | undefined;\n\n    for (let sourceIndex = 0; sourceIndex < resolvedCandidates.length; sourceIndex += 1) {\n      const candidate = resolvedCandidates[sourceIndex];\n      this.assertActiveLoadRequest(requestId);\n      this.assertNotAborted(signal);\n      const src = candidate.src;\n      const adapterFactory = candidate.adapterFactory;\n      const strategy = adapterFactory?.id ?? 'unresolved';\n      lastAttemptStrategy = strategy;\n\n      const payload = {\n        src,\n        strategy,\n        capabilities: this.capabilities,\n      };\n\n      this.pluginManager.onSourceLoadStart(payload);\n\n      if (!adapterFactory) {\n        attemptNumber += 1;\n        const unsupportedError = new Error(`Unsupported video format. This browser cannot play: ${src}`);\n        attemptErrors.push(unsupportedError);\n        this.pluginManager.onSourceLoadFailed({\n          src,\n          strategy,\n          error: unsupportedError,\n          attempt: attemptNumber,\n          totalAttempts,\n        });\n\n        const nextCandidate = resolvedCandidates[sourceIndex + 1];\n        if (nextCandidate) {\n          this.pluginManager.onFailover({\n            fromSrc: src,\n            fromStrategy: strategy,\n            toSrc: nextCandidate.src,\n            toStrategy: nextCandidate.adapterFactory?.id ?? 'unresolved',\n            error: unsupportedError,\n            attempt: attemptNumber,\n            totalAttempts,\n          });\n        }\n        continue;\n      }\n\n      for (let retryIndex = 0; retryIndex <= retryLimit; retryIndex += 1) {\n        this.assertActiveLoadRequest(requestId);\n        this.assertNotAborted(signal);\n        attemptNumber += 1;\n        const adapter = adapterFactory.create();\n        let adapterDestroyedByAbort = false;\n\n        try {\n          await this.runWithAbortSignal(\n            adapter.load({\n              src,\n              capabilities: this.capabilities,\n              videoElement: this.videoElement,\n              signal,\n              onQualityChange: (quality: string) => {\n                this.events.onQualityChange?.(quality);\n                this.pluginManager.onQualityChange(quality);\n              },\n            }),\n            signal,\n            () => {\n              adapter.destroy();\n              adapterDestroyedByAbort = true;\n            }\n          );\n          this.assertActiveLoadRequest(requestId);\n          this.assertNotAborted(signal);\n\n          this.activeAdapter = adapter;\n          this.currentStrategy = adapterFactory.id;\n          this.currentSource = src;\n\n          this.pluginManager.onSourceLoaded(payload);\n          this.events.onLoadEnd?.();\n          return;\n        } catch (error) {\n          const runtimeError = error as Error;\n          if (!adapterDestroyedByAbort) {\n            adapter.destroy();\n          }\n          if (this.isAbortedLoadError(runtimeError)) {\n            throw runtimeError;\n          }\n          if (this.isSupersededLoadRequest(requestId)) {\n            throw this.createSupersededLoadError();\n          }\n\n          const canRetry =\n            retryIndex < retryLimit &&\n            this.isRetriableLoadError(runtimeError, config.retryPolicy?.retryOn);\n\n          this.pluginManager.onSourceLoadFailed({\n            src,\n            strategy: adapterFactory.id,\n            error: runtimeError,\n            attempt: attemptNumber,\n            totalAttempts,\n          });\n\n          if (canRetry) {\n            const delayMs = this.calculateRetryDelay({\n              retryAttempt: retryIndex,\n              baseDelayMs: retryDelayMs,\n              maxDelayMs: maxRetryDelayMs,\n              backoffMultiplier,\n              jitterRatio,\n            });\n            this.pluginManager.onRetry({\n              src,\n              strategy: adapterFactory.id,\n              error: runtimeError,\n              attempt: attemptNumber,\n              retryAttempt: retryIndex + 1,\n              maxRetries: retryLimit,\n              retryDelayMs: delayMs,\n            });\n            await this.waitForRetryDelay(delayMs, signal);\n            continue;\n          }\n\n          attemptErrors.push(runtimeError);\n          const nextCandidate = resolvedCandidates[sourceIndex + 1];\n          if (nextCandidate) {\n            this.pluginManager.onFailover({\n              fromSrc: src,\n              fromStrategy: adapterFactory.id,\n              toSrc: nextCandidate.src,\n              toStrategy: nextCandidate.adapterFactory?.id ?? 'unresolved',\n              error: runtimeError,\n              attempt: attemptNumber,\n              totalAttempts,\n            });\n          }\n          break;\n        }\n      }\n    }\n\n    const lastError = attemptErrors[attemptErrors.length - 1] ?? new Error('Unknown playback failure');\n    const failureSummary = new Error(\n      `All playback sources failed (${totalAttempts} attempts). Last error: ${lastError.message}`\n    );\n\n    this.events.onError?.(failureSummary);\n    this.pluginManager.onError({\n      error: failureSummary,\n      src: candidateSources[candidateSources.length - 1],\n      strategy: lastAttemptStrategy,\n    });\n    throw failureSummary;\n  }\n\n  getQualityLevels(): QualityLevel[] {\n    return this.activeAdapter?.getQualityLevels() ?? [];\n  }\n\n  setQuality(qualityId: string): void {\n    this.assertNotDisposed('setQuality');\n    this.activeAdapter?.setQuality(qualityId);\n  }\n\n  cleanup(): void {\n    if (this.isDisposed) {\n      return;\n    }\n\n    this.loadRequestId += 1;\n    this.cleanupActiveAdapter();\n    this.cleanupDrmController();\n  }\n\n  dispose(): void {\n    if (this.isDisposed) {\n      return;\n    }\n\n    this.isDisposed = true;\n    this.loadRequestId += 1;\n    this.cancelPendingFrames();\n    this.removeVideoElementEvents();\n    this.cleanupActiveAdapter();\n    this.cleanupDrmController();\n    this.pluginManager.dispose();\n  }\n\n  getCurrentStrategy(): string | undefined {\n    return this.currentStrategy;\n  }\n\n  getCapabilities(): BrowserCapabilities | undefined {\n    return this.capabilities;\n  }\n\n  getCurrentSource(): string | undefined {\n    return this.currentSource;\n  }\n\n  private applyVideoConfig(config: VideoEngineConfig): void {\n    this.videoElement.autoplay = config.autoplay ?? false;\n    this.videoElement.muted = config.muted ?? false;\n    this.videoElement.loop = config.loop ?? false;\n    this.videoElement.playsInline = config.playsInline ?? true;\n\n    if (config.poster) {\n      this.videoElement.poster = config.poster;\n    }\n  }\n\n  private setupVideoElementEvents(): void {\n    this.videoElement.addEventListener('play', this.onPlayListener);\n    this.videoElement.addEventListener('pause', this.onPauseListener);\n    this.videoElement.addEventListener('timeupdate', this.onTimeUpdateListener);\n    this.videoElement.addEventListener('progress', this.onProgressListener);\n    this.videoElement.addEventListener('volumechange', this.onVolumeChangeListener);\n    this.videoElement.addEventListener('error', this.onErrorListener);\n  }\n\n  private removeVideoElementEvents(): void {\n    this.videoElement.removeEventListener('play', this.onPlayListener);\n    this.videoElement.removeEventListener('pause', this.onPauseListener);\n    this.videoElement.removeEventListener('timeupdate', this.onTimeUpdateListener);\n    this.videoElement.removeEventListener('progress', this.onProgressListener);\n    this.videoElement.removeEventListener('volumechange', this.onVolumeChangeListener);\n    this.videoElement.removeEventListener('error', this.onErrorListener);\n  }\n\n  private getBufferedPercentage(): number {\n    const buffered = this.videoElement.buffered;\n    const duration = this.videoElement.duration;\n\n    if (buffered.length === 0 || !duration) {\n      return 0;\n    }\n\n    const bufferedEnd = buffered.end(buffered.length - 1);\n    return Math.min(100, (bufferedEnd / duration) * 100);\n  }\n\n  private requestFrame(callback: () => void): number {\n    if (typeof window !== 'undefined' && typeof window.requestAnimationFrame === 'function') {\n      return window.requestAnimationFrame(callback);\n    }\n\n    return setTimeout(callback, 16) as unknown as number;\n  }\n\n  private cancelFrame(id: number): void {\n    if (typeof window !== 'undefined' && typeof window.cancelAnimationFrame === 'function') {\n      window.cancelAnimationFrame(id);\n      return;\n    }\n\n    clearTimeout(id);\n  }\n\n  private cancelPendingFrames(): void {\n    if (this.timeUpdateFrameId !== null) {\n      this.cancelFrame(this.timeUpdateFrameId);\n      this.timeUpdateFrameId = null;\n    }\n\n    if (this.progressFrameId !== null) {\n      this.cancelFrame(this.progressFrameId);\n      this.progressFrameId = null;\n    }\n  }\n\n  private cleanupActiveAdapter(): void {\n    this.activeAdapter?.destroy();\n    this.activeAdapter = undefined;\n    this.currentStrategy = undefined;\n    this.currentSource = undefined;\n  }\n\n  private async setupDrm(configuration: DrmConfiguration): Promise<EmeController> {\n    try {\n      return await createEmeController(this.videoElement, configuration, this.emeEnvironment);\n    } catch (error) {\n      const drmError = new Error(`Failed to initialize DRM: ${(error as Error).message}`);\n      this.events.onError?.(drmError);\n      this.pluginManager.onError({\n        error: drmError,\n      });\n      throw drmError;\n    }\n  }\n\n  private cleanupDrmController(): void {\n    this.activeEmeController?.destroy();\n    this.activeEmeController = undefined;\n  }\n\n  private getCandidateSources(config: VideoEngineConfig): string[] {\n    const sources = [config.src, ...(config.fallbackSources ?? [])]\n      .map((source) => source.trim())\n      .filter((source) => source.length > 0);\n\n    return Array.from(new Set(sources));\n  }\n\n  private getRetryLimit(config: VideoEngineConfig): number {\n    const configuredLimit = config.retryPolicy?.maxRetries ?? 0;\n    return Math.max(0, Math.min(5, Math.floor(configuredLimit)));\n  }\n\n  private getRetryDelayMs(config: VideoEngineConfig): number {\n    const configuredDelayMs = config.retryPolicy?.retryDelayMs ?? 0;\n    return Math.max(0, Math.min(5000, Math.floor(configuredDelayMs)));\n  }\n\n  private getMaxRetryDelayMs(config: VideoEngineConfig, fallbackDelayMs: number): number {\n    const configuredMaxDelayMs = config.retryPolicy?.maxRetryDelayMs ?? fallbackDelayMs;\n    return Math.max(0, Math.min(30000, Math.floor(configuredMaxDelayMs)));\n  }\n\n  private getBackoffMultiplier(config: VideoEngineConfig): number {\n    const configuredMultiplier = config.retryPolicy?.backoffMultiplier ?? 1;\n    return Math.max(1, Math.min(4, configuredMultiplier));\n  }\n\n  private getJitterRatio(config: VideoEngineConfig): number {\n    const configuredJitterRatio = config.retryPolicy?.jitterRatio ?? 0;\n    return Math.max(0, Math.min(1, configuredJitterRatio));\n  }\n\n  private isSupersededLoadRequest(requestId: number): boolean {\n    return requestId !== this.loadRequestId;\n  }\n\n  private assertActiveLoadRequest(requestId: number): void {\n    if (this.isSupersededLoadRequest(requestId)) {\n      throw this.createSupersededLoadError();\n    }\n  }\n\n  private createSupersededLoadError(): Error {\n    return new Error('VideoEngine.loadSource() superseded by a newer load request');\n  }\n\n  private assertNotAborted(signal?: AbortSignal): void {\n    if (!signal?.aborted) {\n      return;\n    }\n\n    throw this.createAbortedLoadError();\n  }\n\n  private createAbortedLoadError(): Error {\n    const error = new Error('VideoEngine.loadSource() aborted');\n    error.name = 'AbortError';\n    return error;\n  }\n\n  private isAbortedLoadError(error: Error): boolean {\n    return error.name === 'AbortError' || error.message === 'VideoEngine.loadSource() aborted';\n  }\n\n  private isRetriableLoadError(\n    error: Error,\n    retryOn: Array<'network' | 'timeout' | 'server' | 'unsupported' | 'unknown' | 'all'> | undefined\n  ): boolean {\n    if (this.isAbortedLoadError(error)) {\n      return false;\n    }\n\n    const retryRules = retryOn ?? ['network', 'timeout', 'server'];\n    if (retryRules.includes('all')) {\n      return true;\n    }\n\n    const category = this.classifyLoadError(error);\n    return retryRules.includes(category);\n  }\n\n  private classifyLoadError(error: Error): 'network' | 'timeout' | 'server' | 'unsupported' | 'unknown' {\n    const message = error.message.toLowerCase();\n\n    if (message.includes('timeout')) {\n      return 'timeout';\n    }\n\n    if (\n      message.includes('network') ||\n      message.includes('failed to fetch') ||\n      message.includes('ecconn') ||\n      message.includes('econn') ||\n      message.includes('err_network')\n    ) {\n      return 'network';\n    }\n\n    if (/(status|http)\\s*5\\d\\d/.test(message) || /\\b50\\d\\b/.test(message)) {\n      return 'server';\n    }\n\n    if (\n      message.includes('unsupported') ||\n      message.includes('not supported') ||\n      message.includes('cannot play') ||\n      message.includes('codec')\n    ) {\n      return 'unsupported';\n    }\n\n    return 'unknown';\n  }\n\n  private async waitForRetryDelay(delayMs: number, signal?: AbortSignal): Promise<void> {\n    if (delayMs <= 0) {\n      this.assertNotAborted(signal);\n      return;\n    }\n\n    await this.runWithAbortSignal(\n      new Promise<void>((resolve) => {\n        globalThis.setTimeout(resolve, delayMs);\n      }),\n      signal\n    );\n  }\n\n  private calculateRetryDelay(options: {\n    retryAttempt: number;\n    baseDelayMs: number;\n    maxDelayMs: number;\n    backoffMultiplier: number;\n    jitterRatio: number;\n  }): number {\n    const {\n      retryAttempt,\n      baseDelayMs,\n      maxDelayMs,\n      backoffMultiplier,\n      jitterRatio,\n    } = options;\n\n    if (baseDelayMs <= 0) {\n      return 0;\n    }\n\n    const exponentialDelay = baseDelayMs * Math.pow(backoffMultiplier, retryAttempt);\n    const cappedDelay = Math.min(maxDelayMs, exponentialDelay);\n    if (jitterRatio <= 0) {\n      return Math.floor(cappedDelay);\n    }\n\n    const jitterDelta = cappedDelay * jitterRatio;\n    const randomOffset = (Math.random() * 2 - 1) * jitterDelta;\n    return Math.max(0, Math.floor(cappedDelay + randomOffset));\n  }\n\n  private runWithAbortSignal<T>(\n    task: Promise<T>,\n    signal: AbortSignal | undefined,\n    onAbort?: () => void\n  ): Promise<T> {\n    if (!signal) {\n      return task;\n    }\n\n    if (signal.aborted) {\n      onAbort?.();\n      return Promise.reject(this.createAbortedLoadError());\n    }\n\n    return new Promise<T>((resolve, reject) => {\n      const cleanup = () => {\n        signal.removeEventListener('abort', handleAbort);\n      };\n\n      const handleAbort = () => {\n        cleanup();\n        onAbort?.();\n        reject(this.createAbortedLoadError());\n      };\n\n      signal.addEventListener('abort', handleAbort, { once: true });\n\n      task.then(\n        (value) => {\n          cleanup();\n          resolve(value);\n        },\n        (error) => {\n          cleanup();\n          reject(error);\n        }\n      );\n    });\n  }\n\n  private assertNotDisposed(methodName: string): void {\n    if (this.isDisposed) {\n      throw new Error(`VideoEngine.${methodName}() called after dispose`);\n    }\n  }\n}\n","/**\n * Touch and gesture handling hook for mobile video player\n * Supports tap to play/pause, double tap to seek, swipe gestures\n */\n\nimport { useCallback, useRef, useState, useEffect } from 'react';\n\nexport interface GestureConfig {\n  enableTapToPlay?: boolean;\n  enableDoubleTapSeek?: boolean;\n  enableSwipeVolume?: boolean;\n  enableSwipeBrightness?: boolean;\n  seekAmount?: number; // seconds to seek on double tap\n  volumeSensitivity?: number;\n  brightnessSensitivity?: number;\n}\n\nexport interface GestureCallbacks {\n  onTap?: () => void;\n  onDoubleTap?: (direction: 'left' | 'right') => void;\n  onSwipeVolume?: (delta: number) => void;\n  onSwipeBrightness?: (delta: number) => void;\n  onPinchZoom?: (scale: number) => void;\n}\n\ninterface TouchState {\n  startX: number;\n  startY: number;\n  startTime: number;\n  lastTapTime: number;\n  tapCount: number;\n  isActive: boolean;\n}\n\nconst DEFAULT_CONFIG: Required<GestureConfig> = {\n  enableTapToPlay: true,\n  enableDoubleTapSeek: true,\n  enableSwipeVolume: true,\n  enableSwipeBrightness: false,\n  seekAmount: 10,\n  volumeSensitivity: 0.02,\n  brightnessSensitivity: 0.02,\n};\n\nexport const useVideoGestures = (\n  elementRef: React.RefObject<HTMLElement | null>,\n  callbacks: GestureCallbacks,\n  config: GestureConfig = {}\n) => {\n  const mergedConfig = { ...DEFAULT_CONFIG, ...config };\n  const touchState = useRef<TouchState>({\n    startX: 0,\n    startY: 0,\n    startTime: 0,\n    lastTapTime: 0,\n    tapCount: 0,\n    isActive: false,\n  });\n\n  const [isGestureActive, setIsGestureActive] = useState(false);\n\n  const handleTouchStart = useCallback((event: TouchEvent) => {\n    if (event.touches.length === 1) {\n      const touch = event.touches[0];\n      const now = Date.now();\n      \n      touchState.current = {\n        startX: touch.clientX,\n        startY: touch.clientY,\n        startTime: now,\n        lastTapTime: touchState.current.lastTapTime,\n        tapCount: now - touchState.current.lastTapTime < 300 ? touchState.current.tapCount + 1 : 1,\n        isActive: true,\n      };\n      \n      setIsGestureActive(true);\n    }\n  }, []);\n\n  const handleTouchMove = useCallback((event: TouchEvent) => {\n    if (!touchState.current.isActive || event.touches.length !== 1) return;\n\n    const touch = event.touches[0];\n    const deltaX = touch.clientX - touchState.current.startX;\n    const deltaY = touch.clientY - touchState.current.startY;\n    const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n\n    // Prevent scrolling if we're handling gestures\n    if (distance > 10) {\n      event.preventDefault();\n    }\n\n    // Vertical swipe for volume (right side) or brightness (left side)\n    if (Math.abs(deltaY) > 20 && Math.abs(deltaX) < 50) {\n      const element = elementRef.current;\n      if (!element) return;\n\n      const rect = element.getBoundingClientRect();\n      const isRightSide = touch.clientX > rect.left + rect.width / 2;\n\n      if (isRightSide && mergedConfig.enableSwipeVolume) {\n        const volumeDelta = -deltaY * mergedConfig.volumeSensitivity;\n        callbacks.onSwipeVolume?.(volumeDelta);\n      } else if (!isRightSide && mergedConfig.enableSwipeBrightness) {\n        const brightnessDelta = -deltaY * mergedConfig.brightnessSensitivity;\n        callbacks.onSwipeBrightness?.(brightnessDelta);\n      }\n    }\n  }, [elementRef, callbacks, mergedConfig]);\n\n  const handleTouchEnd = useCallback((event: TouchEvent) => {\n    if (!touchState.current.isActive) return;\n\n    const now = Date.now();\n    const duration = now - touchState.current.startTime;\n    const tapCount = touchState.current.tapCount;\n\n    touchState.current.isActive = false;\n    setIsGestureActive(false);\n\n    // Only handle taps for short duration touches\n    if (duration < 300) {\n      if (tapCount === 1) {\n        // Single tap - delay to check for double tap\n        setTimeout(() => {\n          if (touchState.current.tapCount === 1 && mergedConfig.enableTapToPlay) {\n            callbacks.onTap?.();\n          }\n        }, 300);\n      } else if (tapCount === 2 && mergedConfig.enableDoubleTapSeek) {\n        // Double tap - determine direction based on touch position\n        const element = elementRef.current;\n        if (element) {\n          const rect = element.getBoundingClientRect();\n          const isLeftSide = touchState.current.startX < rect.left + rect.width / 2;\n          callbacks.onDoubleTap?.(isLeftSide ? 'left' : 'right');\n        }\n        \n        // Reset tap count after double tap\n        touchState.current.tapCount = 0;\n      }\n    }\n\n    touchState.current.lastTapTime = now;\n  }, [elementRef, callbacks, mergedConfig]);\n\n  // Pinch to zoom (for future enhancement)\n  const handleTouchPinch = useCallback((event: TouchEvent) => {\n    if (event.touches.length === 2) {\n      // Calculate pinch scale\n      const touch1 = event.touches[0];\n      const touch2 = event.touches[1];\n      const distance = Math.sqrt(\n        Math.pow(touch2.clientX - touch1.clientX, 2) + \n        Math.pow(touch2.clientY - touch1.clientY, 2)\n      );\n      \n      // This would need initial distance tracking for proper scale calculation\n      // callbacks.onPinchZoom?.(scale);\n    }\n  }, [callbacks]);\n\n  // Mouse events for desktop compatibility\n  const handleMouseClick = useCallback((event: MouseEvent) => {\n    if (!mergedConfig.enableTapToPlay) return;\n    \n    const now = Date.now();\n    const timeDiff = now - touchState.current.lastTapTime;\n    \n    if (timeDiff < 300) {\n      // Double click\n      if (mergedConfig.enableDoubleTapSeek) {\n        const element = elementRef.current;\n        if (element) {\n          const rect = element.getBoundingClientRect();\n          const isLeftSide = event.clientX < rect.left + rect.width / 2;\n          callbacks.onDoubleTap?.(isLeftSide ? 'left' : 'right');\n        }\n      }\n    } else {\n      // Single click\n      callbacks.onTap?.();\n    }\n    \n    touchState.current.lastTapTime = now;\n  }, [elementRef, callbacks, mergedConfig]);\n\n  // Set up event listeners\n  useEffect(() => {\n    const element = elementRef.current;\n    if (!element) return;\n\n    // Touch events\n    element.addEventListener('touchstart', handleTouchStart, { passive: false });\n    element.addEventListener('touchmove', handleTouchMove, { passive: false });\n    element.addEventListener('touchend', handleTouchEnd, { passive: true });\n\n    // Mouse events for desktop\n    element.addEventListener('click', handleMouseClick);\n\n    return () => {\n      element.removeEventListener('touchstart', handleTouchStart);\n      element.removeEventListener('touchmove', handleTouchMove);\n      element.removeEventListener('touchend', handleTouchEnd);\n      element.removeEventListener('click', handleMouseClick);\n    };\n  }, [elementRef, handleTouchStart, handleTouchMove, handleTouchEnd, handleMouseClick]);\n\n  return {\n    isGestureActive,\n    config: mergedConfig,\n  };\n};\n","'use client';\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { PlayerConfiguration, PlayerPresets, mergePlayerConfig } from '@/types/player-config';\nimport { getPlayerLogger } from '@/lib/logger';\n\ninterface PlayerConfigContextType {\n  config: PlayerConfiguration;\n  updateConfig: (newConfig: Partial<PlayerConfiguration>) => void;\n  resetConfig: () => void;\n  saveConfig: (name: string) => void;\n  loadSavedConfig: (name: string) => void;\n  getSavedConfigs: () => string[];\n}\n\nconst PlayerConfigContext = createContext<PlayerConfigContextType | undefined>(undefined);\n\ninterface PlayerConfigProviderProps {\n  children: React.ReactNode;\n  defaultConfig?: PlayerConfiguration;\n  storageKey?: string;\n}\n\nexport const PlayerConfigProvider: React.FC<PlayerConfigProviderProps> = ({\n  children,\n  defaultConfig = PlayerPresets.default,\n  storageKey = 'nextjs-videoplayer-config',\n}) => {\n  const [config, setConfig] = useState<PlayerConfiguration>(defaultConfig);\n\n  // Load saved config on mount\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const saved = localStorage.getItem(storageKey);\n      if (saved) {\n        try {\n          const savedConfig = JSON.parse(saved);\n          setConfig(mergePlayerConfig(defaultConfig, savedConfig));\n        } catch (error) {\n          getPlayerLogger().warn('Failed to load saved player config:', error);\n        }\n      }\n    }\n  }, [defaultConfig, storageKey]);\n\n  // Save config to localStorage\n  const saveConfigToStorage = (newConfig: PlayerConfiguration) => {\n    if (typeof window !== 'undefined') {\n      localStorage.setItem(storageKey, JSON.stringify(newConfig));\n    }\n  };\n\n  const updateConfig = (newConfig: Partial<PlayerConfiguration>) => {\n    const updatedConfig = mergePlayerConfig(config, newConfig);\n    setConfig(updatedConfig);\n    saveConfigToStorage(updatedConfig);\n  };\n\n  const resetConfig = () => {\n    setConfig(defaultConfig);\n    saveConfigToStorage(defaultConfig);\n  };\n\n  const saveConfig = (name: string) => {\n    if (typeof window !== 'undefined') {\n      const savedConfigs = JSON.parse(localStorage.getItem(`${storageKey}-saved`) || '{}');\n      savedConfigs[name] = config;\n      localStorage.setItem(`${storageKey}-saved`, JSON.stringify(savedConfigs));\n    }\n  };\n\n  const loadSavedConfig = (name: string) => {\n    if (typeof window !== 'undefined') {\n      const savedConfigs = JSON.parse(localStorage.getItem(`${storageKey}-saved`) || '{}');\n      if (savedConfigs[name]) {\n        setConfig(savedConfigs[name]);\n        saveConfigToStorage(savedConfigs[name]);\n      }\n    }\n  };\n\n  const getSavedConfigs = (): string[] => {\n    if (typeof window !== 'undefined') {\n      const savedConfigs = JSON.parse(localStorage.getItem(`${storageKey}-saved`) || '{}');\n      return Object.keys(savedConfigs);\n    }\n    return [];\n  };\n\n  return (\n    <PlayerConfigContext.Provider\n      value={{\n        config,\n        updateConfig,\n        resetConfig,\n        saveConfig,\n        loadSavedConfig,\n        getSavedConfigs,\n      }}\n    >\n      {children}\n    </PlayerConfigContext.Provider>\n  );\n};\n\nexport const usePlayerConfig = () => {\n  const context = useContext(PlayerConfigContext);\n  if (context === undefined) {\n    throw new Error('usePlayerConfig must be used within a PlayerConfigProvider');\n  }\n  return context;\n};\n","/**\n * Comprehensive video player configuration types\n * Enables granular control over every aspect of the player\n */\n\nexport interface PlayerTheme {\n  primary?: string;\n  secondary?: string;\n  accent?: string;\n  background?: string;\n  text?: string;\n  controlsBackground?: string;\n  progressColor?: string;\n  bufferColor?: string;\n}\n\nexport interface ControlsVisibility {\n  playPause?: boolean;\n  progress?: boolean;\n  volume?: boolean;\n  quality?: boolean;\n  fullscreen?: boolean;\n  pictureInPicture?: boolean;\n  theaterMode?: boolean;\n  playbackRate?: boolean;\n  keyboardShortcuts?: boolean;\n  settings?: boolean;\n  time?: boolean;\n}\n\nexport interface KeyboardShortcutsConfig {\n  enabled?: boolean;\n  customKeys?: {\n    playPause?: string[];\n    fullscreen?: string[];\n    mute?: string[];\n    pictureInPicture?: string[];\n    theaterMode?: string[];\n    seekForward?: string[];\n    seekBackward?: string[];\n    volumeUp?: string[];\n    volumeDown?: string[];\n    restart?: string[];\n    jumpToPercent?: string[];\n  };\n}\n\nexport interface GesturesConfig {\n  enabled?: boolean;\n  tapToPlay?: boolean;\n  doubleTapSeek?: boolean;\n  swipeVolume?: boolean;\n  pinchToZoom?: boolean;\n  seekOnSwipe?: boolean;\n}\n\nexport interface AutoBehavior {\n  autoPlay?: boolean;\n  autoHideControls?: boolean;\n  autoHideDelay?: number;\n  autoQuality?: boolean;\n  autoPictureInPictureOnScroll?: boolean;\n  autoTheaterOnLandscape?: boolean;\n  rememberVolume?: boolean;\n  rememberPlaybackRate?: boolean;\n}\n\nexport interface AnalyticsConfig {\n  enabled?: boolean;\n  trackPlay?: boolean;\n  trackPause?: boolean;\n  trackSeek?: boolean;\n  trackQualityChange?: boolean;\n  trackFullscreen?: boolean;\n  trackPictureInPicture?: boolean;\n  customEvents?: string[];\n}\n\nexport interface AdvancedFeatures {\n  chapters?: boolean;\n  subtitles?: boolean;\n  thumbnailPreview?: boolean;\n  miniPlayer?: boolean;\n  playlist?: boolean;\n  airPlay?: boolean;\n  chromecast?: boolean;\n  downloadButton?: boolean;\n  shareButton?: boolean;\n  loopButton?: boolean;\n}\n\nexport interface PlayerConfiguration {\n  // Basic settings\n  theme?: PlayerTheme;\n  \n  // Controls configuration\n  controls?: {\n    show?: boolean;\n    visibility?: ControlsVisibility;\n    position?: 'bottom' | 'top' | 'overlay' | 'external';\n    size?: 'small' | 'medium' | 'large';\n  };\n  \n  // Keyboard shortcuts\n  keyboard?: KeyboardShortcutsConfig;\n  \n  // Touch gestures\n  gestures?: GesturesConfig;\n  \n  // Auto behaviors\n  auto?: AutoBehavior;\n  \n  // Analytics\n  analytics?: AnalyticsConfig;\n  \n  // Advanced features\n  features?: AdvancedFeatures;\n  \n  // Responsive behavior\n  responsive?: {\n    enabled?: boolean;\n    breakpoints?: {\n      mobile?: number;\n      tablet?: number;\n      desktop?: number;\n    };\n    adaptiveControls?: boolean;\n    hideControlsOnMobile?: string[];\n  };\n  \n  // Performance\n  performance?: {\n    preload?: 'none' | 'metadata' | 'auto';\n    lazy?: boolean;\n    bufferAhead?: number;\n    maxBufferLength?: number;\n  };\n  \n  // Customization\n  customization?: {\n    css?: string;\n    className?: string;\n    hideDefaultStyles?: boolean;\n    customIcons?: { [key: string]: React.ComponentType };\n  };\n}\n\n// Preset configurations for different use cases\nexport const PlayerPresets: { [key: string]: PlayerConfiguration } = {\n  // Default full experience\n  default: {\n    controls: {\n      show: true,\n      visibility: {\n        playPause: true,\n        progress: true,\n        volume: true,\n        quality: true,\n        fullscreen: true,\n        pictureInPicture: true,\n        theaterMode: true,\n        playbackRate: true,\n        keyboardShortcuts: true,\n        settings: true,\n        time: true,\n      },\n      position: 'bottom',\n    },\n    keyboard: { enabled: true },\n    gestures: { enabled: true, tapToPlay: true, doubleTapSeek: true },\n    auto: { autoHideControls: true, autoHideDelay: 3000 },\n    features: { thumbnailPreview: true, chapters: true },\n  },\n};\n\n// Helper function to merge configurations\nexport const mergePlayerConfig = (\n  base: PlayerConfiguration = {},\n  override: PlayerConfiguration = {}\n): PlayerConfiguration => {\n  return {\n    theme: { ...base.theme, ...override.theme },\n    controls: {\n      ...base.controls,\n      ...override.controls,\n      visibility: {\n        ...base.controls?.visibility,\n        ...override.controls?.visibility,\n      },\n    },\n    keyboard: { ...base.keyboard, ...override.keyboard },\n    gestures: { ...base.gestures, ...override.gestures },\n    auto: { ...base.auto, ...override.auto },\n    analytics: { ...base.analytics, ...override.analytics },\n    features: { ...base.features, ...override.features },\n    responsive: { ...base.responsive, ...override.responsive },\n    performance: { ...base.performance, ...override.performance },\n    customization: { ...base.customization, ...override.customization },\n  };\n};\n","/**\n * Main video player component\n * Combines video engine, controls, and gesture handling\n */\n\n'use client';\n\nimport React, { useRef, useEffect, forwardRef, useCallback } from 'react';\nimport { cn } from '@/lib/utils';\nimport { useVideoPlayer } from '@/hooks/use-video-player';\nimport { useVideoGestures } from '@/hooks/use-video-gestures';\nimport { VideoControls } from '@/components/controls/video-controls';\nimport { LoadingSpinner } from '@/components/player/loading-spinner';\nimport { ErrorDisplay } from '@/components/player/error-display';\nimport type { VideoEngineConfig } from '@/core/video-engine';\nimport type { DrmConfiguration } from '@/core/drm/types';\nimport type { VideoEnginePlugin } from '@/core/plugins/types';\nimport type { VideoPlayerState } from '@/hooks/use-video-player';\nimport { getPlayerLogger } from '@/lib/logger';\n\ntype LegacyPluginContext = {\n  engine: unknown;\n  state: unknown;\n  controls: unknown;\n};\n\ntype LegacyPlayerPlugin = (player: LegacyPluginContext) => void;\n\nexport interface VideoPlayerProps {\n  src: string;\n  fallbackSources?: string[];\n  drmConfig?: DrmConfiguration;\n  poster?: string;\n  autoPlay?: boolean;\n  muted?: boolean;\n  loop?: boolean;\n  playsInline?: boolean;\n  className?: string;\n  controls?: {\n    show?: boolean;\n    fullscreen?: boolean;\n    quality?: boolean;\n    volume?: boolean;\n    progress?: boolean;\n    playPause?: boolean;\n    playbackRate?: boolean;\n    pictureInPicture?: boolean;\n    theaterMode?: boolean;\n  };\n  gestures?: {\n    enabled?: boolean;\n    tapToPlay?: boolean;\n    doubleTapSeek?: boolean;\n    swipeVolume?: boolean;\n  };\n  plugins?: LegacyPlayerPlugin[];\n  enginePlugins?: VideoEnginePlugin[];\n  onReady?: () => void;\n  onPlay?: () => void;\n  onPause?: () => void;\n  onError?: (error: string) => void;\n  onTimeUpdate?: (currentTime: number, duration: number) => void;\n  onStateChange?: (state: VideoPlayerState) => void;\n}\n\nexport const VideoPlayer = forwardRef<HTMLVideoElement, VideoPlayerProps>(({\n  src,\n  fallbackSources,\n  drmConfig,\n  poster,\n  autoPlay = false,\n  muted = false,\n  loop = false,\n  playsInline = true,\n  className,\n  controls = {\n    show: true,\n    fullscreen: true,\n    quality: true,\n    volume: true,\n    progress: true,\n    playPause: true,\n    playbackRate: true,\n    pictureInPicture: true,\n    theaterMode: true,\n  },\n  gestures = {\n    enabled: true,\n    tapToPlay: true,\n    doubleTapSeek: true,\n    swipeVolume: true,\n  },\n  plugins = [],\n  enginePlugins = [],\n  onReady,\n  onPlay,\n  onPause,\n  onError,\n  onTimeUpdate,\n  onStateChange,\n}, ref) => {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [showControls, setShowControls] = React.useState(true);\n  const controlsTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const legacyPluginsInitializedRef = useRef(false);\n\n  // Video player hook\n  const { state, controls: playerControls, qualityLevels, engine } = useVideoPlayer(videoRef, {\n    autoPlay,\n    muted,\n    volume: 1,\n    enginePlugins,\n  });\n\n  // Memoized callbacks to prevent infinite re-renders\n  const handlePlay = useCallback(() => {\n    onPlay?.();\n  }, [onPlay]);\n\n  const handlePause = useCallback(() => {\n    onPause?.();\n  }, [onPause]);\n\n  const handleError = useCallback((error: string) => {\n    onError?.(error);\n  }, [onError]);\n\n  const handleTimeUpdate = useCallback((currentTime: number, duration: number) => {\n    onTimeUpdate?.(currentTime, duration);\n  }, [onTimeUpdate]);\n\n  const handleStateChange = useCallback((newState: VideoPlayerState) => {\n    onStateChange?.(newState);\n  }, [onStateChange]);\n\n  const handleReady = useCallback(() => {\n    onReady?.();\n  }, [onReady]);\n\n  // Gesture handling\n  const { isGestureActive } = useVideoGestures(\n    containerRef,\n    {\n      onTap: () => {\n        if (gestures.tapToPlay && controls.playPause && !state.isLoading) {\n          // Prevent rapid tap/pause cycles\n          if (state.isPlaying && !state.isPaused) {\n            playerControls.pause();\n          } else if (state.isPaused && !state.isPlaying) {\n            playerControls.play();\n          }\n        }\n        showControlsTemporarily();\n      },\n      onDoubleTap: (direction) => {\n        if (gestures.doubleTapSeek) {\n          const seekAmount = direction === 'left' ? -10 : 10;\n          const newTime = Math.max(0, Math.min(state.duration, state.currentTime + seekAmount));\n          playerControls.seek(newTime);\n        }\n      },\n      onSwipeVolume: (delta) => {\n        if (gestures.swipeVolume && controls.volume) {\n          const newVolume = Math.max(0, Math.min(1, state.volume + delta));\n          playerControls.setVolume(newVolume);\n        }\n      },\n    },\n    {\n      enableTapToPlay: gestures.tapToPlay,\n      enableDoubleTapSeek: gestures.doubleTapSeek,\n      enableSwipeVolume: gestures.swipeVolume,\n    }\n  );\n\n  // Load video source when engine is ready\n  useEffect(() => {\n    if (!src || !engine) return;\n\n    const config: VideoEngineConfig = {\n      src,\n      fallbackSources,\n      drm: drmConfig,\n      poster,\n      autoplay: autoPlay,\n      muted,\n      loop,\n      playsInline,\n    };\n\n    // Add a small delay to ensure engine is fully initialized\n    const timer = setTimeout(() => {\n      playerControls.load(config);\n    }, 50);\n\n    return () => clearTimeout(timer);\n  }, [src, fallbackSources, drmConfig, poster, autoPlay, muted, loop, playsInline, engine]);\n\n  // Event callbacks\n  useEffect(() => {\n    if (state.isPlaying) {\n      handlePlay();\n    } else if (state.isPaused) {\n      handlePause();\n    }\n  }, [state.isPlaying, state.isPaused, handlePlay, handlePause]);\n\n  useEffect(() => {\n    if (state.error) {\n      handleError(state.error);\n    }\n  }, [state.error, handleError]);\n\n  useEffect(() => {\n    handleTimeUpdate(state.currentTime, state.duration);\n  }, [state.currentTime, state.duration, handleTimeUpdate]);\n\n  useEffect(() => {\n    handleStateChange(state);\n  }, [state, handleStateChange]);\n\n  useEffect(() => {\n    if (!state.isLoading && state.duration > 0) {\n      handleReady();\n    }\n  }, [state.isLoading, state.duration, handleReady]);\n\n  // Initialize plugins\n  useEffect(() => {\n    legacyPluginsInitializedRef.current = false;\n  }, [engine]);\n\n  useEffect(() => {\n    if (!engine || plugins.length === 0 || legacyPluginsInitializedRef.current) {\n      return;\n    }\n\n    plugins.forEach((plugin) => {\n      try {\n        plugin({ engine, state, controls: playerControls });\n      } catch (error) {\n        getPlayerLogger().warn('Plugin initialization failed:', error);\n      }\n    });\n\n    legacyPluginsInitializedRef.current = true;\n  }, [engine, plugins, playerControls, state]);\n\n  // Auto-hide controls\n  const showControlsTemporarily = React.useCallback(() => {\n    setShowControls(true);\n    \n    if (controlsTimeoutRef.current) {\n      clearTimeout(controlsTimeoutRef.current);\n    }\n    \n    if (state.isPlaying) {\n      controlsTimeoutRef.current = setTimeout(() => {\n        setShowControls(false);\n      }, 3000);\n    }\n  }, [state.isPlaying]);\n\n  // Mouse movement detection\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    const handleMouseMove = () => {\n      showControlsTemporarily();\n    };\n\n    const handleMouseLeave = () => {\n      if (state.isPlaying) {\n        setShowControls(false);\n      }\n    };\n\n    container.addEventListener('mousemove', handleMouseMove);\n    container.addEventListener('mouseleave', handleMouseLeave);\n\n    return () => {\n      container.removeEventListener('mousemove', handleMouseMove);\n      container.removeEventListener('mouseleave', handleMouseLeave);\n    };\n  }, [showControlsTemporarily, state.isPlaying]);\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (controlsTimeoutRef.current) {\n        clearTimeout(controlsTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  // Forward ref\n  React.useImperativeHandle(ref, () => videoRef.current!);\n\n  return (\n    <div\n      ref={containerRef}\n      className={cn(\n        'relative w-full bg-black overflow-hidden group transition-all duration-300',\n        'focus-within:outline-none focus-within:ring-2 focus-within:ring-white/30',\n        state.isFullscreen && 'fixed inset-0 z-50',\n        state.isTheaterMode && 'mx-auto max-w-none',\n        className\n      )}\n      style={{\n        aspectRatio: state.isFullscreen || state.isTheaterMode ? 'auto' : '16/9',\n        height: state.isTheaterMode ? '70vh' : 'auto',\n      }}\n    >\n      {/* Video Element */}\n      <video\n        ref={videoRef}\n        className=\"w-full h-full object-contain\"\n        playsInline={playsInline}\n        {...(playsInline && { 'webkit-playsinline': '' })}\n        poster={poster}\n        preload=\"metadata\"\n      />\n\n      {/* Loading Spinner */}\n      {state.isLoading && (\n        <div className=\"absolute inset-0 flex items-center justify-center bg-black/30 backdrop-blur-[1px]\">\n          <LoadingSpinner />\n        </div>\n      )}\n\n      {/* Error Display */}\n      {state.error && (\n        <div className=\"absolute inset-0 flex items-center justify-center bg-black/70 backdrop-blur-sm\">\n          <ErrorDisplay error={state.error} onRetry={() => playerControls.load({ src, fallbackSources, drm: drmConfig })} />\n        </div>\n      )}\n\n      {/* Gesture Feedback */}\n      {isGestureActive && gestures.enabled && (\n        <div className=\"absolute inset-0 pointer-events-none\">\n          <div className=\"absolute inset-0 bg-white/5 animate-pulse\" />\n        </div>\n      )}\n\n      {/* Video Controls */}\n      {controls.show && (showControls || state.isPaused || !state.duration) && (\n        <VideoControls\n          state={state}\n          controls={playerControls}\n          qualityLevels={qualityLevels}\n          controlsConfig={controls}\n          onShow={() => setShowControls(true)}\n          onHide={() => setShowControls(false)}\n        />\n      )}\n    </div>\n  );\n});\n\nVideoPlayer.displayName = 'VideoPlayer';\n","/**\n * YouTube 2025/2026 mobile video controls — fully responsive\n * Center play/seek overlay + bottom progress-on-top + bubble row + bottom sheet settings\n */\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport {\n  Play,\n  Pause,\n  Volume1,\n  Volume2,\n  VolumeX,\n  Maximize,\n  Minimize,\n  Settings,\n  Loader2,\n  PictureInPicture,\n  PictureInPicture2,\n  Gauge,\n  SkipBack,\n  SkipForward,\n  Check,\n  ChevronRight,\n  X,\n} from 'lucide-react';\nimport { Slider } from '@/components/ui/slider';\nimport { cn } from '@/lib/utils';\nimport { VideoThumbnail } from '@/components/player/video-thumbnail';\nimport type { VideoPlayerState, VideoPlayerControls } from '@/hooks/use-video-player';\n\ninterface MobileVideoControlsProps {\n  state: VideoPlayerState;\n  controls: VideoPlayerControls;\n  qualityLevels: Array<{ id: string; label: string; height?: number }>;\n  className?: string;\n  onShow?: () => void;\n  onHide?: () => void;\n  thumbnailPreview?: boolean;\n  thumbnailUrl?: string;\n}\n\nconst formatTime = (seconds: number): string => {\n  if (!isFinite(seconds)) return '0:00';\n  const hrs = Math.floor(seconds / 3600);\n  const mins = Math.floor((seconds % 3600) / 60);\n  const secs = Math.floor(seconds % 60);\n  if (hrs > 0) return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  return `${mins}:${secs.toString().padStart(2, '0')}`;\n};\n\nconst playbackRateOptions = [\n  { value: 0.5, label: '0.5x' },\n  { value: 0.75, label: '0.75x' },\n  { value: 1, label: 'Normal' },\n  { value: 1.25, label: '1.25x' },\n  { value: 1.5, label: '1.5x' },\n  { value: 2, label: '2x' },\n];\n\n// 44px touch targets\nconst iconBtnClass =\n  'flex items-center justify-center w-11 h-11 rounded-full text-white hover:bg-white/10 active:bg-white/20 transition-colors duration-200 touch-manipulation';\n\nconst iconClass = 'w-[22px] h-[22px]';\n\nexport const MobileVideoControls: React.FC<MobileVideoControlsProps> = ({\n  state,\n  controls,\n  qualityLevels,\n  className,\n  onShow,\n  onHide,\n  thumbnailPreview = false,\n  thumbnailUrl,\n}) => {\n  const [showSettings, setShowSettings] = useState(false);\n  const [settingsPage, setSettingsPage] = useState<'main' | 'quality' | 'speed'>('main');\n  const [isDragging, setIsDragging] = useState(false);\n  const [seekingTime, setSeekingTime] = useState<number | null>(null);\n  const [isMounted, setIsMounted] = useState(false);\n  const [isVisible, setIsVisible] = useState(true);\n  const [hoverTime, setHoverTime] = useState<number | null>(null);\n  const [hoverX, setHoverX] = useState<number>(0);\n  const hideTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const progressRef = useRef<HTMLDivElement>(null);\n  const rafRef = useRef<number>(0);\n\n  useEffect(() => { setIsMounted(true); }, []);\n\n  const showControlsTemporarily = useCallback(() => {\n    setIsVisible(true);\n    onShow?.();\n    if (hideTimeoutRef.current) { clearTimeout(hideTimeoutRef.current); hideTimeoutRef.current = null; }\n    if (state.isPlaying && !showSettings) {\n      hideTimeoutRef.current = setTimeout(() => { setIsVisible(false); onHide?.(); }, 3000);\n    }\n  }, [state.isPlaying, showSettings, onShow, onHide]);\n\n  useEffect(() => {\n    if (!state.isPlaying || showSettings) {\n      setIsVisible(true);\n      if (hideTimeoutRef.current) { clearTimeout(hideTimeoutRef.current); hideTimeoutRef.current = null; }\n    }\n  }, [state.isPlaying, showSettings]);\n\n  const handleContainerTap = useCallback((e: React.MouseEvent) => {\n    if (!isVisible) { e.preventDefault(); e.stopPropagation(); showControlsTemporarily(); return; }\n    if (e.target === e.currentTarget) {\n      if (showSettings) { setShowSettings(false); return; }\n      setIsVisible(false);\n      if (hideTimeoutRef.current) { clearTimeout(hideTimeoutRef.current); hideTimeoutRef.current = null; }\n    }\n  }, [isVisible, showControlsTemporarily, showSettings]);\n\n  useEffect(() => { return () => { if (hideTimeoutRef.current) clearTimeout(hideTimeoutRef.current); }; }, []);\n\n  // Optimistic seek: during drag only update local seekingTime, commit on release\n  const displayTime = seekingTime !== null ? seekingTime : state.currentTime;\n  const progressPercentage = state.duration > 0 ? (displayTime / state.duration) * 100 : 0;\n  const bufferedPercentage = state.buffered;\n\n  const positionFromClient = useCallback((clientX: number): number => {\n    if (!progressRef.current) return 0;\n    const rect = progressRef.current.getBoundingClientRect();\n    const x = Math.max(0, Math.min(clientX - rect.left, rect.width));\n    return (x / rect.width) * state.duration;\n  }, [state.duration]);\n\n  const updateHover = useCallback((clientX: number) => {\n    if (!progressRef.current) return;\n    const rect = progressRef.current.getBoundingClientRect();\n    const x = clientX - rect.left;\n    const pct = Math.max(0, Math.min(x / rect.width, 1));\n    setHoverTime(pct * state.duration);\n    setHoverX(pct * 100);\n  }, [state.duration]);\n\n  const handleProgressClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (isDragging) return;\n    const time = positionFromClient(e.clientX);\n    setSeekingTime(time);\n    controls.seek(time);\n    requestAnimationFrame(() => { setTimeout(() => setSeekingTime(null), 150); });\n  };\n  const handleProgressHover = (e: React.MouseEvent<HTMLDivElement>) => updateHover(e.clientX);\n\n  const handleProgressMouseDown = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDragging(true);\n    setSeekingTime(positionFromClient(e.clientX));\n  }, [positionFromClient]);\n\n  const handleProgressTouchStart = useCallback((e: React.TouchEvent<HTMLDivElement>) => {\n    setIsDragging(true);\n    setSeekingTime(positionFromClient(e.touches[0].clientX));\n  }, [positionFromClient]);\n\n  useEffect(() => {\n    if (!isDragging) return;\n    const onMove = (clientX: number) => {\n      cancelAnimationFrame(rafRef.current);\n      rafRef.current = requestAnimationFrame(() => {\n        setSeekingTime(positionFromClient(clientX));\n        updateHover(clientX);\n      });\n    };\n    const onMouseMove = (e: MouseEvent) => onMove(e.clientX);\n    const onTouchMove = (e: TouchEvent) => onMove(e.touches[0].clientX);\n    const onEnd = () => {\n      cancelAnimationFrame(rafRef.current);\n      setIsDragging(false);\n      setHoverTime(null);\n      if (seekingTime !== null) controls.seek(seekingTime);\n      setTimeout(() => setSeekingTime(null), 150);\n    };\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseup', onEnd);\n    window.addEventListener('touchmove', onTouchMove, { passive: true });\n    window.addEventListener('touchend', onEnd);\n    return () => {\n      cancelAnimationFrame(rafRef.current);\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onEnd);\n      window.removeEventListener('touchmove', onTouchMove);\n      window.removeEventListener('touchend', onEnd);\n    };\n  }, [isDragging, positionFromClient, updateHover, seekingTime, controls]);\n\n  const handleSeek = (direction: 'backward' | 'forward') => {\n    const amt = 10;\n    controls.seek(direction === 'backward'\n      ? Math.max(0, state.currentTime - amt)\n      : Math.min(state.duration, state.currentTime + amt));\n    showControlsTemporarily();\n  };\n\n  const VolumeIcon = state.isMuted || state.volume === 0 ? VolumeX : state.volume < 0.5 ? Volume1 : Volume2;\n\n  if (!isMounted) return null;\n\n  return (\n    <div\n      className={cn(\n        'absolute inset-0 flex flex-col text-white z-10 transition-opacity duration-300',\n        isVisible ? 'opacity-100 pointer-events-auto' : 'opacity-0 pointer-events-auto',\n        className\n      )}\n      onClickCapture={handleContainerTap}\n      style={{ paddingBottom: 'env(safe-area-inset-bottom)' }}\n    >\n      {/* Top - status badges */}\n      <div className={cn('flex items-center gap-1.5 p-2 transition-opacity duration-300', isVisible ? 'opacity-100' : 'opacity-0')}>\n        {state.isLoading && (\n          <div className=\"rounded-full bg-black/60 backdrop-blur-md p-2\">\n            <Loader2 className=\"h-4 w-4 animate-spin\" />\n          </div>\n        )}\n        {state.playbackRate !== 1 && (\n          <div className=\"rounded-full bg-black/60 backdrop-blur-md px-2.5 py-1\">\n            <span className=\"text-xs font-medium\">{state.playbackRate}x</span>\n          </div>\n        )}\n      </div>\n\n      {/* Center - Play/Pause + Seek */}\n      <div className=\"flex-1 flex items-center justify-center\">\n        <div className={cn('flex items-center gap-8 sm:gap-10 transition-opacity duration-300', isVisible ? 'opacity-100' : 'opacity-0')}>\n          <button type=\"button\"\n            className=\"flex items-center justify-center w-14 h-14 rounded-full bg-black/50 backdrop-blur-md text-white active:scale-95 transition-all duration-200 touch-manipulation\"\n            onClick={() => handleSeek('backward')} disabled={!state.duration}>\n            <SkipBack className=\"h-6 w-6\" />\n          </button>\n\n          <button type=\"button\"\n            className=\"flex items-center justify-center w-[72px] h-[72px] rounded-full bg-black/60 backdrop-blur-md text-white active:scale-90 transition-all duration-200 touch-manipulation\"\n            onClick={() => { state.isPlaying ? controls.pause() : controls.play(); showControlsTemporarily(); }}\n            disabled={!state.duration && !state.isLoading}>\n            {state.isLoading ? <Loader2 className=\"h-9 w-9 animate-spin\" />\n              : state.isPlaying ? <Pause className=\"h-9 w-9\" />\n              : <Play className=\"h-9 w-9 ml-0.5\" />}\n          </button>\n\n          <button type=\"button\"\n            className=\"flex items-center justify-center w-14 h-14 rounded-full bg-black/50 backdrop-blur-md text-white active:scale-95 transition-all duration-200 touch-manipulation\"\n            onClick={() => handleSeek('forward')} disabled={!state.duration}>\n            <SkipForward className=\"h-6 w-6\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Bottom area */}\n      <div className={cn('transition-opacity duration-300', isVisible ? 'opacity-100' : 'opacity-0')}>\n        {/* ─── Progress Bar (on top of bubbles) ─── */}\n        <div\n          ref={progressRef}\n          className=\"group/progress relative w-full cursor-pointer touch-manipulation\"\n          onClick={handleProgressClick}\n          onMouseMove={handleProgressHover}\n          onMouseDown={handleProgressMouseDown}\n          onMouseLeave={() => { if (!isDragging) setHoverTime(null); }}\n          onTouchStart={handleProgressTouchStart}\n          role=\"slider\"\n          aria-valuemin={0}\n          aria-valuemax={state.duration || 0}\n          aria-valuenow={displayTime}\n          aria-valuetext={`${formatTime(displayTime)} of ${formatTime(state.duration)}`}\n          tabIndex={0}\n        >\n          {/* Hover/touch tooltip */}\n          {hoverTime !== null && !thumbnailPreview && (\n            <div className=\"absolute bottom-full mb-3 -translate-x-1/2 bg-black/90 backdrop-blur-sm text-white px-2.5 py-1 rounded-md text-xs font-medium pointer-events-none z-10 whitespace-nowrap shadow-lg\"\n              style={{ left: `${hoverX}%` }}>\n              {formatTime(hoverTime)}\n            </div>\n          )}\n          {thumbnailPreview && hoverTime !== null && (\n            <div className=\"absolute bottom-full mb-2\" style={{ left: `${hoverX}%`, transform: 'translateX(-50%)' }}>\n              <VideoThumbnail duration={state.duration} currentTime={hoverTime}\n                thumbnailUrl={thumbnailUrl} isMobile={true} thumbnailSize={{ width: 120, height: 68 }} />\n            </div>\n          )}\n\n          <div className=\"h-5 flex items-end\">\n            <div className={cn('relative w-full transition-all duration-150',\n              isDragging ? 'h-[5px]' : 'h-[3px] group-hover/progress:h-[5px]')}>\n              <div className=\"absolute inset-0 bg-white/20\" />\n              <div className=\"absolute left-0 top-0 h-full bg-white/40\" style={{ width: `${bufferedPercentage}%` }} />\n              <div className=\"absolute left-0 top-0 h-full bg-red-600\" style={{ width: `${progressPercentage}%` }} />\n              {hoverTime !== null && (\n                <div className=\"absolute top-0 h-full w-[2px] bg-white/60 pointer-events-none\" style={{ left: `${hoverX}%` }} />\n              )}\n              <div className={cn(\n                'absolute top-1/2 w-[14px] h-[14px] bg-red-600 rounded-full -translate-y-1/2 transition-all duration-150 shadow-md',\n                isDragging ? 'opacity-100 scale-110' : 'opacity-0 group-hover/progress:opacity-100 group-hover/progress:scale-100'\n              )} style={{ left: `calc(${progressPercentage}% - 7px)` }} />\n            </div>\n          </div>\n        </div>\n\n        {/* ─── Bottom Bubble Row ─── */}\n        <div className=\"flex items-center gap-1.5 px-2 pb-2 pt-0.5\">\n          {/* Left Bubble: Time */}\n          <div className=\"flex items-center rounded-full bg-black/60 backdrop-blur-md px-3 h-10 sm:h-11\">\n            <span className=\"text-white text-[11px] sm:text-xs tabular-nums whitespace-nowrap\">\n              {formatTime(displayTime)} <span className=\"text-white/50\">/</span> {formatTime(state.duration)}\n            </span>\n          </div>\n\n          <div className=\"flex-1 min-w-0\" />\n\n          {/* Right Bubble: Volume + Settings + Fullscreen */}\n          <div className=\"flex items-center rounded-full bg-black/60 backdrop-blur-md\">\n            <button type=\"button\" onClick={controls.toggleMute}\n              title={state.isMuted ? 'Unmute' : 'Mute'} className={iconBtnClass}>\n              <VolumeIcon className={iconClass} />\n            </button>\n\n            <button type=\"button\"\n              onClick={() => { setShowSettings(!showSettings); setSettingsPage('main'); }}\n              title=\"Settings\" className={cn(iconBtnClass, showSettings && 'bg-white/10')}>\n              <Settings className={cn(iconClass, 'transition-transform duration-300', showSettings && 'rotate-45')} />\n            </button>\n\n            <button type=\"button\" onClick={() => controls.toggleFullscreen()}\n              title={state.isFullscreen ? 'Exit Fullscreen' : 'Fullscreen'} className={iconBtnClass}>\n              {state.isFullscreen ? <Minimize className={iconClass} /> : <Maximize className={iconClass} />}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* ─── Bottom Sheet Settings ─── */}\n      {showSettings && (\n        <div className=\"absolute bottom-0 left-0 right-0 z-50 animate-in slide-in-from-bottom duration-200\"\n          onClick={(e) => e.stopPropagation()}>\n          <div className=\"bg-neutral-900/95 backdrop-blur-lg rounded-t-2xl overflow-hidden\"\n            style={{ paddingBottom: 'max(1rem, env(safe-area-inset-bottom))' }}>\n\n            {/* Header */}\n            <div className=\"flex items-center justify-between px-4 py-3 border-b border-white/10\">\n              <h3 className=\"text-sm font-medium text-white\">\n                {settingsPage === 'main' && 'Settings'}\n                {settingsPage === 'quality' && 'Quality'}\n                {settingsPage === 'speed' && 'Playback Speed'}\n              </h3>\n              <button type=\"button\"\n                onClick={() => { settingsPage === 'main' ? setShowSettings(false) : setSettingsPage('main'); }}\n                className=\"flex items-center justify-center w-8 h-8 rounded-full hover:bg-white/10 text-white/70\">\n                {settingsPage === 'main'\n                  ? <X className=\"w-5 h-5\" />\n                  : <ChevronRight className=\"w-5 h-5 rotate-180\" />}\n              </button>\n            </div>\n\n            {/* Main */}\n            {settingsPage === 'main' && (\n              <div className=\"py-1\">\n                {qualityLevels.length > 0 && (\n                  <button type=\"button\"\n                    className=\"flex items-center justify-between w-full px-4 py-3 hover:bg-white/5 active:bg-white/10 transition-colors touch-manipulation\"\n                    onClick={() => setSettingsPage('quality')}>\n                    <div className=\"flex items-center gap-3\">\n                      <Settings className=\"w-5 h-5 text-white/70\" />\n                      <span className=\"text-sm text-white\">Quality</span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <span className=\"text-sm text-white/50\">{state.quality === 'auto' ? 'Auto' : state.quality}</span>\n                      <ChevronRight className=\"w-4 h-4 text-white/40\" />\n                    </div>\n                  </button>\n                )}\n                <button type=\"button\"\n                  className=\"flex items-center justify-between w-full px-4 py-3 hover:bg-white/5 active:bg-white/10 transition-colors touch-manipulation\"\n                  onClick={() => setSettingsPage('speed')}>\n                  <div className=\"flex items-center gap-3\">\n                    <Gauge className=\"w-5 h-5 text-white/70\" />\n                    <span className=\"text-sm text-white\">Playback speed</span>\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <span className=\"text-sm text-white/50\">{state.playbackRate === 1 ? 'Normal' : `${state.playbackRate}x`}</span>\n                    <ChevronRight className=\"w-4 h-4 text-white/40\" />\n                  </div>\n                </button>\n\n                {/* Volume slider */}\n                <div className=\"px-4 py-3\">\n                  <div className=\"flex items-center gap-3\">\n                    <button type=\"button\" onClick={controls.toggleMute} className=\"flex-shrink-0\">\n                      <VolumeIcon className=\"w-5 h-5 text-white/70\" />\n                    </button>\n                    <Slider min={0} max={100} step={1}\n                      value={[Math.round((state.isMuted ? 0 : state.volume) * 100)]}\n                      onValueChange={(v) => { if (Number.isFinite(v[0])) controls.setVolume(v[0] / 100); }}\n                      className=\"flex-1 [&_[data-slot=slider-track]]:bg-white/20 [&_[data-slot=slider-track]]:h-1 [&_[data-slot=slider-range]]:bg-white [&_[data-slot=slider-thumb]]:bg-white [&_[data-slot=slider-thumb]]:border-white [&_[data-slot=slider-thumb]]:size-4\"\n                    />\n                    <span className=\"text-xs text-white/50 tabular-nums w-8 text-right\">\n                      {Math.round((state.isMuted ? 0 : state.volume) * 100)}%\n                    </span>\n                  </div>\n                </div>\n\n                {/* PiP */}\n                {typeof document !== 'undefined' && 'pictureInPictureEnabled' in document && (\n                  <button type=\"button\"\n                    className=\"flex items-center w-full px-4 py-3 hover:bg-white/5 active:bg-white/10 transition-colors touch-manipulation\"\n                    onClick={() => { controls.togglePictureInPicture(); setShowSettings(false); }}>\n                    <PictureInPicture className=\"w-5 h-5 text-white/70 mr-3\" />\n                    <span className=\"text-sm text-white\">Picture-in-Picture</span>\n                  </button>\n                )}\n              </div>\n            )}\n\n            {/* Quality */}\n            {settingsPage === 'quality' && (\n              <div className=\"py-1 max-h-64 overflow-y-auto animate-in slide-in-from-right-4 duration-200\">\n                {qualityLevels.map((level) => (\n                  <button key={level.id} type=\"button\"\n                    className=\"flex items-center w-full px-4 py-3 hover:bg-white/5 active:bg-white/10 transition-colors touch-manipulation\"\n                    onClick={() => { controls.setQuality(level.id); setSettingsPage('main'); }}>\n                    <span className=\"w-6 flex-shrink-0\">\n                      {state.quality === level.label && <Check className=\"w-4 h-4 text-white\" />}\n                    </span>\n                    <span className={cn('text-sm', state.quality === level.label ? 'text-white font-medium' : 'text-white/80')}>\n                      {level.label}\n                    </span>\n                  </button>\n                ))}\n              </div>\n            )}\n\n            {/* Speed */}\n            {settingsPage === 'speed' && (\n              <div className=\"py-1 animate-in slide-in-from-right-4 duration-200\">\n                {playbackRateOptions.map((opt) => (\n                  <button key={opt.value} type=\"button\"\n                    className=\"flex items-center w-full px-4 py-3 hover:bg-white/5 active:bg-white/10 transition-colors touch-manipulation\"\n                    onClick={() => { controls.setPlaybackRate(opt.value); setSettingsPage('main'); }}>\n                    <span className=\"w-6 flex-shrink-0\">\n                      {state.playbackRate === opt.value && <Check className=\"w-4 h-4 text-white\" />}\n                    </span>\n                    <span className={cn('text-sm', state.playbackRate === opt.value ? 'text-white font-medium' : 'text-white/80')}>\n                      {opt.label}\n                    </span>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","/**\n * Video thumbnail preview component for mobile and desktop\n * Shows thumbnail images on progress bar hover/touch\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface VideoThumbnailProps {\n  /** Current video duration in seconds */\n  duration: number;\n  /** Current time position for thumbnail */\n  currentTime: number;\n  /** Base URL for thumbnail images */\n  thumbnailUrl?: string;\n  /** Number of thumbnails per sprite sheet (optional) */\n  thumbnailCount?: number;\n  /** Thumbnail dimensions */\n  thumbnailSize?: {\n    width: number;\n    height: number;\n  };\n  /** CSS classes */\n  className?: string;\n  /** Show time overlay */\n  showTime?: boolean;\n  /** Mobile optimized */\n  isMobile?: boolean;\n}\n\n// Format time in MM:SS format\nconst formatTime = (seconds: number): string => {\n  if (!isFinite(seconds)) return '0:00';\n  \n  const mins = Math.floor(seconds / 60);\n  const secs = Math.floor(seconds % 60);\n  return `${mins}:${secs.toString().padStart(2, '0')}`;\n};\n\nexport const VideoThumbnail: React.FC<VideoThumbnailProps> = ({\n  duration,\n  currentTime,\n  thumbnailUrl,\n  thumbnailCount = 100,\n  thumbnailSize = { width: 160, height: 90 },\n  className,\n  showTime = true,\n  isMobile = false,\n}) => {\n  const [thumbnailSrc, setThumbnailSrc] = useState<string>('');\n  const [spritePosition, setSpritePosition] = useState({ x: 0, y: 0 });\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  // Generate thumbnail URL based on time\n  useEffect(() => {\n    if (!thumbnailUrl || !duration) return;\n\n    // Calculate thumbnail index based on current time\n    const progress = Math.max(0, Math.min(1, currentTime / duration));\n    const thumbnailIndex = Math.floor(progress * (thumbnailCount - 1));\n    \n    // If using sprite sheets, calculate position\n    if (thumbnailUrl.includes('sprite')) {\n      const spriteCols = 10; // Assuming 10x10 grid\n      const spriteRows = Math.ceil(thumbnailCount / spriteCols);\n      \n      const col = thumbnailIndex % spriteCols;\n      const row = Math.floor(thumbnailIndex / spriteCols);\n      \n      setSpritePosition({\n        x: col * thumbnailSize.width,\n        y: row * thumbnailSize.height\n      });\n      \n      setThumbnailSrc(thumbnailUrl);\n    } else {\n      // Individual thumbnail files\n      const paddedIndex = thumbnailIndex.toString().padStart(3, '0');\n      setThumbnailSrc(`${thumbnailUrl}/thumb_${paddedIndex}.jpg`);\n    }\n  }, [currentTime, duration, thumbnailUrl, thumbnailCount, thumbnailSize]);\n\n  // Generate fallback thumbnail from video frame\n  const generateFallbackThumbnail = async (videoSrc: string, time: number) => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    const video = document.createElement('video');\n    video.crossOrigin = 'anonymous';\n    video.muted = true;\n    \n    return new Promise<string>((resolve) => {\n      video.onloadeddata = () => {\n        video.currentTime = time;\n      };\n      \n      video.onseeked = () => {\n        canvas.width = thumbnailSize.width;\n        canvas.height = thumbnailSize.height;\n        \n        ctx.drawImage(video, 0, 0, thumbnailSize.width, thumbnailSize.height);\n        const dataURL = canvas.toDataURL('image/jpeg', 0.8);\n        resolve(dataURL);\n      };\n      \n      video.src = videoSrc;\n    });\n  };\n\n  if (!thumbnailSrc && !thumbnailUrl) {\n    return null;\n  }\n\n  return (\n    <div\n      className={cn(\n        'absolute bottom-6 transform -translate-x-1/2 pointer-events-none z-20',\n        'bg-black/90 backdrop-blur-sm rounded-lg overflow-hidden shadow-lg border border-white/20',\n        isMobile ? 'bottom-12' : 'bottom-6',\n        className\n      )}\n      style={{ \n        width: thumbnailSize.width + 16, \n        height: thumbnailSize.height + (showTime ? 40 : 16)\n      }}\n    >\n      {/* Thumbnail Image */}\n      <div \n        className=\"relative bg-gray-800\"\n        style={{ \n          width: thumbnailSize.width, \n          height: thumbnailSize.height,\n          margin: '8px 8px 0 8px'\n        }}\n      >\n        {thumbnailSrc ? (\n          <img\n            src={thumbnailSrc}\n            alt={`Preview at ${formatTime(currentTime)}`}\n            className=\"w-full h-full object-cover rounded\"\n            style={\n              thumbnailUrl?.includes('sprite') ? {\n                objectPosition: `-${spritePosition.x}px -${spritePosition.y}px`,\n                width: thumbnailSize.width * 10, // Sprite sheet width\n                height: thumbnailSize.height * 10, // Sprite sheet height\n              } : undefined\n            }\n            onError={() => {\n              // Fallback to placeholder or generated thumbnail\n              setThumbnailSrc(`/api/placeholder/${thumbnailSize.width}/${thumbnailSize.height}`);\n            }}\n          />\n        ) : (\n          <div className=\"w-full h-full bg-gray-700 flex items-center justify-center rounded\">\n            <div className=\"text-white/60 text-xs\">Loading...</div>\n          </div>\n        )}\n        \n        {/* Loading overlay */}\n        <div className=\"absolute inset-0 bg-black/20 rounded\" />\n      </div>\n\n      {/* Time Display */}\n      {showTime && (\n        <div className=\"px-3 py-2 text-center\">\n          <span className=\"text-white text-sm font-medium\">\n            {formatTime(currentTime)}\n          </span>\n        </div>\n      )}\n\n      {/* Pointer arrow */}\n      <div className=\"absolute -bottom-1 left-1/2 transform -translate-x-1/2\">\n        <div className=\"w-3 h-3 bg-black/90 rotate-45 border-r border-b border-white/20\" />\n      </div>\n\n      {/* Hidden canvas for fallback thumbnail generation */}\n      <canvas ref={canvasRef} className=\"hidden\" />\n    </div>\n  );\n};\n\nexport default VideoThumbnail;\n","'use client';\n\nimport React, { useState } from 'react';\nimport { ConfigurableVideoPlayer } from '@/components/player/configurable-video-player';\nimport { VideoSourceSelector, type VideoSource } from '@/components/demo/video-source-selector';\nimport { PlayerStats } from '@/components/demo/player-stats';\nimport { FeatureList } from '@/components/demo/feature-list';\nimport { PlayerConfigProvider } from '@/contexts/player-config-context';\nimport { VideoPlayerState } from '@/hooks/use-video-player';\n\nexport const VideoPlayerDemo: React.FC = () => {\n  const videoSources: VideoSource[] = [\n    {\n      id: 'bigbuck',\n      name: 'Big Buck Bunny (MP4)',\n      url: 'https://samplelib.com/lib/preview/mp4/sample-10s.mp4',\n      format: 'MP4',\n      quality: 'HD',\n      size: '5.3MB',\n      description: 'High quality demo video',\n      features: ['MP4', 'HD Quality'],\n      poster: '/api/placeholder/1280/720',\n    },\n    {\n      id: 'elephant',\n      name: 'Elephant Dream (MP4)',\n      url: 'https://samplelib.com/lib/preview/mp4/sample-15s.mp4',\n      format: 'MP4',\n      quality: 'HD',\n      size: '11.3MB',\n      description: 'Animation showcase',\n      features: ['MP4', 'Animation'],\n      poster: '/api/placeholder/1280/720',\n    },\n    {\n      id: 'sintel',\n      name: 'Sintel (MP4)',\n      url: 'https://samplelib.com/lib/preview/mp4/sample-20s.mp4',\n      format: 'MP4',\n      quality: 'HD',\n      size: '11.2MB',\n      description: 'Blender Foundation movie',\n      features: ['MP4', 'Short Film'],\n      poster: '/api/placeholder/1280/720',\n    },\n  ];\n\n  const [selectedVideo, setSelectedVideo] = useState(videoSources[0]);\n  const [isPlayerReady, setIsPlayerReady] = useState(false);\n  const [playerState, setPlayerState] = useState<VideoPlayerState>({\n    isPlaying: false,\n    isPaused: true,\n    isLoading: false,\n    isMuted: false,\n    currentTime: 0,\n    duration: 0,\n    volume: 1,\n    buffered: 0,\n    quality: 'auto',\n    playbackRate: 1,\n    isFullscreen: false,\n    isPictureInPicture: false,\n    isTheaterMode: false,\n    error: null,\n    // Analytics data\n    playCount: 0,\n    totalWatchTime: 0,\n    bufferingTime: 0,\n    averageBitrate: 0,\n    qualityChanges: 0,\n  });\n\n  return (\n    <PlayerConfigProvider>\n      <div className=\"grid lg:grid-cols-3 gap-8\">\n        {/* Video Player */}\n        <div className=\"lg:col-span-2\">\n          <VideoSourceSelector\n            sources={videoSources}\n            selectedSource={selectedVideo}\n            onSourceChange={setSelectedVideo}\n            className=\"mb-6\"\n          />\n          \n          <ConfigurableVideoPlayer\n            src={selectedVideo.url}\n            poster={selectedVideo.poster}\n            autoPlay={false}\n            muted={false}\n            onReady={() => setIsPlayerReady(true)}\n            onStateChange={setPlayerState}\n            className=\"w-full shadow-2xl\"\n          />\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"space-y-6\">\n          <PlayerStats state={playerState} />\n          <FeatureList />\n        </div>\n      </div>\n    </PlayerConfigProvider>\n  );\n};\n","\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { getPlayerLogger } from '@/lib/logger';\nimport { FileVideo, Play, Download, Info, AlertTriangle } from 'lucide-react';\n\nexport interface VideoSource {\n  id: string;\n  name: string;\n  url: string;\n  fallbackUrls?: string[];\n  format: string;\n  quality: string;\n  size: string;\n  description: string;\n  features: string[];\n  poster?: string; // Optional poster image URL\n  thumbnailUrl?: string; // Optional thumbnail preview URL\n  aspectRatio?: string; // Video aspect ratio (16/9, 9/16, 1/1, etc.)\n}\n\ninterface VideoSourceSelectorProps {\n  sources?: VideoSource[];\n  selectedSource?: VideoSource;\n  onSourceChange?: (source: VideoSource) => void;\n  videoSources?: VideoSource[];\n  selectedVideo?: VideoSource;\n  onVideoSelect?: (source: VideoSource) => void;\n  onSourceSelect?: (source: VideoSource) => Promise<void> | void;\n  currentSource?: string;\n  className?: string;\n}\n\n// Simple format support check that's SSR-safe\nconst isVideoFormatSupportedSimple = (url: string): boolean => {\n  if (typeof window === 'undefined') {\n    return true; // During SSR, assume all formats are supported\n  }\n  \n  // Basic format detection based on URL extension\n  const extension = url.split('.').pop()?.toLowerCase().split('?')[0];\n  \n  // Most common video formats\n  const supportedFormats = ['mp4', 'webm', 'ogg', 'm3u8', 'mpd'];\n  return supportedFormats.includes(extension || '');\n};\n\nconst videoSources: VideoSource[] = [\n  {\n    id: 'html5-test',\n    name: 'HTML5 Test Video',\n    url: 'https://www.w3schools.com/html/mov_bbb.mp4',\n    format: 'MP4',\n    quality: '320p',\n    size: '1.1MB',\n    description: 'W3Schools HTML5 test video - guaranteed to work',\n    features: ['Reliable', 'Small Size', 'Educational']\n  },\n  {\n    id: 'sintel-480p',\n    name: 'MP4 - Sintel (480p)',\n    url: 'https://samplelib.com/lib/preview/mp4/sample-5s.mp4',\n    format: 'MP4',\n    quality: '480p',\n    size: '2.8MB',\n    description: 'SampleLib short MP4 sample',\n    features: ['Reliable', 'HTTPS', 'Quick Load']\n  },\n  {\n    id: 'tears-steel-480p',\n    name: 'MP4 - Tears of Steel (480p)',\n    url: 'https://samplelib.com/lib/preview/mp4/sample-10s.mp4',\n    format: 'MP4',\n    quality: '480p',\n    size: '5.3MB',\n    description: 'SampleLib medium-length MP4 sample',\n    features: ['Reliable', 'HTTPS', 'MP4']\n  },\n  {\n    id: 'elephant-dream',\n    name: 'MP4 - Elephant\\'s Dream',\n    url: 'https://samplelib.com/lib/preview/mp4/sample-15s.mp4',\n    format: 'MP4',\n    quality: '720p',\n    size: '11.3MB',\n    description: 'SampleLib long MP4 sample',\n    features: ['Reliable', 'HTTPS', 'Longer Clip']\n  },\n  {\n    id: 'mp4-big-buck-bunny',\n    name: 'MP4 - Big Buck Bunny',\n    url: 'https://samplelib.com/lib/preview/mp4/sample-20s.mp4',\n    format: 'MP4',\n    quality: '720p',\n    size: '11.2MB',\n    description: 'Longer MP4 test clip for compatibility validation',\n    features: ['Reliable', 'HTTPS', 'Single Quality']\n  },\n  {\n    id: 'hls-apple-basic',\n    name: 'HLS - Apple Basic Stream',\n    url: 'https://devstreaming-cdn.apple.com/videos/streaming/examples/img_bipbop_adv_example_fmp4/master.m3u8',\n    format: 'HLS (.m3u8)',\n    quality: 'Adaptive',\n    size: '~30s',\n    description: 'Apple\\'s official HLS test stream',\n    features: ['Apple Official', 'Multiple Qualities', 'Reliable']\n  }\n];\n\nexport const VideoSourceSelector: React.FC<VideoSourceSelectorProps> = ({\n  videoSources: propVideoSources,\n  selectedVideo,\n  onVideoSelect,\n  onSourceSelect,\n  currentSource,\n  className = \"\"\n}) => {\n  const [isLoading, setIsLoading] = useState<string | null>(null);\n  const [mounted, setMounted] = useState(false);\n  const [erroredSources, setErroredSources] = useState<Set<string>>(new Set());\n\n  // Use prop video sources or fallback to default\n  const sources = propVideoSources || videoSources;\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  const handleSourceSelect = async (source: VideoSource) => {\n    if (isLoading) {\n      return; // Prevent double clicks\n    }\n    \n    getPlayerLogger().info('Selecting video source:', source.name, source.url);\n    setIsLoading(source.id);\n    \n    // Remove from errored sources if user is retrying\n    if (erroredSources.has(source.id)) {\n      const newErroredSources = new Set(erroredSources);\n      newErroredSources.delete(source.id);\n      setErroredSources(newErroredSources);\n    }\n    \n    try {\n      // Call the appropriate callback\n      if (onVideoSelect) {\n        onVideoSelect(source);\n      } else if (onSourceSelect) {\n        await onSourceSelect(source);\n      }\n    } catch (error) {\n      getPlayerLogger().error('Error selecting source:', error);\n      // Mark this source as errored\n      setErroredSources(prev => new Set([...prev, source.id]));\n    } finally {\n      // Clear loading state after a short delay\n      setTimeout(() => setIsLoading(null), 1000);\n    }\n  };\n\n  const getFormatColor = (format: string) => {\n    switch (format.toLowerCase()) {\n      case 'hls (.m3u8)':\n        return 'bg-blue-500 text-white';\n      case 'dash (.mpd)':\n        return 'bg-green-500 text-white';\n      case 'mp4':\n        return 'bg-purple-500 text-white';\n      case 'webm':\n        return 'bg-orange-500 text-white';\n      default:\n        return 'bg-gray-500 text-white';\n    }\n  };\n\n  const getQualityColor = (quality: string) => {\n    switch (quality.toLowerCase()) {\n      case 'adaptive':\n        return 'bg-emerald-500 text-white';\n      case '1080p':\n        return 'bg-blue-500 text-white';\n      case '720p':\n        return 'bg-cyan-500 text-white';\n      case '480p':\n        return 'bg-yellow-500 text-white';\n      default:\n        return 'bg-gray-500 text-white';\n    }\n  };\n\n  if (!mounted) {\n    return (\n      <div className={className}>\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <FileVideo className=\"h-5 w-5\" />\n              Video Format Showcase\n            </CardTitle>\n            <p className=\"text-sm text-muted-foreground\">\n              Loading video formats...\n            </p>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {[1, 2, 3, 4, 5, 6].map((i) => (\n                <div key={i} className=\"border rounded-lg p-4 animate-pulse\">\n                  <div className=\"h-4 bg-gray-200 rounded mb-2\"></div>\n                  <div className=\"h-3 bg-gray-200 rounded mb-2\"></div>\n                  <div className=\"h-3 bg-gray-200 rounded\"></div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className={className}>\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <FileVideo className=\"h-5 w-5\" />\n            Video Format Showcase\n          </CardTitle>\n          <p className=\"text-sm text-muted-foreground\">\n            Test different video formats and streaming protocols to explore all features\n          </p>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {sources.map((source) => {\n              const isSupported = isVideoFormatSupportedSimple(source.url);\n              const hasError = erroredSources.has(source.id);\n              const isSelected = selectedVideo?.id === source.id || currentSource === source.url;\n              \n              return (\n                <div\n                  key={source.id}\n                  className={`border rounded-lg p-4 cursor-pointer transition-all hover:shadow-md ${\n                    isSelected\n                      ? 'border-blue-500 bg-blue-50 dark:bg-blue-950'\n                      : hasError\n                        ? 'border-red-300 bg-red-50 dark:bg-red-950/30'\n                        : isSupported \n                          ? 'border-gray-200 hover:border-gray-300'\n                          : 'border-red-200 bg-red-50 dark:bg-red-950 opacity-75'\n                  } ${isLoading === source.id ? 'opacity-50 pointer-events-none' : ''}`}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    if ((isSupported || hasError) && !isLoading) {\n                      handleSourceSelect(source);\n                    }\n                  }}\n                >\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-start justify-between\">\n                      <h3 className=\"font-medium text-sm leading-tight\">{source.name}</h3>\n                      <div className=\"flex items-center gap-1\">\n                        {currentSource === source.url && (\n                          <Play className=\"h-4 w-4 text-blue-500 flex-shrink-0\" />\n                        )}\n                        {hasError && (\n                          <AlertTriangle className=\"h-4 w-4 text-red-500 flex-shrink-0\" />\n                        )}\n                        {!isSupported && !hasError && (\n                          <AlertTriangle className=\"h-4 w-4 text-red-500 flex-shrink-0\" />\n                        )}\n                      </div>\n                    </div>\n\n                    <div className=\"flex gap-2 flex-wrap\">\n                      <Badge className={`text-xs ${getFormatColor(source.format)}`}>\n                        {source.format}\n                      </Badge>\n                      <Badge className={`text-xs ${getQualityColor(source.quality)}`}>\n                        {source.quality}\n                      </Badge>\n                      {source.fallbackUrls && source.fallbackUrls.length > 0 && (\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          Failover\n                        </Badge>\n                      )}\n                      {source.aspectRatio && (\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {source.aspectRatio === '16/9' ? '📺 Landscape' :\n                           source.aspectRatio === '9/16' ? '📱 Vertical' :\n                           source.aspectRatio === '1/1' ? '⬜ Square' :\n                           source.aspectRatio}\n                        </Badge>\n                      )}\n                    </div>\n\n                    <p className=\"text-xs text-muted-foreground line-clamp-2\">\n                      {hasError ? \"⚠️ This video failed to load. Click 'Retry' to try again.\" : source.description}\n                    </p>\n\n                    <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                      {source.size && (\n                        <div className=\"flex items-center gap-1\">\n                          <Download className=\"h-3 w-3\" />\n                          {source.size}\n                        </div>\n                      )}\n                      <div className=\"flex items-center gap-1\">\n                        <Info className=\"h-3 w-3\" />\n                        {source.features.length} features\n                      </div>\n                    </div>\n\n                    <div className=\"space-y-1\">\n                      {source.features.slice(0, 2).map((feature, index) => (\n                        <div key={index} className=\"flex items-center gap-1\">\n                          <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full\" />\n                          <span className=\"text-xs text-muted-foreground\">{feature}</span>\n                        </div>\n                      ))}\n                      {source.features.length > 2 && (\n                        <div className=\"text-xs text-muted-foreground\">\n                          +{source.features.length - 2} more features\n                        </div>\n                      )}\n                    </div>\n\n                    <Button \n                      size=\"sm\" \n                      className=\"w-full mt-2\"\n                      variant={currentSource === source.url ? \"default\" : hasError ? \"destructive\" : \"outline\"}\n                      disabled={(!isSupported && !hasError) || isLoading === source.id}\n                      onClick={(e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        if ((isSupported || hasError) && !isLoading) {\n                          handleSourceSelect(source);\n                        }\n                      }}\n                    >\n                      {isLoading === source.id ? \"Loading...\" :\n                       hasError ? \"Retry\" :\n                       !isSupported ? \"Not Supported\" : \n                       currentSource === source.url ? \"Playing\" : \"Load Video\"}\n                    </Button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Button = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> &\n    VariantProps<typeof buttonVariants> & {\n      asChild?: boolean\n    }\n>(({ className, variant, size, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n})\n\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","import React from 'react';\nimport { VideoPlayerState } from '@/hooks/use-video-player';\n\ninterface PlayerStatsProps {\n  state: VideoPlayerState;\n}\n\nexport const PlayerStats: React.FC<PlayerStatsProps> = ({ state }) => {\n  return (\n    <div className=\"bg-gray-100 dark:bg-gray-800 rounded-lg p-4 space-y-2\">\n      <h3 className=\"font-semibold text-gray-900 dark:text-white\">Player Statistics</h3>\n      <div className=\"grid grid-cols-2 gap-4 text-sm\">\n        <div>\n          <span className=\"text-gray-600 dark:text-gray-400\">Current Time:</span>\n          <span className=\"ml-2 font-mono\">{state.currentTime.toFixed(2)}s</span>\n        </div>\n        <div>\n          <span className=\"text-gray-600 dark:text-gray-400\">Duration:</span>\n          <span className=\"ml-2 font-mono\">{state.duration.toFixed(2)}s</span>\n        </div>\n        <div>\n          <span className=\"text-gray-600 dark:text-gray-400\">Volume:</span>\n          <span className=\"ml-2 font-mono\">{Math.round(state.volume * 100)}%</span>\n        </div>\n        <div>\n          <span className=\"text-gray-600 dark:text-gray-400\">Quality:</span>\n          <span className=\"ml-2 font-mono\">{state.quality}</span>\n        </div>\n        <div>\n          <span className=\"text-gray-600 dark:text-gray-400\">Buffered:</span>\n          <span className=\"ml-2 font-mono\">{Math.round(state.buffered * 100)}%</span>\n        </div>\n        <div>\n          <span className=\"text-gray-600 dark:text-gray-400\">Playback Rate:</span>\n          <span className=\"ml-2 font-mono\">{state.playbackRate}x</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Check } from 'lucide-react';\n\ninterface Feature {\n  name: string;\n  description: string;\n  enabled: boolean;\n}\n\nconst features: Feature[] = [\n  { name: 'HLS Streaming', description: 'HTTP Live Streaming support', enabled: true },\n  { name: 'DASH Streaming', description: 'Dynamic Adaptive Streaming', enabled: true },\n  { name: 'Mobile Gestures', description: 'Touch-optimized controls', enabled: true },\n  { name: 'Thumbnail Preview', description: 'Timeline hover previews', enabled: true },\n  { name: 'Quality Selection', description: 'Manual quality control', enabled: true },\n  { name: 'Fullscreen', description: 'Full viewport playback', enabled: true },\n  { name: 'Picture-in-Picture', description: 'PiP mode support', enabled: true },\n  { name: 'Keyboard Shortcuts', description: 'Hotkey navigation', enabled: true },\n  { name: 'Analytics', description: 'Playback tracking', enabled: true },\n  { name: 'Auto-hide Controls', description: 'Clean viewing experience', enabled: true },\n];\n\nexport const FeatureList: React.FC = () => {\n  return (\n    <div className=\"bg-gray-100 dark:bg-gray-800 rounded-lg p-4\">\n      <h3 className=\"font-semibold text-gray-900 dark:text-white mb-4\">Features</h3>\n      <div className=\"grid gap-2\">\n        {features.map((feature, index) => (\n          <div key={index} className=\"flex items-center space-x-3\">\n            <div className={`w-4 h-4 rounded-full flex items-center justify-center ${\n              feature.enabled ? 'bg-green-100 text-green-600' : 'bg-gray-100 text-gray-400'\n            }`}>\n              {feature.enabled && <Check className=\"w-3 h-3\" />}\n            </div>\n            <div className=\"flex-1\">\n              <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                {feature.name}\n              </div>\n              <div className=\"text-xs text-gray-600 dark:text-gray-400\">\n                {feature.description}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n","'use client';\n\nimport React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Switch } from '@/components/ui/switch';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Separator } from '@/components/ui/separator';\nimport { usePlayerConfig } from '@/contexts/player-config-context';\nimport type { AutoBehavior, ControlsVisibility, PlayerConfiguration } from '@/types/player-config';\nimport { Settings, Keyboard, Smartphone, Zap, Save, RotateCcw } from 'lucide-react';\n\nexport const PlayerConfigPanel: React.FC = () => {\n  const { config, updateConfig, resetConfig, saveConfig, loadSavedConfig, getSavedConfigs } = usePlayerConfig();\n  const [saveConfigName, setSaveConfigName] = useState('');\n\n  const savedConfigs = getSavedConfigs();\n\n  const handleControlVisibilityChange = (control: keyof ControlsVisibility, enabled: boolean) => {\n    updateConfig({\n      controls: {\n        ...config.controls,\n        visibility: {\n          ...config.controls?.visibility,\n          [control]: enabled,\n        },\n      },\n    });\n  };\n\n  const handleAutoChange = <K extends keyof AutoBehavior>(property: K, value: AutoBehavior[K]) => {\n    updateConfig({\n      auto: {\n        ...config.auto,\n        [property]: value,\n      },\n    });\n  };\n\n  const handleGestureChange = (property: string, value: boolean) => {\n    updateConfig({\n      gestures: {\n        ...config.gestures,\n        [property]: value,\n      },\n    });\n  };\n\n  const controlLabels: Record<keyof ControlsVisibility, string> = {\n    playPause: 'Play/Pause Button',\n    progress: 'Progress Bar',\n    volume: 'Volume Control',\n    quality: 'Quality Selector',\n    fullscreen: 'Fullscreen Toggle',\n    pictureInPicture: 'Picture-in-Picture',\n    theaterMode: 'Theater Mode',\n    playbackRate: 'Playback Speed',\n    keyboardShortcuts: 'Keyboard Shortcuts',\n    settings: 'Settings Menu',\n    time: 'Time Display',\n  };\n\n  return (\n    <Card className=\"w-full max-w-4xl mx-auto\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Settings className=\"h-5 w-5\" />\n          Video Player Configuration\n        </CardTitle>\n        <div className=\"flex gap-2 flex-wrap\">\n          {savedConfigs.length > 0 && (\n            <Select onValueChange={loadSavedConfig}>\n              <SelectTrigger className=\"w-48\">\n                <SelectValue placeholder=\"Load Saved Config\" />\n              </SelectTrigger>\n              <SelectContent>\n                {savedConfigs.map((name) => (\n                  <SelectItem key={name} value={name}>\n                    {name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          )}\n          \n          <Button variant=\"outline\" onClick={resetConfig}>\n            <RotateCcw className=\"h-4 w-4 mr-2\" />\n            Reset\n          </Button>\n        </div>\n      </CardHeader>\n\n      <CardContent>\n        <Tabs defaultValue=\"controls\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"controls\">Controls</TabsTrigger>\n            <TabsTrigger value=\"behavior\">Behavior</TabsTrigger>\n            <TabsTrigger value=\"gestures\">Gestures</TabsTrigger>\n            <TabsTrigger value=\"save\">Save</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"controls\" className=\"space-y-6\">\n            <div>\n              <h3 className=\"text-lg font-medium mb-4\">Control Visibility</h3>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n                {Object.entries(controlLabels).map(([key, label]) => (\n                  <div key={key} className=\"flex items-center space-x-2\">\n                    <Switch\n                      id={key}\n                      checked={config.controls?.visibility?.[key as keyof ControlsVisibility] ?? true}\n                      onCheckedChange={(checked) => handleControlVisibilityChange(key as keyof ControlsVisibility, checked)}\n                    />\n                    <Label htmlFor={key} className=\"text-sm\">{label}</Label>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <Separator />\n\n            <div>\n              <h3 className=\"text-lg font-medium mb-4\">Control Layout</h3>\n              <div className=\"grid grid-cols-1 gap-4\">\n                <div>\n                  <Label htmlFor=\"size\">Size</Label>\n                  <Select\n                    value={config.controls?.size || 'medium'}\n                    onValueChange={(value) => updateConfig({\n                      controls: { ...config.controls, size: value as NonNullable<PlayerConfiguration['controls']>['size'] }\n                    })}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"small\">Small</SelectItem>\n                      <SelectItem value=\"medium\">Medium</SelectItem>\n                      <SelectItem value=\"large\">Large</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"behavior\" className=\"space-y-6\">\n            <div>\n              <h3 className=\"text-lg font-medium mb-4 flex items-center gap-2\">\n                <Zap className=\"h-5 w-5\" />\n                Auto Behaviors\n              </h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <Switch\n                    id=\"autoPlay\"\n                    checked={config.auto?.autoPlay ?? false}\n                    onCheckedChange={(checked) => handleAutoChange('autoPlay', checked)}\n                  />\n                  <Label htmlFor=\"autoPlay\">Auto Play</Label>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Switch\n                    id=\"autoHideControls\"\n                    checked={config.auto?.autoHideControls ?? true}\n                    onCheckedChange={(checked) => handleAutoChange('autoHideControls', checked)}\n                  />\n                  <Label htmlFor=\"autoHideControls\">Auto Hide Controls</Label>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Switch\n                    id=\"rememberVolume\"\n                    checked={config.auto?.rememberVolume ?? true}\n                    onCheckedChange={(checked) => handleAutoChange('rememberVolume', checked)}\n                  />\n                  <Label htmlFor=\"rememberVolume\">Remember Volume</Label>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Switch\n                    id=\"rememberPlaybackRate\"\n                    checked={config.auto?.rememberPlaybackRate ?? true}\n                    onCheckedChange={(checked) => handleAutoChange('rememberPlaybackRate', checked)}\n                  />\n                  <Label htmlFor=\"rememberPlaybackRate\">Remember Playback Rate</Label>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"autoHideDelay\">Auto Hide Delay (ms)</Label>\n                  <Input\n                    id=\"autoHideDelay\"\n                    type=\"number\"\n                    value={config.auto?.autoHideDelay || 3000}\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                      const parsed = Number.parseInt(e.target.value, 10);\n                      if (Number.isFinite(parsed)) {\n                        handleAutoChange('autoHideDelay', parsed);\n                      }\n                    }}\n                    min=\"1000\"\n                    max=\"10000\"\n                    step=\"500\"\n                  />\n                </div>\n              </div>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"gestures\" className=\"space-y-6\">\n            <div>\n              <h3 className=\"text-lg font-medium mb-4 flex items-center gap-2\">\n                <Smartphone className=\"h-5 w-5\" />\n                Touch Gestures\n              </h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <Switch\n                    id=\"gesturesEnabled\"\n                    checked={config.gestures?.enabled ?? true}\n                    onCheckedChange={(checked) => handleGestureChange('enabled', checked)}\n                  />\n                  <Label htmlFor=\"gesturesEnabled\">Enable Gestures</Label>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Switch\n                    id=\"tapToPlay\"\n                    checked={config.gestures?.tapToPlay ?? true}\n                    onCheckedChange={(checked) => handleGestureChange('tapToPlay', checked)}\n                  />\n                  <Label htmlFor=\"tapToPlay\">Tap to Play/Pause</Label>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Switch\n                    id=\"doubleTapSeek\"\n                    checked={config.gestures?.doubleTapSeek ?? true}\n                    onCheckedChange={(checked) => handleGestureChange('doubleTapSeek', checked)}\n                  />\n                  <Label htmlFor=\"doubleTapSeek\">Double Tap to Seek</Label>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Switch\n                    id=\"swipeVolume\"\n                    checked={config.gestures?.swipeVolume ?? false}\n                    onCheckedChange={(checked) => handleGestureChange('swipeVolume', checked)}\n                  />\n                  <Label htmlFor=\"swipeVolume\">Swipe for Volume</Label>\n                </div>\n              </div>\n            </div>\n\n            <Separator />\n\n            <div>\n              <h3 className=\"text-lg font-medium mb-4 flex items-center gap-2\">\n                <Keyboard className=\"h-5 w-5\" />\n                Keyboard Shortcuts\n              </h3>\n              <div className=\"flex items-center space-x-2\">\n                <Switch\n                  id=\"keyboardEnabled\"\n                  checked={config.keyboard?.enabled ?? true}\n                  onCheckedChange={(checked) => updateConfig({\n                    keyboard: { ...config.keyboard, enabled: checked }\n                  })}\n                />\n                <Label htmlFor=\"keyboardEnabled\">Enable Keyboard Shortcuts</Label>\n              </div>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"save\" className=\"space-y-6\">\n            <div>\n              <h3 className=\"text-lg font-medium mb-4 flex items-center gap-2\">\n                <Save className=\"h-5 w-5\" />\n                Save Configuration\n              </h3>\n              <div className=\"flex gap-2\">\n                <Input\n                  placeholder=\"Configuration name...\"\n                  value={saveConfigName}\n                  onChange={(e: React.ChangeEvent<HTMLInputElement>) => setSaveConfigName(e.target.value)}\n                />\n                <Button \n                  onClick={() => {\n                    if (saveConfigName.trim()) {\n                      saveConfig(saveConfigName.trim());\n                      setSaveConfigName('');\n                    }\n                  }}\n                  disabled={!saveConfigName.trim()}\n                >\n                  Save\n                </Button>\n              </div>\n            </div>\n\n            <Separator />\n          </TabsContent>\n        </Tabs>\n      </CardContent>\n    </Card>\n  );\n};\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitive from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Switch({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        \"peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        className={cn(\n          \"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0\"\n        )}\n      />\n    </SwitchPrimitive.Root>\n  )\n}\n\nexport { Switch }\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = \"default\",\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: \"sm\" | \"default\"\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = \"popper\",\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md\",\n          position === \"popper\" &&\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n          className\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            \"p-1\",\n            position === \"popper\" &&\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn(\"text-muted-foreground px-2 py-1.5 text-xs\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn(\"flex flex-col gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn(\"flex-1 outline-none\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n","\"use client\"\n\nimport * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport interface SeparatorProps extends React.HTMLAttributes<HTMLDivElement> {\n  orientation?: \"horizontal\" | \"vertical\"\n}\n\nconst Separator = React.forwardRef<HTMLDivElement, SeparatorProps>(\n  ({ className, orientation = \"horizontal\", ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = \"Separator\"\n\nexport { Separator }\n","import type { DrmLicenseRequestContext, DrmLicenseRequestHandler } from '@/core/drm/types';\n\nexport interface TokenLicenseRequestHandlerOptions {\n  getToken: () => Promise<string>;\n  refreshToken?: () => Promise<string>;\n  headerName?: string;\n  fetch?: (input: RequestInfo | URL, init?: RequestInit) => Promise<Response>;\n}\n\nexport const createTokenLicenseRequestHandler = (\n  options: TokenLicenseRequestHandlerOptions\n): DrmLicenseRequestHandler => {\n  const {\n    getToken,\n    refreshToken,\n    headerName = 'Authorization',\n    fetch: fetchFn = fetch,\n  } = options;\n\n  const buildHeaders = (contextHeaders: Record<string, string>, token: string): Record<string, string> => {\n    const tokenValue = headerName.toLowerCase() === 'authorization' ? `Bearer ${token}` : token;\n    return {\n      'Content-Type': 'application/octet-stream',\n      ...contextHeaders,\n      [headerName]: tokenValue,\n    };\n  };\n\n  const requestLicense = async (\n    context: DrmLicenseRequestContext,\n    token: string\n  ): Promise<Response> => {\n    return fetchFn(context.licenseServerUrl, {\n      method: 'POST',\n      headers: buildHeaders(context.headers, token),\n      body: context.message,\n      signal: context.signal,\n    });\n  };\n\n  return async (context: DrmLicenseRequestContext): Promise<ArrayBuffer> => {\n    let token = await getToken();\n    let response = await requestLicense(context, token);\n\n    if (response.status === 401 && refreshToken) {\n      token = await refreshToken();\n      response = await requestLicense(context, token);\n    }\n\n    if (!response.ok) {\n      throw new Error(`License request failed with status ${response.status}`);\n    }\n\n    return response.arrayBuffer();\n  };\n};\n","/**\n * Analytics plugin for video engine lifecycle events.\n */\n\nimport type {\n  VideoEnginePlugin,\n  VideoEnginePluginErrorPayload,\n  VideoEnginePluginLoadPayload,\n  VideoEnginePluginTimeUpdatePayload,\n} from '@/core/plugins/types';\nimport { getPlayerLogger } from '@/lib/logger';\n\nexport interface AnalyticsConfig {\n  enabled: boolean;\n  apiEndpoint?: string;\n  sampleRate?: number;\n  events?: {\n    play?: boolean;\n    pause?: boolean;\n    seek?: boolean;\n    complete?: boolean;\n    error?: boolean;\n    source?: boolean;\n  };\n}\n\nexport interface AnalyticsEvent {\n  type: string;\n  timestamp: number;\n  source?: string;\n  strategy?: string;\n  currentTime?: number;\n  duration?: number;\n  error?: string;\n  metadata?: Record<string, unknown>;\n}\n\nexport class AnalyticsPlugin implements VideoEnginePlugin {\n  readonly name = 'analytics';\n\n  private readonly config: AnalyticsConfig;\n  private readonly events: AnalyticsEvent[] = [];\n  private readonly sessionId: string;\n  private lastTimeUpdate?: VideoEnginePluginTimeUpdatePayload;\n  private lastSource?: VideoEnginePluginLoadPayload;\n\n  constructor(config: AnalyticsConfig) {\n    this.config = {\n      sampleRate: 1,\n      events: {\n        play: true,\n        pause: true,\n        seek: true,\n        complete: true,\n        error: true,\n        source: true,\n      },\n      ...config,\n    };\n\n    this.sessionId = this.generateSessionId();\n  }\n\n  onSourceLoadStart(payload: VideoEnginePluginLoadPayload): void {\n    this.lastSource = payload;\n    if (this.config.events?.source) {\n      this.track('source_load_start', {\n        src: payload.src,\n        strategy: payload.strategy,\n      });\n    }\n  }\n\n  onSourceLoaded(payload: VideoEnginePluginLoadPayload): void {\n    this.lastSource = payload;\n    if (this.config.events?.source) {\n      this.track('source_loaded', {\n        src: payload.src,\n        strategy: payload.strategy,\n      });\n    }\n  }\n\n  onPlay(): void {\n    if (this.config.events?.play) {\n      this.track('play');\n    }\n  }\n\n  onPause(): void {\n    if (this.config.events?.pause) {\n      this.track('pause');\n    }\n  }\n\n  onTimeUpdate(payload: VideoEnginePluginTimeUpdatePayload): void {\n    if (this.lastTimeUpdate && this.config.events?.seek) {\n      const delta = Math.abs(payload.currentTime - this.lastTimeUpdate.currentTime);\n      if (delta > 5) {\n        this.track('seek', {\n          currentTime: payload.currentTime,\n          duration: payload.duration,\n        });\n      }\n    }\n\n    if (this.config.events?.complete && payload.duration > 0 && payload.currentTime / payload.duration >= 0.98) {\n      this.track('complete', {\n        currentTime: payload.currentTime,\n        duration: payload.duration,\n      });\n    }\n\n    this.lastTimeUpdate = payload;\n  }\n\n  onError(payload: VideoEnginePluginErrorPayload): void {\n    if (this.config.events?.error) {\n      this.track('error', {\n        src: payload.src,\n        strategy: payload.strategy,\n        error: payload.error.message,\n      });\n    }\n  }\n\n  getEvents(): AnalyticsEvent[] {\n    return [...this.events];\n  }\n\n  clearEvents(): void {\n    this.events.length = 0;\n  }\n\n  private track(type: string, metadata?: Record<string, unknown>): void {\n    if (!this.config.enabled) {\n      return;\n    }\n\n    if (Math.random() > (this.config.sampleRate ?? 1)) {\n      return;\n    }\n\n    const event: AnalyticsEvent = {\n      type,\n      timestamp: Date.now(),\n      source: this.lastSource?.src,\n      strategy: this.lastSource?.strategy,\n      currentTime: this.lastTimeUpdate?.currentTime,\n      duration: this.lastTimeUpdate?.duration,\n      metadata: {\n        sessionId: this.sessionId,\n        ...metadata,\n      },\n    };\n\n    this.events.push(event);\n\n    if (this.config.apiEndpoint) {\n      this.sendEvent(event);\n    }\n  }\n\n  private async sendEvent(event: AnalyticsEvent): Promise<void> {\n    try {\n      await fetch(this.config.apiEndpoint as string, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(event),\n      });\n    } catch (error) {\n      getPlayerLogger().warn('Failed to send analytics event:', error);\n    }\n  }\n\n  private generateSessionId(): string {\n    return `session_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;\n  }\n}\n\nexport const createAnalyticsPlugin = (config: AnalyticsConfig): VideoEnginePlugin => {\n  return new AnalyticsPlugin(config);\n};\n"],"mappings":"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","names":["import_react","import_lucide_react","import_jsx_runtime","import_lucide_react","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","import_lucide_react","import_jsx_runtime","import_react","_a","_a","_b","import_react","_a","import_react","import_jsx_runtime","import_jsx_runtime","_a","_b","React","import_react","import_jsx_runtime","React","import_react","import_lucide_react","import_react","import_jsx_runtime","formatTime","import_jsx_runtime","formatTime","playbackRateOptions","iconBtnClass","iconClass","import_react","import_react","React","import_jsx_runtime","import_jsx_runtime","React","import_class_variance_authority","import_jsx_runtime","import_lucide_react","import_jsx_runtime","import_jsx_runtime","import_lucide_react","import_jsx_runtime","import_jsx_runtime","videoSources","import_react","import_jsx_runtime","import_lucide_react","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","Label","React","import_jsx_runtime","Separator","import_lucide_react","import_jsx_runtime","_a","_b","_c","Label","Separator"]}